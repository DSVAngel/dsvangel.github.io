import{a as V,b as xe,c as wf,d as M,e as tI,f as vu,g as nI,h as rI,i as iI,j as If,k as oI,l as ua,m as Ef,n as _u,o as sI,p as aI,q as Df,r as Oe,s as oi,t as In,u as wu,v as la,w as cI,x as uI,y as vr,z as Ut}from"./chunk-4ZHOUZTK.js";var Tf=null;var Cf=1,lI=Symbol("SIGNAL");function Ce(n){let e=Tf;return Tf=n,e}function dI(){return Tf}var bf={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Yx(n){if(!(Rf(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Cf)){if(!n.producerMustRecompute(n)&&!Af(n)){n.dirty=!1,n.lastCleanEpoch=Cf;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Cf}}function Sf(n){return n&&(n.nextProducerIndex=0),Ce(n)}function hI(n,e){if(Ce(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Rf(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Mf(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Af(n){Nf(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Yx(t),r!==t.version))return!0}return!1}function xf(n){if(Nf(n),Rf(n))for(let e=0;e<n.producerNode.length;e++)Mf(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Mf(n,e){if(Zx(n),n.liveConsumerNode.length===1&&Jx(n))for(let r=0;r<n.producerNode.length;r++)Mf(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Nf(i),i.producerIndexOfThis[r]=e}}function Rf(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Nf(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Zx(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Jx(n){return n.producerNode!==void 0}function Xx(){throw new Error}var eM=Xx;function fI(n){eM=n}function re(n){return typeof n=="function"}function so(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Iu=so(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function si(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Be=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(re(r))try{r()}catch(o){e=o instanceof Iu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{pI(o)}catch(s){e=e??[],s instanceof Iu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Iu(e)}}add(e){var t;if(e&&e!==this)if(this.closed)pI(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&si(t,e)}remove(e){let{_finalizers:t}=this;t&&si(t,e),e instanceof n&&e._removeParent(this)}};Be.EMPTY=(()=>{let n=new Be;return n.closed=!0,n})();var Pf=Be.EMPTY;function Eu(n){return n instanceof Be||n&&"closed"in n&&re(n.remove)&&re(n.add)&&re(n.unsubscribe)}function pI(n){re(n)?n():n.unsubscribe()}var an={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ao={setTimeout(n,e,...t){let{delegate:r}=ao;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ao;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Du(n){ao.setTimeout(()=>{let{onUnhandledError:e}=an;if(e)e(n);else throw n})}function da(){}var gI=kf("C",void 0,void 0);function mI(n){return kf("E",void 0,n)}function yI(n){return kf("N",n,void 0)}function kf(n,e,t){return{kind:n,value:e,error:t}}var ai=null;function co(n){if(an.useDeprecatedSynchronousErrorHandling){let e=!ai;if(e&&(ai={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=ai;if(ai=null,t)throw r}}else n()}function vI(n){an.useDeprecatedSynchronousErrorHandling&&ai&&(ai.errorThrown=!0,ai.error=n)}var ci=class extends Be{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Eu(e)&&e.add(this)):this.destination=rM}static create(e,t,r){return new qn(e,t,r)}next(e){this.isStopped?Ff(yI(e),this):this._next(e)}error(e){this.isStopped?Ff(mI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ff(gI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},tM=Function.prototype.bind;function Of(n,e){return tM.call(n,e)}var Lf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Cu(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Cu(r)}else Cu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Cu(t)}}},qn=class extends ci{constructor(e,t,r){super();let i;if(re(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&an.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Of(e.next,o),error:e.error&&Of(e.error,o),complete:e.complete&&Of(e.complete,o)}):i=e}this.destination=new Lf(i)}};function Cu(n){an.useDeprecatedSynchronousErrorHandling?vI(n):Du(n)}function nM(n){throw n}function Ff(n,e){let{onStoppedNotification:t}=an;t&&ao.setTimeout(()=>t(n,e))}var rM={closed:!0,next:da,error:nM,complete:da};var uo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Dt(n){return n}function Vf(...n){return jf(n)}function jf(n){return n.length===0?Dt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var pe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=oM(t)?t:new qn(t,r,i);return co(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=_I(r),new r((i,o)=>{let s=new qn({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[uo](){return this}pipe(...t){return jf(t)(this)}toPromise(t){return t=_I(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function _I(n){var e;return(e=n??an.Promise)!==null&&e!==void 0?e:Promise}function iM(n){return n&&re(n.next)&&re(n.error)&&re(n.complete)}function oM(n){return n&&n instanceof ci||iM(n)&&Eu(n)}function Bf(n){return re(n?.lift)}function le(n){return e=>{if(Bf(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function he(n,e,t,r,i){return new Uf(n,e,t,r,i)}var Uf=class extends ci{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function lo(){return le((n,e)=>{let t=null;n._refCount++;let r=he(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var ho=class extends pe{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Bf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Be;let t=this.getSubject();e.add(this.source.subscribe(he(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Be.EMPTY)}return e}refCount(){return lo()(this)}};var wI=so(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var qe=(()=>{class n extends pe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Tu(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new wI}next(t){co(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){co(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){co(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Pf:(this.currentObservers=null,o.push(t),new Be(()=>{this.currentObservers=null,si(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new pe;return t.source=this,t}}return n.create=(e,t)=>new Tu(e,t),n})(),Tu=class extends qe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Pf}};var ut=class extends qe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var ha={now(){return(ha.delegate||Date).now()},delegate:void 0};var bu=class extends qe{constructor(e=1/0,t=1/0,r=ha){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var Su=class extends Be{constructor(e,t){super()}schedule(e,t=0){return this}};var fa={setInterval(n,e,...t){let{delegate:r}=fa;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=fa;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var fo=class extends Su{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return fa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&fa.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,si(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var po=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};po.now=ha.now;var go=class extends po{constructor(e,t=po.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var pa=new go(fo);var Au=class extends fo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var xu=class extends go{};var $f=new xu(Au);var Ct=new pe(n=>n.complete());function II(n){return n&&re(n.schedule)}function Hf(n){return n[n.length-1]}function EI(n){return re(Hf(n))?n.pop():void 0}function En(n){return II(Hf(n))?n.pop():void 0}function DI(n,e){return typeof Hf(n)=="number"?n.pop():e}var Mu=n=>n&&typeof n.length=="number"&&typeof n!="function";function Ru(n){return re(n?.then)}function Nu(n){return re(n[uo])}function Pu(n){return Symbol.asyncIterator&&re(n?.[Symbol.asyncIterator])}function ku(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function sM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ou=sM();function Fu(n){return re(n?.[Ou])}function Lu(n){return nI(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield vu(t.read());if(i)return yield vu(void 0);yield yield vu(r)}}finally{t.releaseLock()}})}function Vu(n){return re(n?.getReader)}function Fe(n){if(n instanceof pe)return n;if(n!=null){if(Nu(n))return aM(n);if(Mu(n))return cM(n);if(Ru(n))return uM(n);if(Pu(n))return CI(n);if(Fu(n))return lM(n);if(Vu(n))return dM(n)}throw ku(n)}function aM(n){return new pe(e=>{let t=n[uo]();if(re(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function cM(n){return new pe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function uM(n){return new pe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Du)})}function lM(n){return new pe(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function CI(n){return new pe(e=>{hM(n,e).catch(t=>e.error(t))})}function dM(n){return CI(Lu(n))}function hM(n,e){var t,r,i,o;return tI(this,void 0,void 0,function*(){try{for(t=rI(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Pt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Wt(n,e=0){return le((t,r)=>{t.subscribe(he(r,i=>Pt(r,n,()=>r.next(i),e),()=>Pt(r,n,()=>r.complete(),e),i=>Pt(r,n,()=>r.error(i),e)))})}function cn(n,e=0){return le((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function TI(n,e){return Fe(n).pipe(cn(e),Wt(e))}function bI(n,e){return Fe(n).pipe(cn(e),Wt(e))}function SI(n,e){return new pe(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function AI(n,e){return new pe(t=>{let r;return Pt(t,e,()=>{r=n[Ou](),Pt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>re(r?.return)&&r.return()})}function ju(n,e){if(!n)throw new Error("Iterable cannot be null");return new pe(t=>{Pt(t,e,()=>{let r=n[Symbol.asyncIterator]();Pt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function xI(n,e){return ju(Lu(n),e)}function MI(n,e){if(n!=null){if(Nu(n))return TI(n,e);if(Mu(n))return SI(n,e);if(Ru(n))return bI(n,e);if(Pu(n))return ju(n,e);if(Fu(n))return AI(n,e);if(Vu(n))return xI(n,e)}throw ku(n)}function Ee(n,e){return e?MI(n,e):Fe(n)}function X(...n){let e=En(n);return Ee(n,e)}function mo(n,e){let t=re(n)?n:()=>n,r=i=>i.error(t());return new pe(e?i=>e.schedule(r,0,i):r)}function qf(n){return!!n&&(n instanceof pe||re(n.lift)&&re(n.subscribe))}var zn=so(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function G(n,e){return le((t,r)=>{let i=0;t.subscribe(he(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:fM}=Array;function pM(n,e){return fM(e)?n(...e):n(e)}function RI(n){return G(e=>pM(n,e))}var{isArray:gM}=Array,{getPrototypeOf:mM,prototype:yM,keys:vM}=Object;function NI(n){if(n.length===1){let e=n[0];if(gM(e))return{args:e,keys:null};if(_M(e)){let t=vM(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function _M(n){return n&&typeof n=="object"&&mM(n)===yM}function PI(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function ga(...n){let e=En(n),t=EI(n),{args:r,keys:i}=NI(n);if(r.length===0)return Ee([],e);let o=new pe(wM(r,e,i?s=>PI(i,s):Dt));return t?o.pipe(RI(t)):o}function wM(n,e,t=Dt){return r=>{kI(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)kI(e,()=>{let l=Ee(n[c],e),h=!1;l.subscribe(he(r,p=>{o[c]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function kI(n,e,t){n?Pt(t,n,e):e()}function OI(n,e,t,r,i,o,s,a){let c=[],l=0,h=0,p=!1,m=()=>{p&&!c.length&&!l&&e.complete()},v=R=>l<r?b(R):c.push(R),b=R=>{o&&e.next(R),l++;let N=!1;Fe(t(R,h++)).subscribe(he(e,B=>{i?.(B),o?v(B):e.next(B)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;c.length&&l<r;){let B=c.shift();s?Pt(e,s,()=>b(B)):b(B)}m()}catch(B){e.error(B)}}))};return n.subscribe(he(e,v,()=>{p=!0,m()})),()=>{a?.()}}function Qe(n,e,t=1/0){return re(e)?Qe((r,i)=>G((o,s)=>e(r,o,i,s))(Fe(n(r,i))),t):(typeof e=="number"&&(t=e),le((r,i)=>OI(r,i,n,t)))}function _r(n=1/0){return Qe(Dt,n)}function FI(){return _r(1)}function yo(...n){return FI()(Ee(n,En(n)))}function Bu(n){return new pe(e=>{Fe(n()).subscribe(e)})}function zf(...n){let e=En(n),t=DI(n,1/0),r=n;return r.length?r.length===1?Fe(r[0]):_r(t)(Ee(r,e)):Ct}function lt(n,e){return le((t,r)=>{let i=0;t.subscribe(he(r,o=>n.call(e,o,i++)&&r.next(o)))})}function wr(n){return le((e,t)=>{let r=null,i=!1,o;r=e.subscribe(he(t,void 0,void 0,s=>{o=Fe(n(s,wr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function LI(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(he(s,h=>{let p=l++;c=a?n(c,h,p):(a=!0,h),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function ui(n,e){return re(e)?Qe(n,e,1):Qe(n,1)}function Ir(n){return le((e,t)=>{let r=!1;e.subscribe(he(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Gn(n){return n<=0?()=>Ct:le((e,t)=>{let r=0;e.subscribe(he(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Gf(n){return G(()=>n)}function Wf(n,e=Dt){return n=n??IM,le((t,r)=>{let i,o=!0;t.subscribe(he(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function IM(n,e){return n===e}function Uu(n=EM){return le((e,t)=>{let r=!1;e.subscribe(he(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function EM(){return new zn}function ma(n){return le((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Kt(n,e){let t=arguments.length>=2;return r=>r.pipe(n?lt((i,o)=>n(i,o,r)):Dt,Gn(1),t?Ir(e):Uu(()=>new zn))}function vo(n){return n<=0?()=>Ct:le((e,t)=>{let r=[];e.subscribe(he(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Kf(n,e){let t=arguments.length>=2;return r=>r.pipe(n?lt((i,o)=>n(i,o,r)):Dt,vo(1),t?Ir(e):Uu(()=>new zn))}function ya(){return le((n,e)=>{let t,r=!1;n.subscribe(he(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function li(n,e){return le(LI(n,e,arguments.length>=2,!0))}function VI(n={}){let{connector:e=()=>new qe,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,l=0,h=!1,p=!1,m=()=>{a?.unsubscribe(),a=void 0},v=()=>{m(),s=c=void 0,h=p=!1},b=()=>{let R=s;v(),R?.unsubscribe()};return le((R,N)=>{l++,!p&&!h&&m();let B=c=c??e();N.add(()=>{l--,l===0&&!p&&!h&&(a=Qf(b,i))}),B.subscribe(N),!s&&l>0&&(s=new qn({next:q=>B.next(q),error:q=>{p=!0,m(),a=Qf(v,t,q),B.error(q)},complete:()=>{h=!0,m(),a=Qf(v,r),B.complete()}}),Fe(R).subscribe(s))})(o)}}function Qf(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new qn({next:()=>{r.unsubscribe(),n()}});return Fe(e(...t)).subscribe(r)}function $u(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,VI({connector:()=>new bu(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function di(...n){let e=En(n);return le((t,r)=>{(e?yo(n,t,e):yo(n,t)).subscribe(r)})}function Ue(n,e){return le((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(he(r,c=>{i?.unsubscribe();let l=0,h=o++;Fe(n(c,h)).subscribe(i=he(r,p=>r.next(e?e(c,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Hu(n,e){return re(e)?Ue(()=>n,e):Ue(()=>n)}function Yf(n){return le((e,t)=>{Fe(n).subscribe(he(t,()=>t.complete(),da)),!t.closed&&e.subscribe(t)})}function nt(n,e,t){let r=re(n)||e||t?{next:n,error:e,complete:t}:n;return r?le((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(he(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Dt}var DE="https://g.co/ng/security#xss",ee=class extends Error{constructor(e,t){super(Wp(e,t)),this.code=e}};function Wp(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Ra(n){return{toString:n}.toString()}var qu="__parameters__";function DM(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function CE(n,e,t){return Ra(()=>{let r=DM(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,h){let p=c.hasOwnProperty(qu)?c[qu]:Object.defineProperty(c,qu,{value:[]})[qu];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Zn=globalThis;function Se(n){for(let e in n)if(n[e]===Se)return e;throw Error("Could not find renamed property on target object.")}function bt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(bt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function jI(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var CM=Se({__forward_ref__:Se});function TE(n){return n.__forward_ref__=TE,n.toString=function(){return bt(this())},n}function Yt(n){return bE(n)?n():n}function bE(n){return typeof n=="function"&&n.hasOwnProperty(CM)&&n.__forward_ref__===TE}function H(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function At(n){return{providers:n.providers||[],imports:n.imports||[]}}function Cl(n){return BI(n,AE)||BI(n,xE)}function SE(n){return Cl(n)!==null}function BI(n,e){return n.hasOwnProperty(e)?n[e]:null}function TM(n){let e=n&&(n[AE]||n[xE]);return e||null}function UI(n){return n&&(n.hasOwnProperty($I)||n.hasOwnProperty(bM))?n[$I]:null}var AE=Se({\u0275prov:Se}),$I=Se({\u0275inj:Se}),xE=Se({ngInjectableDef:Se}),bM=Se({ngInjectorDef:Se}),W=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=H({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function ME(n){return n&&!!n.\u0275providers}var SM=Se({\u0275cmp:Se}),AM=Se({\u0275dir:Se}),xM=Se({\u0275pipe:Se}),MM=Se({\u0275mod:Se}),Ju=Se({\u0275fac:Se}),_a=Se({__NG_ELEMENT_ID__:Se}),HI=Se({__NG_ENV_ID__:Se});function Ia(n){return typeof n=="string"?n:n==null?"":String(n)}function RM(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Ia(n)}function NM(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new ee(-200,n)}function Kp(n,e){throw new ee(-201,!1)}var de=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(de||{}),cp;function RE(){return cp}function Qt(n){let e=cp;return cp=n,e}function NE(n,e,t){let r=Cl(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&de.Optional)return null;if(e!==void 0)return e;Kp(n,"Injector")}var PM={},Ea=PM,up="__NG_DI_FLAG__",Xu="ngTempTokenPath",kM="ngTokenPath",OM=/\n/gm,FM="\u0275",qI="__source",Do;function LM(){return Do}function Er(n){let e=Do;return Do=n,e}function VM(n,e=de.Default){if(Do===void 0)throw new ee(-203,!1);return Do===null?NE(n,void 0,e):Do.get(n,e&de.Optional?null:void 0,e)}function O(n,e=de.Default){return(RE()||VM)(Yt(n),e)}function j(n,e=de.Default){return O(n,Tl(e))}function Tl(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function lp(n){let e=[];for(let t=0;t<n.length;t++){let r=Yt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new ee(900,!1);let i,o=de.Default;for(let s=0;s<r.length;s++){let a=r[s],c=jM(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(O(i,o))}else e.push(O(r))}return e}function PE(n,e){return n[up]=e,n.prototype[up]=e,n}function jM(n){return n[up]}function BM(n,e,t,r){let i=n[Xu];throw e[qI]&&i.unshift(e[qI]),n.message=UM(`
`+n.message,i,t,r),n[kM]=i,n[Xu]=null,n}function UM(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==FM?n.slice(2):n;let i=bt(e);if(Array.isArray(e))i=e.map(bt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):bt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(OM,`
  `)}`}var Oo=PE(CE("Optional"),8);var Qp=PE(CE("SkipSelf"),4);function To(n,e){let t=n.hasOwnProperty(Ju);return t?n[Ju]:null}function Yp(n,e){n.forEach(t=>Array.isArray(t)?Yp(t,e):e(t))}function kE(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function el(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function $M(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function HM(n,e,t){let r=Na(n,e);return r>=0?n[r|1]=t:(r=~r,$M(n,r,e,t)),r}function Zf(n,e){let t=Na(n,e);if(t>=0)return n[t|1]}function Na(n,e){return qM(n,e,1)}function qM(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Da={},ln=[],bo=new W(""),OE=new W("",-1),FE=new W(""),tl=class{get(e,t=Ea){if(t===Ea){let r=new Error(`NullInjectorError: No provider for ${bt(e)}!`);throw r.name="NullInjectorError",r}return t}},LE=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(LE||{}),Cn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Cn||{}),Tr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Tr||{});function zM(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function dp(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];WM(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function GM(n){return n===3||n===4||n===6}function WM(n){return n.charCodeAt(0)===64}function Zp(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?zI(n,t,i,null,e[++r]):zI(n,t,i,null,null))}}return n}function zI(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var VE="ng-template";function KM(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&zM(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Jp(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Jp(n){return n.type===4&&n.value!==VE}function QM(n,e,t){let r=n.type===4&&!t?VE:n.value;return e===r}function YM(n,e,t){let r=4,i=n.attrs,o=i!==null?XM(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!un(r)&&!un(c))return!1;if(s&&un(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!QM(n,c,t)||c===""&&e.length===1){if(un(r))return!1;s=!0}}else if(r&8){if(i===null||!KM(n,i,c,t)){if(un(r))return!1;s=!0}}else{let l=e[++a],h=ZM(c,i,Jp(n),t);if(h===-1){if(un(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(un(r))return!1;s=!0}}}}return un(r)||s}function un(n){return(n&1)===0}function ZM(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return eR(e,n)}function JM(n,e,t=!1){for(let r=0;r<e.length;r++)if(YM(n,e[r],t))return!0;return!1}function XM(n){for(let e=0;e<n.length;e++){let t=n[e];if(GM(t))return e}return n.length}function eR(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function GI(n,e){return n?":not("+e.trim()+")":e}function tR(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!un(s)&&(e+=GI(o,i),i=""),r=s,o=o||!un(r);t++}return i!==""&&(e+=GI(o,i)),e}function nR(n){return n.map(tR).join(",")}function rR(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!un(i))break;i=o}r++}return{attrs:e,classes:t}}function st(n){return Ra(()=>{let e=HE(n),t=xe(V({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===LE.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Cn.Emulated,styles:n.styles||ln,_:null,schemas:n.schemas||null,tView:null,id:""});qE(t);let r=n.dependencies;return t.directiveDefs=KI(r,!1),t.pipeDefs=KI(r,!0),t.id=sR(t),t})}function iR(n){return br(n)||jE(n)}function oR(n){return n!==null}function xt(n){return Ra(()=>({type:n.type,bootstrap:n.bootstrap||ln,declarations:n.declarations||ln,imports:n.imports||ln,exports:n.exports||ln,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function WI(n,e){if(n==null)return Da;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=Tr.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==Tr.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Pa(n){return Ra(()=>{let e=HE(n);return qE(e),e})}function br(n){return n[SM]||null}function jE(n){return n[AM]||null}function BE(n){return n[xM]||null}function UE(n){let e=br(n)||jE(n)||BE(n);return e!==null?e.standalone:!1}function $E(n,e){let t=n[MM]||null;if(!t&&e===!0)throw new Error(`Type ${bt(n)} does not have '\u0275mod' property.`);return t}function HE(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Da,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||ln,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:WI(n.inputs,e),outputs:WI(n.outputs),debugInfo:null}}function qE(n){n.features?.forEach(e=>e(n))}function KI(n,e){if(!n)return null;let t=e?BE:iR;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(oR)}function sR(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function aR(...n){return{\u0275providers:zE(!0,n),\u0275fromNgModule:!0}}function zE(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Yp(e,s=>{let a=s;hp(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&GE(i,o),t}function GE(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Xp(i,o=>{e(o,r)})}}function hp(n,e,t,r){if(n=Yt(n),!n)return!1;let i=null,o=UI(n),s=!o&&br(n);if(!o&&!s){let c=n.ngModule;if(o=UI(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)hp(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Yp(o.imports,h=>{hp(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&GE(l,e)}if(!a){let l=To(i)||(()=>new i);e({provide:i,useFactory:l,deps:ln},i),e({provide:FE,useValue:i,multi:!0},i),e({provide:bo,useValue:()=>O(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;Xp(c,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Xp(n,e){for(let t of n)ME(t)&&(t=t.\u0275providers),Array.isArray(t)?Xp(t,e):e(t)}var cR=Se({provide:String,useValue:Se});function WE(n){return n!==null&&typeof n=="object"&&cR in n}function uR(n){return!!(n&&n.useExisting)}function lR(n){return!!(n&&n.useFactory)}function fp(n){return typeof n=="function"}var bl=new W(""),Ku={},dR={},Jf;function eg(){return Jf===void 0&&(Jf=new tl),Jf}var $t=class{},Ca=class extends $t{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,gp(e,s=>this.processProvider(s)),this.records.set(OE,_o(void 0,this)),i.has("environment")&&this.records.set($t,_o(void 0,this));let o=this.records.get(bl);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(FE,ln,de.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ce(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ce(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Er(this),r=Qt(void 0),i;try{return e()}finally{Er(t),Qt(r)}}get(e,t=Ea,r=de.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(HI))return e[HI](this);r=Tl(r);let i,o=Er(this),s=Qt(void 0);try{if(!(r&de.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=yR(e)&&Cl(e);l&&this.injectableDefInScope(l)?c=_o(pp(e),Ku):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&de.Self?eg():this.parent;return t=r&de.Optional&&t===Ea?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Xu]=a[Xu]||[]).unshift(bt(e)),o)throw a;return BM(a,e,"R3InjectorError",this.source)}else throw a}finally{Qt(s),Er(o)}}resolveInjectorInitializers(){let e=Ce(null),t=Er(this),r=Qt(void 0),i;try{let o=this.get(bo,ln,de.Self);for(let s of o)s()}finally{Er(t),Qt(r),Ce(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(bt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ee(205,!1)}processProvider(e){e=Yt(e);let t=fp(e)?e:Yt(e&&e.provide),r=fR(e);if(!fp(e)&&e.multi===!0){let i=this.records.get(t);i||(i=_o(void 0,Ku,!0),i.factory=()=>lp(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Ce(null);try{return t.value===Ku&&(t.value=dR,t.value=t.factory()),typeof t.value=="object"&&t.value&&mR(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ce(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Yt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function pp(n){let e=Cl(n),t=e!==null?e.factory:To(n);if(t!==null)return t;if(n instanceof W)throw new ee(204,!1);if(n instanceof Function)return hR(n);throw new ee(204,!1)}function hR(n){if(n.length>0)throw new ee(204,!1);let t=TM(n);return t!==null?()=>t.factory(n):()=>new n}function fR(n){if(WE(n))return _o(void 0,n.useValue);{let e=pR(n);return _o(e,Ku)}}function pR(n,e,t){let r;if(fp(n)){let i=Yt(n);return To(i)||pp(i)}else if(WE(n))r=()=>Yt(n.useValue);else if(lR(n))r=()=>n.useFactory(...lp(n.deps||[]));else if(uR(n))r=()=>O(Yt(n.useExisting));else{let i=Yt(n&&(n.useClass||n.provide));if(gR(n))r=()=>new i(...lp(n.deps));else return To(i)||pp(i)}return r}function _o(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function gR(n){return!!n.deps}function mR(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function yR(n){return typeof n=="function"||typeof n=="object"&&n instanceof W}function gp(n,e){for(let t of n)Array.isArray(t)?gp(t,e):t&&ME(t)?gp(t.\u0275providers,e):e(t)}function Sn(n,e){n instanceof Ca&&n.assertNotDestroyed();let t,r=Er(n),i=Qt(void 0);try{return e()}finally{Er(r),Qt(i)}}function KE(){return RE()!==void 0||LM()!=null}function vR(n){if(!KE())throw new ee(-203,!1)}function _R(n){let e=Zn.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function wR(n){return typeof n=="function"}var Jn=0,ge=1,ie=2,St=3,dn=4,hn=5,nl=6,QI=7,Wn=8,So=9,Tn=10,kt=11,Ta=12,YI=13,Fo=14,bn=15,Ao=16,wo=17,xo=18,Sl=19,QE=20,Cr=21,Xf=22,Zt=23,Sr=25,YE=1;var pi=7,rl=8,il=9,Jt=10,ol=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(ol||{});function hi(n){return Array.isArray(n)&&typeof n[YE]=="object"}function Xn(n){return Array.isArray(n)&&n[YE]===!0}function ZE(n){return(n.flags&4)!==0}function Al(n){return n.componentOffset>-1}function JE(n){return(n.flags&1)===1}function ka(n){return!!n.template}function mp(n){return(n[ie]&512)!==0}var yp=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function XE(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function xl(){return eD}function eD(n){return n.type.prototype.ngOnChanges&&(n.setInput=ER),IR}xl.ngInherit=!0;function IR(){let n=nD(this),e=n?.current;if(e){let t=n.previous;if(t===Da)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function ER(n,e,t,r,i){let o=this.declaredInputs[r],s=nD(n)||DR(n,{previous:Da,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new yp(l&&l.currentValue,t,c===Da),XE(n,e,i,t)}var tD="__ngSimpleChanges__";function nD(n){return n[tD]||null}function DR(n,e){return n[tD]=e}var ZI=null;var Dr=function(n,e,t){ZI?.(n,e,t)},CR="svg",TR="math";function Kn(n){for(;Array.isArray(n);)n=n[Jn];return n}function rD(n,e){return Kn(e[n])}function An(n,e){return Kn(e[n.index])}function iD(n,e){return n.data[e]}function Lo(n,e){let t=e[n];return hi(t)?t:t[Jn]}function tg(n){return(n[ie]&128)===128}function bR(n){return Xn(n[St])}function sl(n,e){return e==null?null:n[e]}function oD(n){n[wo]=0}function sD(n){n[ie]&1024||(n[ie]|=1024,tg(n)&&Rl(n))}function SR(n,e){for(;n>0;)e=e[Fo],n--;return e}function Ml(n){return!!(n[ie]&9216||n[Zt]?.dirty)}function vp(n){n[Tn].changeDetectionScheduler?.notify(8),n[ie]&64&&(n[ie]|=1024),Ml(n)&&Rl(n)}function Rl(n){n[Tn].changeDetectionScheduler?.notify(0);let e=gi(n);for(;e!==null&&!(e[ie]&8192||(e[ie]|=8192,!tg(e)));)e=gi(e)}function aD(n,e){if((n[ie]&256)===256)throw new ee(911,!1);n[Cr]===null&&(n[Cr]=[]),n[Cr].push(e)}function AR(n,e){if(n[Cr]===null)return;let t=n[Cr].indexOf(e);t!==-1&&n[Cr].splice(t,1)}function gi(n){let e=n[St];return Xn(e)?e[St]:e}var me={lFrame:vD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var cD=!1;function xR(){return me.lFrame.elementDepthCount}function MR(){me.lFrame.elementDepthCount++}function RR(){me.lFrame.elementDepthCount--}function uD(){return me.bindingsEnabled}function NR(){return me.skipHydrationRootTNode!==null}function PR(n){return me.skipHydrationRootTNode===n}function kR(){me.skipHydrationRootTNode=null}function rt(){return me.lFrame.lView}function wi(){return me.lFrame.tView}function xn(){let n=lD();for(;n!==null&&n.type===64;)n=n.parent;return n}function lD(){return me.lFrame.currentTNode}function OR(){let n=me.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Oa(n,e){let t=me.lFrame;t.currentTNode=n,t.isParent=e}function dD(){return me.lFrame.isParent}function FR(){me.lFrame.isParent=!1}function hD(){return cD}function JI(n){cD=n}function LR(){return me.lFrame.bindingIndex}function VR(n){return me.lFrame.bindingIndex=n}function fD(){return me.lFrame.bindingIndex++}function pD(n){let e=me.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function jR(){return me.lFrame.inI18n}function BR(n,e){let t=me.lFrame;t.bindingIndex=t.bindingRootIndex=n,_p(e)}function UR(){return me.lFrame.currentDirectiveIndex}function _p(n){me.lFrame.currentDirectiveIndex=n}function $R(n){let e=me.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function gD(n){me.lFrame.currentQueryIndex=n}function HR(n){let e=n[ge];return e.type===2?e.declTNode:e.type===1?n[hn]:null}function mD(n,e,t){if(t&de.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&de.Host);)if(i=HR(o),i===null||(o=o[Fo],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=me.lFrame=yD();return r.currentTNode=e,r.lView=n,!0}function ng(n){let e=yD(),t=n[ge];me.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function yD(){let n=me.lFrame,e=n===null?null:n.child;return e===null?vD(n):e}function vD(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function _D(){let n=me.lFrame;return me.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var wD=_D;function rg(){let n=_D();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function qR(n){return(me.lFrame.contextLView=SR(n,me.lFrame.contextLView))[Wn]}function Ii(){return me.lFrame.selectedIndex}function mi(n){me.lFrame.selectedIndex=n}function zR(){let n=me.lFrame;return iD(n.tView,n.selectedIndex)}function GR(){return me.lFrame.currentNamespace}var ID=!0;function ig(){return ID}function og(n){ID=n}function WR(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=eD(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function sg(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Qu(n,e,t){ED(n,e,3,t)}function Yu(n,e,t,r){(n[ie]&3)===t&&ED(n,e,t,r)}function ep(n,e){let t=n[ie];(t&3)===e&&(t&=16383,t+=1,n[ie]=t)}function ED(n,e,t,r){let i=r!==void 0?n[wo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[wo]+=65536),(a<o||o==-1)&&(KR(n,t,e,c),n[wo]=(n[wo]&4294901760)+c+2),c++}function XI(n,e){Dr(4,n,e);let t=Ce(null);try{e.call(n)}finally{Ce(t),Dr(5,n,e)}}function KR(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ie]>>14<n[wo]>>16&&(n[ie]&3)===e&&(n[ie]+=16384,XI(a,o)):XI(a,o)}var Co=-1,ba=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function QR(n){return n instanceof ba}function YR(n){return(n.flags&8)!==0}function ZR(n){return(n.flags&16)!==0}var tp={},wp=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Tl(r);let i=this.injector.get(e,tp,r);return i!==tp||t===tp?i:this.parentInjector.get(e,t,r)}};function DD(n){return n!==Co}function al(n){return n&32767}function JR(n){return n>>16}function cl(n,e){let t=JR(n),r=e;for(;t>0;)r=r[Fo],t--;return r}var Ip=!0;function eE(n){let e=Ip;return Ip=n,e}var XR=256,CD=XR-1,TD=5,eN=0,Dn={};function tN(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(_a)&&(r=t[_a]),r==null&&(r=t[_a]=eN++);let i=r&CD,o=1<<i;e.data[n+(i>>TD)]|=o}function bD(n,e){let t=SD(n,e);if(t!==-1)return t;let r=e[ge];r.firstCreatePass&&(n.injectorIndex=e.length,np(r.data,n),np(e,null),np(r.blueprint,null));let i=ag(n,e),o=n.injectorIndex;if(DD(i)){let s=al(i),a=cl(i,e),c=a[ge].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function np(n,e){n.push(0,0,0,0,0,0,0,0,e)}function SD(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function ag(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=ND(i),r===null)return Co;if(t++,i=i[Fo],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Co}function nN(n,e,t){tN(n,e,t)}function AD(n,e,t){if(t&de.Optional||n!==void 0)return n;Kp(e,"NodeInjector")}function xD(n,e,t,r){if(t&de.Optional&&r===void 0&&(r=null),!(t&(de.Self|de.Host))){let i=n[So],o=Qt(void 0);try{return i?i.get(e,r,t&de.Optional):NE(e,r,t&de.Optional)}finally{Qt(o)}}return AD(r,e,t)}function MD(n,e,t,r=de.Default,i){if(n!==null){if(e[ie]&2048&&!(r&de.Self)){let s=aN(n,e,t,r,Dn);if(s!==Dn)return s}let o=RD(n,e,t,r,Dn);if(o!==Dn)return o}return xD(e,t,r,i)}function RD(n,e,t,r,i){let o=oN(t);if(typeof o=="function"){if(!mD(e,n,r))return r&de.Host?AD(i,t,r):xD(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&de.Optional))Kp(t);else return s}finally{wD()}}else if(typeof o=="number"){let s=null,a=SD(n,e),c=Co,l=r&de.Host?e[bn][hn]:null;for((a===-1||r&de.SkipSelf)&&(c=a===-1?ag(n,e):e[a+8],c===Co||!nE(r,!1)?a=-1:(s=e[ge],a=al(c),e=cl(c,e)));a!==-1;){let h=e[ge];if(tE(o,a,h.data)){let p=rN(a,e,t,s,r,l);if(p!==Dn)return p}c=e[a+8],c!==Co&&nE(r,e[ge].data[a+8]===l)&&tE(o,a,e)?(s=h,a=al(c),e=cl(c,e)):a=-1}}return i}function rN(n,e,t,r,i,o){let s=e[ge],a=s.data[n+8],c=r==null?Al(a)&&Ip:r!=s&&(a.type&3)!==0,l=i&de.Host&&o===a,h=iN(a,s,t,c,l);return h!==null?Sa(e,s,h,a):Dn}function iN(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let v=p;v<m;v++){let b=s[v];if(v<c&&t===b||v>=c&&b.type===t)return v}if(i){let v=s[c];if(v&&ka(v)&&v.type===t)return c}return null}function Sa(n,e,t,r){let i=n[t],o=e.data;if(QR(i)){let s=i;s.resolving&&NM(RM(o[t]));let a=eE(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?Qt(s.injectImpl):null,h=mD(n,r,de.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&WR(t,o[t],e)}finally{l!==null&&Qt(l),eE(a),s.resolving=!1,wD()}}return i}function oN(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(_a)?n[_a]:void 0;return typeof e=="number"?e>=0?e&CD:sN:e}function tE(n,e,t){let r=1<<n;return!!(t[e+(n>>TD)]&r)}function nE(n,e){return!(n&de.Self)&&!(n&de.Host&&e)}var fi=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return MD(this._tNode,this._lView,e,Tl(r),t)}};function sN(){return new fi(xn(),rt())}function cg(n){return Ra(()=>{let e=n.prototype.constructor,t=e[Ju]||Ep(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Ju]||Ep(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Ep(n){return bE(n)?()=>{let e=Ep(Yt(n));return e&&e()}:To(n)}function aN(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ie]&2048&&!(s[ie]&512);){let a=RD(o,s,t,r|de.Self,Dn);if(a!==Dn)return a;let c=o.parent;if(!c){let l=s[QE];if(l){let h=l.get(t,Dn,r);if(h!==Dn)return h}c=ND(s),s=s[Fo]}o=c}return i}function ND(n){let e=n[ge],t=e.type;return t===2?e.declTNode:t===1?n[hn]:null}function rE(n,e=null,t=null,r){let i=PD(n,e,t,r);return i.resolveInjectorInitializers(),i}function PD(n,e=null,t=null,r,i=new Set){let o=[t||ln,aR(n)];return r=r||(typeof n=="object"?void 0:bt(n)),new Ca(o,e||eg(),r||null,i)}var Xt=class n{static{this.THROW_IF_NOT_FOUND=Ea}static{this.NULL=new tl}static create(e,t){if(Array.isArray(e))return rE({name:""},t,e,"");{let r=e.name??"";return rE({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=H({token:n,providedIn:"any",factory:()=>O(OE)})}static{this.__NG_ELEMENT_ID__=-1}};var cN=new W("");cN.__NG_ELEMENT_ID__=n=>{let e=xn();if(e===null)throw new ee(204,!1);if(e.type&2)return e.value;if(n&de.Optional)return null;throw new ee(204,!1)};var uN="ngOriginalError";function rp(n){return n[uN]}var kD=!0,ug=(()=>{class n{static{this.__NG_ELEMENT_ID__=lN}static{this.__NG_ENV_ID__=t=>t}}return n})(),Dp=class extends ug{constructor(e){super(),this._lView=e}onDestroy(e){return aD(this._lView,e),()=>AR(this._lView,e)}};function lN(){return new Dp(rt())}var Vo=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ut(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}}return n})();var Cp=class extends qe{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,KE()&&(this.destroyRef=j(ug,{optional:!0})??void 0,this.pendingTasks=j(Vo,{optional:!0})??void 0)}emit(e){let t=Ce(null);try{super.next(e)}finally{Ce(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Be&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Tt=Cp;function ul(...n){}function OD(n){let e,t;function r(){n=ul;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function iE(n){return queueMicrotask(()=>n()),()=>{n=ul}}var lg="isAngularZone",ll=lg+"_ID",dN=0,ye=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Tt(!1),this.onMicrotaskEmpty=new Tt(!1),this.onStable=new Tt(!1),this.onError=new Tt(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=kD}=e;if(typeof Zone>"u")throw new ee(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,pN(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(lg)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ee(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ee(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,hN,ul,ul);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},hN={};function dg(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function fN(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){OD(()=>{n.callbackScheduled=!1,Tp(n),n.isCheckStableRunning=!0,dg(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Tp(n)}function pN(n){let e=()=>{fN(n)},t=dN++;n._inner=n._inner.fork({name:"angular",properties:{[lg]:!0,[ll]:t,[ll+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(gN(c))return r.invokeTask(o,s,a,c);try{return oE(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),sE(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return oE(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!mN(c)&&e(),sE(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Tp(n),dg(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Tp(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function oE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function sE(n){n._nesting--,dg(n)}var dl=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Tt,this.onMicrotaskEmpty=new Tt,this.onStable=new Tt,this.onError=new Tt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function gN(n){return FD(n,"__ignore_ng_zone__")}function mN(n){return FD(n,"__scheduler_tick__")}function FD(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function yN(n="zone.js",e){return n==="noop"?new dl:n==="zone.js"?new ye(e):n}var Qn=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&rp(e);for(;t&&rp(t);)t=rp(t);return t||null}},vN=new W("",{providedIn:"root",factory:()=>{let n=j(ye),e=j(Qn);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function _N(){return Nl(xn(),rt())}function Nl(n,e){return new Pl(An(n,e))}var Pl=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=_N}}return n})();function LD(n){return(n.flags&128)===128}var VD=new Map,wN=0;function IN(){return wN++}function EN(n){VD.set(n[Sl],n)}function bp(n){VD.delete(n[Sl])}var aE="__ngContext__";function yi(n,e){hi(e)?(n[aE]=e[Sl],EN(e)):n[aE]=e}function jD(n){return UD(n[Ta])}function BD(n){return UD(n[dn])}function UD(n){for(;n!==null&&!Xn(n);)n=n[dn];return n}var Sp;function $D(n){Sp=n}function DN(){if(Sp!==void 0)return Sp;if(typeof document<"u")return document;throw new ee(210,!1)}var kl=new W("",{providedIn:"root",factory:()=>CN}),CN="ng",hg=new W(""),Ot=new W("",{providedIn:"platform",factory:()=>"unknown"});var fg=new W("",{providedIn:"root",factory:()=>DN().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var TN="h",bN="b";var SN=()=>null;function pg(n,e,t=!1){return SN(n,e,t)}var HD=!1,AN=new W("",{providedIn:"root",factory:()=>HD});var hl=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${DE})`}};function Ol(n){return n instanceof hl?n.changingThisBreaksApplicationSecurity:n}function qD(n,e){let t=xN(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${DE})`)}return t===e}function xN(n){return n instanceof hl&&n.getTypeName()||null}var MN=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function zD(n){return n=String(n),n.match(MN)?n:"unsafe:"+n}var gg=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(gg||{});function GD(n){let e=RN();return e?e.sanitize(gg.URL,n)||"":qD(n,"URL")?Ol(n):zD(Ia(n))}function RN(){let n=rt();return n&&n[Tn].sanitizer}function WD(n){return n instanceof Function?n():n}function NN(n){return(n??j(Xt)).get(Ot)==="browser"}var Yn=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Yn||{}),PN;function mg(n,e){return PN(n,e)}function Io(n,e,t,r,i){if(r!=null){let o,s=!1;Xn(r)?o=r:hi(r)&&(s=!0,r=r[Jn]);let a=Kn(r);n===0&&t!==null?i==null?JD(e,t,a):fl(e,t,a,i||null,!0):n===1&&t!==null?fl(e,t,a,i||null,!0):n===2?KN(e,a,s):n===3&&e.destroyNode(a),o!=null&&YN(e,n,o,t,i)}}function kN(n,e){return n.createText(e)}function ON(n,e,t){n.setValue(e,t)}function KD(n,e,t){return n.createElement(e,t)}function FN(n,e){QD(n,e),e[Jn]=null,e[hn]=null}function LN(n,e,t,r,i,o){r[Jn]=i,r[hn]=e,Fl(n,r,t,1,i,o)}function QD(n,e){e[Tn].changeDetectionScheduler?.notify(9),Fl(n,e,e[kt],2,null,null)}function VN(n){let e=n[Ta];if(!e)return ip(n[ge],n);for(;e;){let t=null;if(hi(e))t=e[Ta];else{let r=e[Jt];r&&(t=r)}if(!t){for(;e&&!e[dn]&&e!==n;)hi(e)&&ip(e[ge],e),e=e[St];e===null&&(e=n),hi(e)&&ip(e[ge],e),t=e&&e[dn]}e=t}}function jN(n,e,t,r){let i=Jt+r,o=t.length;r>0&&(t[i-1][dn]=e),r<o-Jt?(e[dn]=t[i],kE(t,Jt+r,e)):(t.push(e),e[dn]=null),e[St]=t;let s=e[Ao];s!==null&&t!==s&&YD(s,e);let a=e[xo];a!==null&&a.insertView(n),vp(e),e[ie]|=128}function YD(n,e){let t=n[il],r=e[St];if(hi(r))n[ie]|=ol.HasTransplantedViews;else{let i=r[St][bn];e[bn]!==i&&(n[ie]|=ol.HasTransplantedViews)}t===null?n[il]=[e]:t.push(e)}function yg(n,e){let t=n[il],r=t.indexOf(e);t.splice(r,1)}function Ap(n,e){if(n.length<=Jt)return;let t=Jt+e,r=n[t];if(r){let i=r[Ao];i!==null&&i!==n&&yg(i,r),e>0&&(n[t-1][dn]=r[dn]);let o=el(n,Jt+e);FN(r[ge],r);let s=o[xo];s!==null&&s.detachView(o[ge]),r[St]=null,r[dn]=null,r[ie]&=-129}return r}function ZD(n,e){if(!(e[ie]&256)){let t=e[kt];t.destroyNode&&Fl(n,e,t,3,null,null),VN(e)}}function ip(n,e){if(e[ie]&256)return;let t=Ce(null);try{e[ie]&=-129,e[ie]|=256,e[Zt]&&xf(e[Zt]),UN(n,e),BN(n,e),e[ge].type===1&&e[kt].destroy();let r=e[Ao];if(r!==null&&Xn(e[St])){r!==e[St]&&yg(r,e);let i=e[xo];i!==null&&i.detachView(n)}bp(e)}finally{Ce(t)}}function BN(n,e){let t=n.cleanup,r=e[QI];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[QI]=null);let i=e[Cr];if(i!==null){e[Cr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function UN(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof ba)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];Dr(4,a,c);try{c.call(a)}finally{Dr(5,a,c)}}else{Dr(4,i,o);try{o.call(i)}finally{Dr(5,i,o)}}}}}function $N(n,e,t){return HN(n,e.parent,t)}function HN(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Jn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Cn.None||o===Cn.Emulated)return null}return An(r,t)}}function fl(n,e,t,r,i){n.insertBefore(e,t,r,i)}function JD(n,e,t){n.appendChild(e,t)}function cE(n,e,t,r,i){r!==null?fl(n,e,t,r,i):JD(n,e,t)}function XD(n,e){return n.parentNode(e)}function qN(n,e){return n.nextSibling(e)}function zN(n,e,t){return WN(n,e,t)}function GN(n,e,t){return n.type&40?An(n,t):null}var WN=GN,uE;function vg(n,e,t,r){let i=$N(n,r,e),o=e[kt],s=r.parent||e[hn],a=zN(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)cE(o,i,t[c],a,!1);else cE(o,i,t,a,!1);uE!==void 0&&uE(o,r,e,t,i)}function va(n,e){if(e!==null){let t=e.type;if(t&3)return An(e,n);if(t&4)return xp(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return va(n,r);{let i=n[e.index];return Xn(i)?xp(-1,i):Kn(i)}}else{if(t&128)return va(n,e.next);if(t&32)return mg(e,n)()||Kn(n[e.index]);{let r=e0(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=gi(n[bn]);return va(i,r)}else return va(n,e.next)}}}return null}function e0(n,e){if(e!==null){let r=n[bn][hn],i=e.projection;return r.projection[i]}return null}function xp(n,e){let t=Jt+n+1;if(t<e.length){let r=e[t],i=r[ge].firstChild;if(i!==null)return va(r,i)}return e[pi]}function KN(n,e,t){n.removeChild(null,e,t)}function _g(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&yi(Kn(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)_g(n,e,t.child,r,i,o,!1),Io(e,n,i,a,o);else if(c&32){let l=mg(t,r),h;for(;h=l();)Io(e,n,i,h,o);Io(e,n,i,a,o)}else c&16?QN(n,e,r,t,i,o):Io(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Fl(n,e,t,r,i,o){_g(t,r,n.firstChild,e,i,o,!1)}function QN(n,e,t,r,i,o){let s=t[bn],c=s[hn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let h=c[l];Io(e,n,i,h,o)}else{let l=c,h=s[St];LD(r)&&(l.flags|=128),_g(n,e,l,h,i,o,!0)}}function YN(n,e,t,r,i){let o=t[pi],s=Kn(t);o!==s&&Io(e,n,r,o,i);for(let a=Jt;a<t.length;a++){let c=t[a];Fl(c[ge],c,n,e,r,o)}}function ZN(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Yn.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Yn.Important),n.setStyle(t,r,i,o))}}function JN(n,e,t){n.setAttribute(e,"style",t)}function t0(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function n0(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&dp(n,e,r),i!==null&&t0(n,e,i),o!==null&&JN(n,e,o)}var Mr={};function oe(n=1){r0(wi(),rt(),Ii()+n,!1)}function r0(n,e,t,r){if(!r)if((e[ie]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Qu(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Yu(e,o,0,t)}mi(t)}function $e(n,e=de.Default){let t=rt();if(t===null)return O(n,e);let r=xn();return MD(r,t,Yt(n),e)}function i0(){let n="invalid";throw new Error(n)}function o0(n,e,t,r,i,o){let s=Ce(null);try{let a=null;i&Tr.SignalBased&&(a=e[r][lI]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Tr.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):XE(e,a,r,o)}finally{Ce(s)}}function XN(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)mi(~i);else{let o=i,s=t[++r],a=t[++r];BR(s,o);let c=e[o];a(2,c)}}}finally{mi(-1)}}function Ll(n,e,t,r,i,o,s,a,c,l,h){let p=e.blueprint.slice();return p[Jn]=i,p[ie]=r|4|128|8|64,(l!==null||n&&n[ie]&2048)&&(p[ie]|=2048),oD(p),p[St]=p[Fo]=n,p[Wn]=t,p[Tn]=s||n&&n[Tn],p[kt]=a||n&&n[kt],p[So]=c||n&&n[So]||null,p[hn]=o,p[Sl]=IN(),p[nl]=h,p[QE]=l,p[bn]=e.type==2?n[bn]:p,p}function Vl(n,e,t,r,i){let o=n.data[e];if(o===null)o=eP(n,e,t,r,i),jR()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=OR();o.injectorIndex=s===null?-1:s.injectorIndex}return Oa(o,!0),o}function eP(n,e,t,r,i){let o=lD(),s=dD(),a=s?o:o&&o.parent,c=n.data[e]=oP(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function s0(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function a0(n,e,t,r,i){let o=Ii(),s=r&2;try{mi(-1),s&&e.length>Sr&&r0(n,e,Sr,!1),Dr(s?2:0,i),t(r,i)}finally{mi(o),Dr(s?3:1,i)}}function c0(n,e,t){if(ZE(e)){let r=Ce(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{Ce(r)}}}function u0(n,e,t){uD()&&(hP(n,e,t,An(t,e)),(t.flags&64)===64&&p0(n,e,t))}function l0(n,e,t=An){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function d0(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=wg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function wg(n,e,t,r,i,o,s,a,c,l,h){let p=Sr+r,m=p+i,v=tP(p,m),b=typeof l=="function"?l():l;return v[ge]={type:n,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:b,incompleteFirstPass:!1,ssrId:h}}function tP(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Mr);return t}function nP(n,e,t,r){let o=r.get(AN,HD)||t===Cn.ShadowDom,s=n.selectRootElement(e,o);return rP(s),s}function rP(n){iP(n)}var iP=()=>null;function oP(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return NR()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function lE(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=Tr.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?dE(r,t,l,a,c):dE(r,t,l,a)}return r}function dE(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function sP(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],c=null,l=null;for(let h=r;h<i;h++){let p=o[h],m=t?t.get(p):null,v=m?m.inputs:null,b=m?m.outputs:null;c=lE(0,p.inputs,h,c,v),l=lE(1,p.outputs,h,l,b);let R=c!==null&&s!==null&&!Jp(e)?IP(c,h,s):null;a.push(R)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function aP(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function cP(n,e,t,r,i,o,s,a){let c=An(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(Ig(n,t,h,r,i),Al(e)&&uP(t,e.index)):e.type&3?(r=aP(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function uP(n,e){let t=Lo(e,n);t[ie]&16||(t[ie]|=64)}function h0(n,e,t,r){if(uD()){let i=r===null?null:{"":-1},o=pP(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&f0(n,e,t,s,i,a),i&&gP(t,r,i)}t.mergedAttrs=Zp(t.mergedAttrs,t.attrs)}function f0(n,e,t,r,i,o){for(let l=0;l<r.length;l++)nN(bD(t,e),n,r[l].type);yP(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,c=s0(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=Zp(t.mergedAttrs,h.hostAttrs),vP(n,t,e,c,h),mP(c,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}sP(n,t,o)}function lP(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;dP(s)!=a&&s.push(a),s.push(t,r,o)}}function dP(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function hP(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Al(t)&&_P(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||bD(t,e),yi(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let c=n.data[a],l=Sa(e,n,a,t);if(yi(l,e),s!==null&&wP(e,a-i,l,c,t,s),ka(c)){let h=Lo(t.index,e);h[Wn]=Sa(e,n,a,t)}}}function p0(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=UR();try{mi(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];_p(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&fP(c,l)}}finally{mi(-1),_p(s)}}function fP(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function pP(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(JM(e,s.selectors,!1))if(r||(r=[]),ka(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;Mp(n,e,c)}else r.unshift(s),Mp(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Mp(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function gP(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new ee(-301,!1);r.push(e[i],o)}}}function mP(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;ka(e)&&(t[""]=n)}}function yP(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function vP(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=To(i.type,!0)),s=new ba(o,ka(i),$e);n.blueprint[r]=s,t[r]=s,lP(n,e,r,s0(n,t,i.hostVars,Mr),i)}function _P(n,e,t){let r=An(e,n),i=d0(t),o=n[Tn].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=jl(n,Ll(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function wP(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],h=s[a++],p=s[a++];o0(r,t,c,l,h,p)}}function IP(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function g0(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function m0(n,e){let t=n.contentQueries;if(t!==null){let r=Ce(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];gD(o),a.contentQueries(2,e[s],s)}}}finally{Ce(r)}}}function jl(n,e){return n[Ta]?n[YI][dn]=e:n[Ta]=e,n[YI]=e,e}function Rp(n,e,t){gD(0);let r=Ce(null);try{e(n,t)}finally{Ce(r)}}function EP(n,e){let t=n[So],r=t?t.get(Qn,null):null;r&&r.handleError(e)}function Ig(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],c=t[o++],l=e[s],h=n.data[s];o0(h,l,r,a,c,i)}}function y0(n,e,t){let r=rD(e,n);ON(n[kt],r,t)}function DP(n,e){let t=Lo(e,n),r=t[ge];CP(r,t);let i=t[Jn];i!==null&&t[nl]===null&&(t[nl]=pg(i,t[So])),Eg(r,t,t[Wn])}function CP(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Eg(n,e,t){ng(e);try{let r=n.viewQuery;r!==null&&Rp(1,r,t);let i=n.template;i!==null&&a0(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[xo]?.finishViewCreation(n),n.staticContentQueries&&m0(n,e),n.staticViewQueries&&Rp(2,n.viewQuery,t);let o=n.components;o!==null&&TP(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ie]&=-5,rg()}}function TP(n,e){for(let t=0;t<e.length;t++)DP(n,e[t])}function bP(n,e,t,r){let i=Ce(null);try{let o=e.tView,a=n[ie]&4096?4096:16,c=Ll(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[Ao]=l;let h=n[xo];return h!==null&&(c[xo]=h.createEmbeddedView(o)),Eg(o,c,t),c}finally{Ce(i)}}function hE(n,e){return!e||e.firstChild===null||LD(n)}function SP(n,e,t,r=!0){let i=e[ge];if(jN(i,e,n,t),r){let s=xp(t,n),a=e[kt],c=XD(a,n[pi]);c!==null&&LN(i,n[hn],a,e,c,s)}let o=e[nl];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function pl(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Kn(o)),Xn(o)&&AP(o,r);let s=t.type;if(s&8)pl(n,e,t.child,r);else if(s&32){let a=mg(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=e0(e,t);if(Array.isArray(a))r.push(...a);else{let c=gi(e[bn]);pl(c[ge],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function AP(n,e){for(let t=Jt;t<n.length;t++){let r=n[t],i=r[ge].firstChild;i!==null&&pl(r[ge],r,i,e)}n[pi]!==n[Jn]&&e.push(n[pi])}var v0=[];function xP(n){return n[Zt]??MP(n)}function MP(n){let e=v0.pop()??Object.create(NP);return e.lView=n,e}function RP(n){n.lView[Zt]!==n&&(n.lView=null,v0.push(n))}var NP=xe(V({},bf),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Rl(n.lView)},consumerOnSignalRead(){this.lView[Zt]=this}});function PP(n){let e=n[Zt]??Object.create(kP);return e.lView=n,e}var kP=xe(V({},bf),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=gi(n.lView);for(;e&&!_0(e[ge]);)e=gi(e);e&&sD(e)},consumerOnSignalRead(){this.lView[Zt]=this}});function _0(n){return n.type!==2}var OP=100;function w0(n,e=!0,t=0){let r=n[Tn],i=r.rendererFactory,o=!1;o||i.begin?.();try{FP(n,t)}catch(s){throw e&&EP(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function FP(n,e){let t=hD();try{JI(!0),Np(n,e);let r=0;for(;Ml(n);){if(r===OP)throw new ee(103,!1);r++,Np(n,1)}}finally{JI(t)}}function LP(n,e,t,r){let i=e[ie];if((i&256)===256)return;let o=!1,s=!1;!o&&e[Tn].inlineEffectRunner?.flush(),ng(e);let a=!0,c=null,l=null;o||(_0(n)?(l=xP(e),c=Sf(l)):dI()===null?(a=!1,l=PP(e),c=Sf(l)):e[Zt]&&(xf(e[Zt]),e[Zt]=null));try{oD(e),VR(n.bindingStartIndex),t!==null&&a0(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let v=n.preOrderCheckHooks;v!==null&&Qu(e,v,null)}else{let v=n.preOrderHooks;v!==null&&Yu(e,v,0,null),ep(e,0)}if(s||VP(e),I0(e,0),n.contentQueries!==null&&m0(n,e),!o)if(h){let v=n.contentCheckHooks;v!==null&&Qu(e,v)}else{let v=n.contentHooks;v!==null&&Yu(e,v,1),ep(e,1)}XN(n,e);let p=n.components;p!==null&&D0(e,p,0);let m=n.viewQuery;if(m!==null&&Rp(2,m,r),!o)if(h){let v=n.viewCheckHooks;v!==null&&Qu(e,v)}else{let v=n.viewHooks;v!==null&&Yu(e,v,2),ep(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Xf]){for(let v of e[Xf])v();e[Xf]=null}o||(e[ie]&=-73)}catch(h){throw o||Rl(e),h}finally{l!==null&&(hI(l,c),a&&RP(l)),rg()}}function I0(n,e){for(let t=jD(n);t!==null;t=BD(t))for(let r=Jt;r<t.length;r++){let i=t[r];E0(i,e)}}function VP(n){for(let e=jD(n);e!==null;e=BD(e)){if(!(e[ie]&ol.HasTransplantedViews))continue;let t=e[il];for(let r=0;r<t.length;r++){let i=t[r];sD(i)}}}function jP(n,e,t){let r=Lo(e,n);E0(r,t)}function E0(n,e){tg(n)&&Np(n,e)}function Np(n,e){let r=n[ge],i=n[ie],o=n[Zt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Af(o)),s||=!1,o&&(o.dirty=!1),n[ie]&=-9217,s)LP(r,n,r.template,n[Wn]);else if(i&8192){I0(n,1);let a=r.components;a!==null&&D0(n,a,1)}}function D0(n,e,t){for(let r=0;r<e.length;r++)jP(n,e[r],t)}function C0(n,e){let t=hD()?64:1088;for(n[Tn].changeDetectionScheduler?.notify(e);n;){n[ie]|=t;let r=gi(n);if(mp(n)&&!r)return n;n=r}return null}var vi=class{get rootNodes(){let e=this._lView,t=e[ge];return pl(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Wn]}set context(e){this._lView[Wn]=e}get destroyed(){return(this._lView[ie]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[St];if(Xn(e)){let t=e[rl],r=t?t.indexOf(this):-1;r>-1&&(Ap(e,r),el(t,r))}this._attachedToViewContainer=!1}ZD(this._lView[ge],this._lView)}onDestroy(e){aD(this._lView,e)}markForCheck(){C0(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ie]&=-129}reattach(){vp(this._lView),this._lView[ie]|=128}detectChanges(){this._lView[ie]|=1024,w0(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=mp(this._lView),t=this._lView[Ao];t!==null&&!e&&yg(t,this._lView),QD(this._lView[ge],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ee(902,!1);this._appRef=e;let t=mp(this._lView),r=this._lView[Ao];r!==null&&!t&&YD(r,this._lView),vp(this._lView)}},Bl=(()=>{class n{static{this.__NG_ELEMENT_ID__=$P}}return n})(),BP=Bl,UP=class extends BP{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=bP(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new vi(i)}};function $P(){return HP(xn(),rt())}function HP(n,e){return n.type&4?new UP(e,n,Nl(n,e)):null}var pz=new RegExp(`^(\\d+)*(${bN}|${TN})*(.*)`);var qP=()=>null;function fE(n,e){return qP(n,e)}var Mo=class{},Dg=new W("",{providedIn:"root",factory:()=>!1});var T0=new W(""),b0=new W(""),Pp=class{},gl=class{};function zP(n){let e=Error(`No component factory found for ${bt(n)}.`);return e[GP]=n,e}var GP="ngComponent";var kp=class{resolveComponentFactory(e){throw zP(e)}},Ro=class{static{this.NULL=new kp}},No=class{};var WP=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>null})}}return n})();function Op(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=jI(i,a);else if(o==2){let c=a,l=e[++s];r=jI(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var ml=class extends Ro{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=br(e);return new Po(t,this.ngModule)}};function pE(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Tr.None;e?t.push({propName:s,templateName:r,isSignal:(a&Tr.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function KP(n){let e=n.toLowerCase();return e==="svg"?CR:e==="math"?TR:null}var Po=class extends gl{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=pE(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return pE(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=nR(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=Ce(null);try{i=i||this.ngModule;let s=i instanceof $t?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new wp(e,s):e,c=a.get(No,null);if(c===null)throw new ee(407,!1);let l=a.get(WP,null),h=a.get(Mo,null),p={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=c.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",b=r?nP(m,r,this.componentDef.encapsulation,a):KD(m,v,KP(v)),R=512;this.componentDef.signals?R|=4096:this.componentDef.onPush||(R|=16);let N=null;b!==null&&(N=pg(b,a,!0));let B=wg(0,null,null,1,0,null,null,null,null,null,null),q=Ll(null,B,null,R,null,null,p,m,a,null,N);ng(q);let F,Z,te=null;try{let J=this.componentDef,I,y=null;J.findHostDirectiveDefs?(I=[],y=new Map,J.findHostDirectiveDefs(J,I,y),I.push(J)):I=[J];let w=QP(q,b);te=YP(w,b,J,I,q,p,m),Z=iD(B,Sr),b&&XP(m,J,b,r),t!==void 0&&e1(Z,this.ngContentSelectors,t),F=JP(te,J,I,y,q,[t1]),Eg(B,q,null)}catch(J){throw te!==null&&bp(te),bp(q),J}finally{rg()}return new Fp(this.componentType,F,Nl(Z,q),q,Z)}finally{Ce(o)}}},Fp=class extends Pp{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new vi(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;Ig(o[ge],o,i,e,t),this.previousInputValues.set(e,t);let s=Lo(this._tNode.index,o);C0(s,1)}}get injector(){return new fi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function QP(n,e){let t=n[ge],r=Sr;return n[r]=e,Vl(t,r,2,"#host",null)}function YP(n,e,t,r,i,o,s){let a=i[ge];ZP(r,n,e,s);let c=null;e!==null&&(c=pg(e,i[So]));let l=o.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=Ll(i,d0(t),null,h,i[n.index],n,o,l,null,null,c);return a.firstCreatePass&&Mp(a,n,r.length-1),jl(i,p),i[n.index]=p}function ZP(n,e,t,r){for(let i of n)e.mergedAttrs=Zp(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Op(e,e.mergedAttrs,!0),t!==null&&n0(r,t,e))}function JP(n,e,t,r,i,o){let s=xn(),a=i[ge],c=An(s,i);f0(a,i,s,t,null,r);for(let h=0;h<t.length;h++){let p=s.directiveStart+h,m=Sa(i,a,p,s);yi(m,i)}p0(a,i,s),c&&yi(c,i);let l=Sa(i,a,s.directiveStart+s.componentOffset,s);if(n[Wn]=i[Wn]=l,o!==null)for(let h of o)h(l,e);return c0(a,s,i),l}function XP(n,e,t,r){if(r)dp(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:o}=rR(e.selectors[0]);i&&dp(n,t,i),o&&o.length>0&&t0(n,t,o.join(" "))}}function e1(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function t1(){let n=xn();sg(rt()[ge],n)}var jo=(()=>{class n{static{this.__NG_ELEMENT_ID__=n1}}return n})();function n1(){let n=xn();return i1(n,rt())}var r1=jo,S0=class extends r1{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Nl(this._hostTNode,this._hostLView)}get injector(){return new fi(this._hostTNode,this._hostLView)}get parentInjector(){let e=ag(this._hostTNode,this._hostLView);if(DD(e)){let t=cl(e,this._hostLView),r=al(e),i=t[ge].data[r+8];return new fi(i,t)}else return new fi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=gE(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Jt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=fE(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,hE(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!wR(e),a;if(s)a=t;else{let b=t||{};a=b.index,r=b.injector,i=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef}let c=s?e:new Po(br(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let R=(s?l:this.parentInjector).get($t,null);R&&(o=R)}let h=br(c.componentType??{}),p=fE(this._lContainer,h?.id??null),m=p?.firstChild??null,v=c.create(l,i,m,o);return this.insertImpl(v.hostView,a,hE(this._hostTNode,p)),v}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(bR(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[St],l=new S0(c,c[hn],c[St]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return SP(s,i,o,r),e.attachToViewContainerRef(),kE(op(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=gE(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Ap(this._lContainer,t);r&&(el(op(this._lContainer),t),ZD(r[ge],r))}detach(e){let t=this._adjustIndex(e,-1),r=Ap(this._lContainer,t);return r&&el(op(this._lContainer),t)!=null?new vi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function gE(n){return n[rl]}function op(n){return n[rl]||(n[rl]=[])}function i1(n,e){let t,r=e[n.index];return Xn(r)?t=r:(t=g0(r,e,null,n),e[n.index]=t,jl(e,t)),s1(t,e,n,r),new S0(t,n,e)}function o1(n,e){let t=n[kt],r=t.createComment(""),i=An(e,n),o=XD(t,i);return fl(t,o,r,qN(t,i),!1),r}var s1=u1,a1=()=>!1;function c1(n,e,t){return a1(n,e,t)}function u1(n,e,t,r){if(n[pi])return;let i;t.type&8?i=Kn(r):i=o1(e,t),n[pi]=i}var mE=new Set;function Cg(n){mE.has(n)||(mE.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function l1(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(p1))}return o}return yl.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,h=i.styleUrls;i.styleUrls.forEach((p,m)=>{a.push(""),s.push(r(p).then(v=>{a[l+m]=v,h.splice(h.indexOf(p),1),h.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let c=Promise.all(s).then(()=>g1(o));e.push(c)}),h1(),Promise.all(e).then(()=>{})}var yl=new Map,d1=new Set;function h1(){let n=yl;return yl=new Map,n}function f1(){return yl.size===0}function p1(n){return typeof n=="string"?n:n.text()}function g1(n){d1.delete(n)}var Ar=class{},Aa=class{};var vl=class extends Ar{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ml(this);let o=$E(e);this._bootstrapComponents=WD(o.bootstrap),this._r3Injector=PD(e,t,[{provide:Ar,useValue:this},{provide:Ro,useValue:this.componentFactoryResolver},...r],bt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},_l=class extends Aa{constructor(e){super(),this.moduleType=e}create(e){return new vl(this.moduleType,e,[])}};function m1(n,e,t){return new vl(n,e,t,!1)}var Lp=class extends Ar{constructor(e){super(),this.componentFactoryResolver=new ml(this),this.instance=null;let t=new Ca([...e.providers,{provide:Ar,useValue:this},{provide:Ro,useValue:this.componentFactoryResolver}],e.parent||eg(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ul(n,e,t=null){return new Lp({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function A0(n){return v1(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function y1(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function v1(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function xa(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function _1(n,e,t,r){let i=xa(n,e,t);return xa(n,e+1,r)||i}function w1(n){return(n.flags&32)===32}function I1(n,e,t,r,i,o,s,a,c){let l=e.consts,h=Vl(e,n,4,s||null,a||null);h0(e,t,h,sl(l,c)),sg(e,h);let p=h.tView=wg(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function E1(n,e,t,r,i,o,s,a,c,l){let h=t+Sr,p=e.firstCreatePass?I1(h,e,n,r,i,o,s,a,c):e.data[h];Oa(p,!1);let m=D1(e,n,p,t);ig()&&vg(e,n,m,p),yi(m,n);let v=g0(m,n,m,p);return n[h]=v,jl(n,v),c1(v,p,n),JE(p)&&u0(e,n,p),c!=null&&l0(n,p,l),p}function dt(n,e,t,r,i,o,s,a){let c=rt(),l=wi(),h=sl(l.consts,o);return E1(c,l,n,e,t,r,i,h,s,a),dt}var D1=C1;function C1(n,e,t,r){return og(!0),e[kt].createComment("")}var Eo=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Eo||{}),x0=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}}return n})(),Vp=class n{constructor(){this.ngZone=j(ye),this.scheduler=j(Mo),this.errorHandler=j(Qn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Eo.EarlyRead,Eo.Write,Eo.MixedReadWrite,Eo.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}},jp=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function Tg(n,e){!e?.injector&&vR(Tg);let t=e?.injector??j(Xt);return NN(t)?(Cg("NgAfterNextRender"),b1(n,t,e,!0)):S1}function T1(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function b1(n,e,t,r){let i=e.get(x0);i.impl??=e.get(Vp);let o=t?.phase??Eo.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(ug):null,a=new jp(i.impl,T1(n,o),r,s);return i.impl.register(a),a}var S1={destroy(){}};function A1(n,e,t,r){return xa(n,fD(),t)?e+Ia(t)+r:Mr}function x1(n,e,t,r,i,o){let s=LR(),a=_1(n,s,t,i);return pD(2),a?e+Ia(t)+r+Ia(i)+o:Mr}function zu(n,e){return n<<17|e<<2}function _i(n){return n>>17&32767}function M1(n){return(n&2)==2}function R1(n,e){return n&131071|e<<17}function Bp(n){return n|2}function ko(n){return(n&131068)>>2}function sp(n,e){return n&-131069|e<<2}function N1(n){return(n&1)===1}function Up(n){return n|1}function P1(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=_i(s),c=ko(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||Na(p,h)>0)&&(l=!0)}else h=t;if(i)if(c!==0){let m=_i(n[a+1]);n[r+1]=zu(m,a),m!==0&&(n[m+1]=sp(n[m+1],r)),n[a+1]=R1(n[a+1],r)}else n[r+1]=zu(a,0),a!==0&&(n[a+1]=sp(n[a+1],r)),a=r;else n[r+1]=zu(c,0),a===0?a=r:n[c+1]=sp(n[c+1],r),c=r;l&&(n[r+1]=Bp(n[r+1])),yE(n,h,r,!0),yE(n,h,r,!1),k1(e,h,n,r,o),s=zu(a,c),o?e.classBindings=s:e.styleBindings=s}function k1(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Na(o,e)>=0&&(t[r+1]=Up(t[r+1]))}function yE(n,e,t,r){let i=n[t+1],o=e===null,s=r?_i(i):ko(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];O1(c,e)&&(a=!0,n[s+1]=r?Up(l):Bp(l)),s=r?_i(l):ko(l)}a&&(n[t+1]=r?Bp(i):Up(i))}function O1(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Na(n,e)>=0:!1}function Ye(n,e,t){let r=rt(),i=fD();if(xa(r,i,e)){let o=wi(),s=zR();cP(o,s,r,n,e,r[kt],t,!1)}return Ye}function vE(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";Ig(n,t,o[s],s,r)}function $l(n,e,t){return F1(n,e,t,!1),$l}function F1(n,e,t,r){let i=rt(),o=wi(),s=pD(2);if(o.firstUpdatePass&&V1(o,n,s,r),e!==Mr&&xa(i,s,e)){let a=o.data[Ii()];H1(o,a,i,i[kt],n,i[s+1]=q1(e,t),r,s)}}function L1(n,e){return e>=n.expandoStartIndex}function V1(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Ii()],s=L1(n,t);z1(o,r)&&e===null&&!s&&(e=!1),e=j1(i,o,e,r),P1(i,o,e,t,s,r)}}function j1(n,e,t,r){let i=$R(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=ap(null,n,e,t,r),t=Ma(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=ap(i,n,e,t,r),o===null){let c=B1(n,e,r);c!==void 0&&Array.isArray(c)&&(c=ap(null,n,e,c[1],r),c=Ma(c,e.attrs,r),U1(n,e,r,c))}else o=$1(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function B1(n,e,t){let r=t?e.classBindings:e.styleBindings;if(ko(r)!==0)return n[_i(r)]}function U1(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[_i(i)]=r}function $1(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Ma(r,s,t)}return Ma(r,e.attrs,t)}function ap(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Ma(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Ma(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),HM(n,s,t?!0:e[++o]))}return n===void 0?null:n}function H1(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],h=N1(l)?_E(c,e,t,i,ko(l),s):void 0;if(!wl(h)){wl(o)||M1(l)&&(o=_E(c,null,t,i,a,s));let p=rD(Ii(),t);ZN(r,s,p,i,o)}}function _E(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),h=l?c[1]:c,p=h===null,m=t[i+1];m===Mr&&(m=p?ln:void 0);let v=p?Zf(m,r):h===r?m:void 0;if(l&&!wl(v)&&(v=Zf(c,r)),wl(v)&&(a=v,s))return a;let b=n[i+1];i=s?_i(b):ko(b)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=Zf(c,r))}return a}function wl(n){return n!==void 0}function q1(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=bt(Ol(n)))),n}function z1(n,e){return(n.flags&(e?8:16))!==0}function G1(n,e,t,r,i,o){let s=e.consts,a=sl(s,i),c=Vl(e,n,2,r,a);return h0(e,t,c,sl(s,o)),c.attrs!==null&&Op(c,c.attrs,!1),c.mergedAttrs!==null&&Op(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function ne(n,e,t,r){let i=rt(),o=wi(),s=Sr+n,a=i[kt],c=o.firstCreatePass?G1(s,o,i,e,t,r):o.data[s],l=W1(o,i,c,a,e,n);i[s]=l;let h=JE(c);return Oa(c,!0),n0(a,l,c),!w1(c)&&ig()&&vg(o,i,l,c),xR()===0&&yi(l,i),MR(),h&&(u0(o,i,c),c0(o,c,i)),r!==null&&l0(i,c),ne}function Q(){let n=xn();dD()?FR():(n=n.parent,Oa(n,!1));let e=n;PR(e)&&kR(),RR();let t=wi();return t.firstCreatePass&&(sg(t,n),ZE(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&YR(e)&&vE(t,e,rt(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&ZR(e)&&vE(t,e,rt(),e.stylesWithoutHost,!1),Q}function fn(n,e,t,r){return ne(n,e,t,r),Q(),fn}var W1=(n,e,t,r,i,o)=>(og(!0),KD(r,i,GR()));var Il="en-US";var K1=Il;function Q1(n){typeof n=="string"&&(K1=n.toLowerCase().replace(/_/g,"-"))}function Fa(n=1){return qR(n)}function se(n,e=""){let t=rt(),r=wi(),i=n+Sr,o=r.firstCreatePass?Vl(r,i,1,e,null):r.data[i],s=Y1(r,t,o,e,n);t[i]=s,ig()&&vg(r,t,s,o),Oa(o,!1)}var Y1=(n,e,t,r,i)=>(og(!0),kN(e[kt],r));function Ze(n){return vt("",n,""),Ze}function vt(n,e,t){let r=rt(),i=A1(r,n,e,t);return i!==Mr&&y0(r,Ii(),i),vt}function La(n,e,t,r,i){let o=rt(),s=x1(o,n,e,t,r,i);return s!==Mr&&y0(o,Ii(),s),La}var Z1=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=zE(!1,t.type),i=r.length>0?Ul([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=H({token:n,providedIn:"environment",factory:()=>new n(O($t))})}}return n})();function M0(n){Cg("NgStandalone"),n.getStandaloneInjector=e=>e.get(Z1).getOrCreateStandaloneInjector(n)}var Gu=null;function J1(n){Gu!==null&&(n.defaultEncapsulation!==Gu.defaultEncapsulation||n.preserveWhitespaces!==Gu.preserveWhitespaces)||(Gu=n)}var xr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},R0=new xr("18.2.13");var Hl=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var bg=new W(""),Va=new W(""),ql=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Sg||(X1(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ye.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(O(ye),O(zl),O(Va))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),zl=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return Sg?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function X1(n){Sg=n}var Sg;function ja(n){return!!n&&typeof n.then=="function"}function N0(n){return!!n&&typeof n.subscribe=="function"}var Gl=new W(""),P0=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=j(Gl,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(ja(o))t.push(o);else if(N0(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ag=new W("");function ek(){fI(()=>{throw new ee(600,!1)})}function tk(n){return n.isBoundToModule}var nk=10;function rk(n,e,t){try{let r=t();return ja(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function k0(n,e){return Array.isArray(e)?e.reduce(k0,n):V(V({},n),e)}var Rr=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=j(vN),this.afterRenderManager=j(x0),this.zonelessEnabled=j(Dg),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new qe,this.afterTick=new qe,this.componentTypes=[],this.components=[],this.isStable=j(Vo).hasPendingTasks.pipe(G(t=>!t)),this._injector=j($t)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof gl;if(!this._injector.get(P0).done){let m=!i&&UE(t),v=!1;throw new ee(405,v)}let s;i?s=t:s=this._injector.get(Ro).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=tk(s)?void 0:this._injector.get(Ar),c=r||s.selector,l=s.create(Xt.NULL,[],c,a),h=l.location.nativeElement,p=l.injector.get(bg,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),Zu(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new ee(101,!1);let t=Ce(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Ce(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(No,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<nk;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)ik(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Ml(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Zu(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(Ag,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Zu(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ee(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Zu(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function ik(n,e,t,r){if(!t&&!Ml(n))return;w0(n,e,t&&!r?0:1)}var $p=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Wl=(()=>{class n{compileModuleSync(t){return new _l(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=$E(t),o=WD(i.declarations).reduce((s,a)=>{let c=br(a);return c&&s.push(new Po(c)),s},[]);return new $p(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ok=new W("");function sk(n,e,t){let r=new _l(t);return Promise.resolve(r)}function wE(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var ak=(()=>{class n{constructor(){this.zone=j(ye),this.changeDetectionScheduler=j(Mo),this.applicationRef=j(Rr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ck({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new ye(xe(V({},O0()),{scheduleInRootZone:t})),[{provide:ye,useFactory:n},{provide:bo,multi:!0,useFactory:()=>{let r=j(ak,{optional:!0});return()=>r.initialize()}},{provide:bo,multi:!0,useFactory:()=>{let r=j(uk);return()=>{r.initialize()}}},e===!0?{provide:T0,useValue:!0}:[],{provide:b0,useValue:t??kD}]}function O0(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var uk=(()=>{class n{constructor(){this.subscription=new Be,this.initialized=!1,this.zone=j(ye),this.pendingTasks=j(Vo)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ye.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ye.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var lk=(()=>{class n{constructor(){this.appRef=j(Rr),this.taskService=j(Vo),this.ngZone=j(ye),this.zonelessEnabled=j(Dg),this.disableScheduling=j(T0,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Be,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(ll):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(j(b0,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof dl||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?iE:OD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(ll+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,iE(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function dk(){return typeof $localize<"u"&&$localize.locale||Il}var xg=new W("",{providedIn:"root",factory:()=>j(xg,de.Optional|de.SkipSelf)||dk()});var El=new W("");function Wu(n){return!n.moduleRef}function hk(n){let e=Wu(n)?n.r3Injector:n.moduleRef.injector,t=e.get(ye);return t.run(()=>{Wu(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Qn,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Wu(n)){let o=()=>e.destroy(),s=n.platformInjector.get(El);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(El);s.add(o),n.moduleRef.onDestroy(()=>{Zu(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return rk(r,t,()=>{let o=e.get(P0);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(xg,Il);if(Q1(s||Il),Wu(n)){let a=e.get(Rr);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return fk(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function fk(n,e){let t=n.injector.get(Rr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new ee(-403,!1);e.push(n)}var F0=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>yN(r?.ngZone,xe(V({},O0({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[ck({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:Mo,useExisting:lk}],c=m1(t.moduleType,this.injector,a);return hk({moduleRef:c,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=k0({},r);return sk(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ee(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(El,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(O(Xt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),wa=null,L0=new W("");function pk(n){if(wa&&!wa.get(L0,!1))throw new ee(400,!1);ek(),wa=n;let e=n.get(F0);return yk(n),e}function Mg(n,e,t=[]){let r=`Platform: ${e}`,i=new W(r);return(o=[])=>{let s=V0();if(!s||s.injector.get(L0,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):pk(gk(a,r))}return mk(i)}}function gk(n=[],e){return Xt.create({name:e,providers:[{provide:bl,useValue:"platform"},{provide:El,useValue:new Set([()=>wa=null])},...n]})}function mk(n){let e=V0();if(!e)throw new ee(401,!1);return e}function V0(){return wa?.get(F0)??null}function yk(n){n.get(hg,null)?.forEach(t=>t())}function Rg(){return!1}var Ba=(()=>{class n{static{this.__NG_ELEMENT_ID__=vk}}return n})();function vk(n){return _k(xn(),rt(),(n&16)===16)}function _k(n,e,t){if(Al(n)&&!t){let r=Lo(n.index,e);return new vi(r,r)}else if(n.type&175){let r=e[bn];return new vi(r,e)}return null}var Hp=class{constructor(){}supports(e){return A0(e)}create(e){return new qp(e)}},wk=(n,e)=>e,qp=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||wk}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<IE(r,i,o)?t:r,a=IE(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=c-i;if(l!=h){for(let m=0;m<l;m++){let v=m<o.length?o[m]:o[m]=0,b=v+m;h<=b&&b<l&&(o[m]=v+1)}let p=s.previousIndex;o[p]=h-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!A0(e))throw new ee(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,y1(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new zp(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Dl),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Dl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},zp=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Gp=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Dl=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Gp,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function IE(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function EE(){return new Ng([new Hp])}var Ng=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:EE})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||EE()),deps:[[n,new Qp,new Oo]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new ee(901,!1)}}return n})();var j0=Mg(null,"core",[]),B0=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(O(Rr))}}static{this.\u0275mod=xt({type:n})}static{this.\u0275inj=At({})}}return n})();function U0(n){let e=br(n);if(!e)return null;let t=new Po(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var W0=null;function Ei(){return W0}function K0(n){W0??=n}var Kl=class{};var Ft=new W(""),Lg=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(Ck),providedIn:"platform"})}}return n})(),Q0=new W(""),Ck=(()=>{class n extends Lg{constructor(){super(),this._doc=j(Ft),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ei().getBaseHref(this._doc)}onPopState(t){let r=Ei().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Ei().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function Vg(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function $0(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function er(n){return n&&n[0]!=="?"?"?"+n:n}var Di=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(jg),providedIn:"root"})}}return n})(),Y0=new W(""),jg=(()=>{class n extends Di{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??j(Ft).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Vg(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+er(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+er(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+er(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(O(Lg),O(Y0,8))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Z0=(()=>{class n extends Di{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Vg(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+er(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+er(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(O(Lg),O(Y0,8))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Bo=(()=>{class n{constructor(t){this._subject=new Tt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=Sk($0(H0(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+er(r))}normalize(t){return n.stripTrailingSlash(bk(this._basePath,H0(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+er(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+er(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=er}static{this.joinWithSlash=Vg}static{this.stripTrailingSlash=$0}static{this.\u0275fac=function(r){return new(r||n)(O(Di))}}static{this.\u0275prov=H({token:n,factory:()=>Tk(),providedIn:"root"})}}return n})();function Tk(){return new Bo(O(Di))}function bk(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function H0(n){return n.replace(/\/index.html$/,"")}function Sk(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function J0(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Pg=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},en=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Pg(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),q0(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);q0(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)($e(jo),$e(Bl),$e(Ng))}}static{this.\u0275dir=Pa({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function q0(n,e){n.context.$implicit=e.item}var Uo=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new kg,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){z0("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){z0("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)($e(jo),$e(Bl))}}static{this.\u0275dir=Pa({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),kg=class{constructor(){this.$implicit=null,this.ngIf=null}};function z0(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${bt(e)}'.`)}var X0=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=xt({type:n})}static{this.\u0275inj=At({})}}return n})(),Bg="browser",Ak="server";function xk(n){return n===Bg}function Ci(n){return n===Ak}var eC=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>xk(j(Ot))?new Og(j(Ft),window):new Fg})}}return n})(),Og=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=Mk(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function Mk(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Fg=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Ql=class{};var Hg=class extends Kl{constructor(){super(...arguments),this.supportsDOMEvents=!0}},qg=class n extends Hg{static makeCurrent(){K0(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Nk();return t==null?null:Pk(t)}resetBaseElement(){Ua=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return J0(document.cookie,e)}},Ua=null;function Nk(){return Ua=Ua||document.querySelector("base"),Ua?Ua.getAttribute("href"):null}function Pk(n){return new URL(n,document.baseURI).pathname}var zg=class{addToWindow(e){Zn.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new ee(5103,!1);return o},Zn.getAllAngularTestabilities=()=>e.getAllTestabilities(),Zn.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=Zn.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};Zn.frameworkStabilizers||(Zn.frameworkStabilizers=[]),Zn.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?Ei().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},kk=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Gg=new W(""),iC=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new ee(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(O(Gg),O(ye))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Yl=class{constructor(e){this._doc=e}},Ug="ng-app-id",oC=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ci(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Ug}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(Ug),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Ug,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(O(Ft),O(kl),O(fg,8),O(Ot))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),$g={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Kg=/%COMP%/g,sC="%COMP%",Ok=`_nghost-${sC}`,Fk=`_ngcontent-${sC}`,Lk=!0,Vk=new W("",{providedIn:"root",factory:()=>Lk});function jk(n){return Fk.replace(Kg,n)}function Bk(n){return Ok.replace(Kg,n)}function aC(n,e){return e.map(t=>t.replace(Kg,n))}var tC=(()=>{class n{constructor(t,r,i,o,s,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Ci(a),this.defaultRenderer=new $a(t,s,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Cn.ShadowDom&&(r=xe(V({},r),{encapsulation:Cn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Zl?i.applyToHost(t):i instanceof Ha&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Cn.Emulated:o=new Zl(c,l,r,this.appId,h,s,a,p);break;case Cn.ShadowDom:return new Wg(c,l,t,r,s,a,this.nonce,p);default:o=new Ha(c,l,r,h,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(O(iC),O(oC),O(kl),O(Vk),O(Ft),O(Ot),O(ye),O(fg))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),$a=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS($g[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(nC(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(nC(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ee(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=$g[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=$g[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Yn.DashCase|Yn.Important)?e.style.setProperty(t,r,i&Yn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Yn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Ei().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function nC(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Wg=class extends $a{constructor(e,t,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=aC(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ha=class extends $a{constructor(e,t,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?aC(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Zl=class extends Ha{constructor(e,t,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,t,r,o,s,a,c,l),this.contentAttr=jk(l),this.hostAttr=Bk(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},Uk=(()=>{class n extends Yl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(O(Ft))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),rC=["alt","control","meta","shift"],$k={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Hk={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},qk=(()=>{class n extends Yl{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ei().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),rC.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=$k[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),rC.forEach(s=>{if(s!==i){let a=Hk[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(O(Ft))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();function zk(){qg.makeCurrent()}function Gk(){return new Qn}function Wk(){return $D(document),document}var Kk=[{provide:Ot,useValue:Bg},{provide:hg,useValue:zk,multi:!0},{provide:Ft,useFactory:Wk,deps:[]}],cC=Mg(j0,"browser",Kk),Qk=new W(""),Yk=[{provide:Va,useClass:zg,deps:[]},{provide:bg,useClass:ql,deps:[ye,zl,Va]},{provide:ql,useClass:ql,deps:[ye,zl,Va]}],Zk=[{provide:bl,useValue:"root"},{provide:Qn,useFactory:Gk,deps:[]},{provide:Gg,useClass:Uk,multi:!0,deps:[Ft,ye,Ot]},{provide:Gg,useClass:qk,multi:!0,deps:[Ft]},tC,oC,iC,{provide:No,useExisting:tC},{provide:Ql,useClass:kk,deps:[]},[]],uC=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:kl,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(O(Qk,12))}}static{this.\u0275mod=xt({type:n})}static{this.\u0275inj=At({providers:[...Zk,...Yk],imports:[X0,B0]})}}return n})();var lC=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(O(Ft))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ue="primary",ic=Symbol("RouteTitle"),Xg=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ko(n){return new Xg(n)}function Jk(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Xk(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Mn(n[t],e[t]))return!1;return!0}function Mn(n,e){let t=n?em(n):void 0,r=e?em(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!EC(n[i],e[i]))return!1;return!0}function em(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function EC(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function DC(n){return n.length>0?n[n.length-1]:null}function Pr(n){return qf(n)?n:ja(n)?Ee(Promise.resolve(n)):X(n)}var eO={exact:TC,subset:bC},CC={exact:tO,subset:nO,ignored:()=>!0};function hC(n,e,t){return eO[t.paths](n.root,e.root,t.matrixParams)&&CC[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function tO(n,e){return Mn(n,e)}function TC(n,e,t){if(!bi(n.segments,e.segments)||!ed(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!TC(n.children[r],e.children[r],t))return!1;return!0}function nO(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>EC(n[t],e[t]))}function bC(n,e,t){return SC(n,e,e.segments,t)}function SC(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!bi(i,t)||e.hasChildren()||!ed(i,t,r))}else if(n.segments.length===t.length){if(!bi(n.segments,t)||!ed(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!bC(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!bi(n.segments,i)||!ed(n.segments,i,r)||!n.children[ue]?!1:SC(n.children[ue],e,o,r)}}function ed(n,e,t){return e.every((r,i)=>CC[t](n[i].parameters,r.parameters))}var nr=class{constructor(e=new De([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ko(this.queryParams),this._queryParamMap}toString(){return oO.serialize(this)}},De=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return td(this)}},Ti=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ko(this.parameters),this._parameterMap}toString(){return xC(this)}};function rO(n,e){return bi(n,e)&&n.every((t,r)=>Mn(t.parameters,e[r].parameters))}function bi(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function iO(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ue&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ue&&(t=t.concat(e(i,r)))}),t}var oc=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>new Qo,providedIn:"root"})}}return n})(),Qo=class{parse(e){let t=new nm(e);return new nr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${qa(e.root,!0)}`,r=cO(e.queryParams),i=typeof e.fragment=="string"?`#${sO(e.fragment)}`:"";return`${t}${r}${i}`}},oO=new Qo;function td(n){return n.segments.map(e=>xC(e)).join("/")}function qa(n,e){if(!n.hasChildren())return td(n);if(e){let t=n.children[ue]?qa(n.children[ue],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ue&&r.push(`${i}:${qa(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=iO(n,(r,i)=>i===ue?[qa(n.children[ue],!1)]:[`${i}:${qa(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ue]!=null?`${td(n)}/${t[0]}`:`${td(n)}/(${t.join("//")})`}}function AC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Jl(n){return AC(n).replace(/%3B/gi,";")}function sO(n){return encodeURI(n)}function tm(n){return AC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function nd(n){return decodeURIComponent(n)}function fC(n){return nd(n.replace(/\+/g,"%20"))}function xC(n){return`${tm(n.path)}${aO(n.parameters)}`}function aO(n){return Object.entries(n).map(([e,t])=>`;${tm(e)}=${tm(t)}`).join("")}function cO(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Jl(t)}=${Jl(i)}`).join("&"):`${Jl(t)}=${Jl(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var uO=/^[^\/()?;#]+/;function Qg(n){let e=n.match(uO);return e?e[0]:""}var lO=/^[^\/()?;=#]+/;function dO(n){let e=n.match(lO);return e?e[0]:""}var hO=/^[^=?&#]+/;function fO(n){let e=n.match(hO);return e?e[0]:""}var pO=/^[^&#]+/;function gO(n){let e=n.match(pO);return e?e[0]:""}var nm=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new De([],{}):new De([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ue]=new De(e,t)),r}parseSegment(){let e=Qg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ee(4009,!1);return this.capture(e),new Ti(nd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=dO(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Qg(this.remaining);i&&(r=i,this.capture(r))}e[nd(t)]=nd(r)}parseQueryParam(e){let t=fO(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=gO(this.remaining);s&&(r=s,this.capture(r))}let i=fC(t),o=fC(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Qg(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ee(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ue);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[ue]:new De([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ee(4011,!1)}};function MC(n){return n.segments.length>0?new De([],{[ue]:n}):n}function RC(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=RC(i);if(r===ue&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new De(n.segments,e);return mO(t)}function mO(n){if(n.numberOfChildren===1&&n.children[ue]){let e=n.children[ue];return new De(n.segments.concat(e.segments),e.children)}return n}function Ya(n){return n instanceof nr}function yO(n,e,t=null,r=null){let i=NC(n);return PC(i,e,t,r)}function NC(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new De(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=MC(r);return e??i}function PC(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Yg(i,i,i,t,r);let o=vO(e);if(o.toRoot())return Yg(i,i,new De([],{}),t,r);let s=_O(o,i,n),a=s.processChildren?Wa(s.segmentGroup,s.index,o.commands):OC(s.segmentGroup,s.index,o.commands);return Yg(i,s.segmentGroup,a,t,r)}function rd(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Za(n){return typeof n=="object"&&n!=null&&n.outlets}function Yg(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=kC(n,e,t);let a=MC(RC(s));return new nr(a,o,i)}function kC(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=kC(o,e,t)}),new De(n.segments,r)}var id=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&rd(r[0]))throw new ee(4003,!1);let i=r.find(Za);if(i&&i!==DC(r))throw new ee(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function vO(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new id(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new id(t,e,r)}var zo=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function _O(n,e,t){if(n.isAbsolute)return new zo(e,!0,0);if(!t)return new zo(e,!1,NaN);if(t.parent===null)return new zo(t,!0,0);let r=rd(n.commands[0])?0:1,i=t.segments.length-1+r;return wO(t,i,n.numberOfDoubleDots)}function wO(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new ee(4005,!1);i=r.segments.length}return new zo(r,!1,i-o)}function IO(n){return Za(n[0])?n[0].outlets:{[ue]:n}}function OC(n,e,t){if(n??=new De([],{}),n.segments.length===0&&n.hasChildren())return Wa(n,e,t);let r=EO(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new De(n.segments.slice(0,r.pathIndex),{});return o.children[ue]=new De(n.segments.slice(r.pathIndex),n.children),Wa(o,0,i)}else return r.match&&i.length===0?new De(n.segments,{}):r.match&&!n.hasChildren()?rm(n,e,t):r.match?Wa(n,0,i):rm(n,e,t)}function Wa(n,e,t){if(t.length===0)return new De(n.segments,{});{let r=IO(t),i={};if(Object.keys(r).some(o=>o!==ue)&&n.children[ue]&&n.numberOfChildren===1&&n.children[ue].segments.length===0){let o=Wa(n.children[ue],e,t);return new De(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=OC(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new De(n.segments,i)}}function EO(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Za(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!gC(c,l,s))return o;r+=2}else{if(!gC(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function rm(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Za(o)){let c=DO(o.outlets);return new De(r,c)}if(i===0&&rd(t[0])){let c=n.segments[e];r.push(new Ti(c.path,pC(t[0]))),i++;continue}let s=Za(o)?o.outlets[ue]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&rd(a)?(r.push(new Ti(s,pC(a))),i+=2):(r.push(new Ti(s,{})),i++)}return new De(r,{})}function DO(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=rm(new De([],{}),0,r))}),e}function pC(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function gC(n,e,t){return n==t.path&&Mn(e,t.parameters)}var Ka="imperative",at=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(at||{}),tn=class{constructor(e,t){this.id=e,this.url=t}},Yo=class extends tn{constructor(e,t,r="imperative",i=null){super(e,t),this.type=at.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},rr=class extends tn{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=at.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},qt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(qt||{}),od=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(od||{}),tr=class extends tn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=at.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Nr=class extends tn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=at.NavigationSkipped}},Ja=class extends tn{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=at.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},sd=class extends tn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=at.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},im=class extends tn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=at.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},om=class extends tn{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=at.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},sm=class extends tn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=at.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},am=class extends tn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=at.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cm=class{constructor(e){this.route=e,this.type=at.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},um=class{constructor(e){this.route=e,this.type=at.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},lm=class{constructor(e){this.snapshot=e,this.type=at.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dm=class{constructor(e){this.snapshot=e,this.type=at.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},hm=class{constructor(e){this.snapshot=e,this.type=at.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fm=class{constructor(e){this.snapshot=e,this.type=at.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ad=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=at.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Xa=class{},Zo=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function CO(n,e){return n.providers&&!n._injector&&(n._injector=Ul(n.providers,e,`Route: ${n.path}`)),n._injector??e}function pn(n){return n.outlet||ue}function TO(n,e){let t=n.filter(r=>pn(r)===e);return t.push(...n.filter(r=>pn(r)!==e)),t}function sc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var pm=class{get injector(){return sc(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new ac(this.rootInjector),this.attachRef=null}},ac=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new pm(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(O($t))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),cd=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=gm(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=gm(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=mm(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return mm(e,this._root).map(t=>t.value)}};function gm(n,e){if(n===e.value)return e;for(let t of e.children){let r=gm(n,t);if(r)return r}return null}function mm(n,e){if(n===e.value)return[e];for(let t of e.children){let r=mm(n,t);if(r.length)return r.unshift(e),r}return[]}var Ht=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function qo(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var ud=class extends cd{constructor(e,t){super(e),this.snapshot=t,Tm(this,e)}toString(){return this.snapshot.toString()}};function FC(n){let e=bO(n),t=new ut([new Ti("",{})]),r=new ut({}),i=new ut({}),o=new ut({}),s=new ut(""),a=new Jo(t,r,o,s,i,ue,n,e.root);return a.snapshot=e.root,new ud(new Ht(a,[]),e)}function bO(n){let e={},t={},r={},i="",o=new Go([],e,r,i,t,ue,n,null,{});return new dd("",new Ht(o,[]))}var Jo=class{constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(G(l=>l[ic]))??X(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(G(e=>Ko(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(G(e=>Ko(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ld(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),n.params),data:V(V({},e.data),n.data),resolve:V(V(V(V({},n.data),e.data),i?.data),n._resolvedData)}:r={params:V({},n.params),data:V({},n.data),resolve:V(V({},n.data),n._resolvedData??{})},i&&VC(i)&&(r.resolve[ic]=i.title),r}var Go=class{get title(){return this.data?.[ic]}constructor(e,t,r,i,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ko(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ko(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},dd=class extends cd{constructor(e,t){super(t),this.url=e,Tm(this,t)}toString(){return LC(this._root)}};function Tm(n,e){e.value._routerState=n,e.children.forEach(t=>Tm(n,t))}function LC(n){let e=n.children.length>0?` { ${n.children.map(LC).join(", ")} } `:"";return`${n.value}${e}`}function Zg(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Mn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Mn(e.params,t.params)||n.paramsSubject.next(t.params),Xk(e.url,t.url)||n.urlSubject.next(t.url),Mn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function ym(n,e){let t=Mn(n.params,e.params)&&rO(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||ym(n.parent,e.parent))}function VC(n){return typeof n.title=="string"||n.title===null}var SO=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ue,this.activateEvents=new Tt,this.deactivateEvents=new Tt,this.attachEvents=new Tt,this.detachEvents=new Tt,this.parentContexts=j(ac),this.location=j(jo),this.changeDetector=j(Ba),this.inputBinder=j(md,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ee(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ee(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ee(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new ee(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new vm(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Pa({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[xl]})}}return n})(),vm=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Jo?this.route:e===ac?this.childContexts:this.parent.get(e,t)}},md=new W(""),mC=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=ga([r.queryParams,r.params,r.data]).pipe(Ue(([o,s,a],c)=>(a=V(V(V({},o),s),a),c===0?X(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=U0(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();function AO(n,e,t){let r=ec(n,e._root,t?t._root:void 0);return new ud(r,e)}function ec(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=xO(n,e,t);return new Ht(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>ec(n,a)),s}}let r=MO(e.value),i=e.children.map(o=>ec(n,o));return new Ht(r,i)}}function xO(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ec(n,r,i);return ec(n,r)})}function MO(n){return new Jo(new ut(n.url),new ut(n.params),new ut(n.queryParams),new ut(n.fragment),new ut(n.data),n.outlet,n.component,n)}var tc=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},jC="ngNavigationCancelingError";function hd(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Ya(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=BC(!1,qt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function BC(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[jC]=!0,t.cancellationCode=e,t}function RO(n){return UC(n)&&Ya(n.url)}function UC(n){return!!n&&n[jC]}var NO=(n,e,t,r)=>G(i=>(new _m(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),_m=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Zg(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=qo(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=qo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=qo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=qo(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new fm(o.value.snapshot))}),e.children.length&&this.forwardEvent(new dm(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Zg(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Zg(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},fd=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Wo=class{constructor(e,t){this.component=e,this.route=t}};function PO(n,e,t){let r=n._root,i=e?e._root:null;return za(r,i,t,[r.value])}function kO(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function es(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!SE(n)?n:e.get(n):r}function za(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=qo(e);return n.children.forEach(s=>{OO(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Qa(a,t.getContext(s),i)),i}function OO(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=FO(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new fd(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?za(n,e,a?a.children:null,r,i):za(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Wo(a.outlet.component,s))}else s&&Qa(e,a,i),i.canActivateChecks.push(new fd(r)),o.component?za(n,null,a?a.children:null,r,i):za(n,null,t,r,i);return i}function FO(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!bi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!bi(n.url,e.url)||!Mn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ym(n,e)||!Mn(n.queryParams,e.queryParams);case"paramsChange":default:return!ym(n,e)}}function Qa(n,e,t){let r=qo(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Qa(s,e.children.getContext(o),t):Qa(s,null,t):Qa(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Wo(e.outlet.component,i)):t.canDeactivateChecks.push(new Wo(null,i)):t.canDeactivateChecks.push(new Wo(null,i))}function cc(n){return typeof n=="function"}function LO(n){return typeof n=="boolean"}function VO(n){return n&&cc(n.canLoad)}function jO(n){return n&&cc(n.canActivate)}function BO(n){return n&&cc(n.canActivateChild)}function UO(n){return n&&cc(n.canDeactivate)}function $O(n){return n&&cc(n.canMatch)}function $C(n){return n instanceof zn||n?.name==="EmptyError"}var Xl=Symbol("INITIAL_VALUE");function Xo(){return Ue(n=>ga(n.map(e=>e.pipe(Gn(1),di(Xl)))).pipe(G(e=>{for(let t of e)if(t!==!0){if(t===Xl)return Xl;if(t===!1||HO(t))return t}return!0}),lt(e=>e!==Xl),Gn(1)))}function HO(n){return Ya(n)||n instanceof tc}function qO(n,e){return Qe(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?X(xe(V({},t),{guardsResult:!0})):zO(s,r,i,n).pipe(Qe(a=>a&&LO(a)?GO(r,o,n,e):X(a)),G(a=>xe(V({},t),{guardsResult:a})))})}function zO(n,e,t,r){return Ee(n).pipe(Qe(i=>ZO(i.component,i.route,t,e,r)),Kt(i=>i!==!0,!0))}function GO(n,e,t,r){return Ee(e).pipe(ui(i=>yo(KO(i.route.parent,r),WO(i.route,r),YO(n,i.path,t),QO(n,i.route,t))),Kt(i=>i!==!0,!0))}function WO(n,e){return n!==null&&e&&e(new hm(n)),X(!0)}function KO(n,e){return n!==null&&e&&e(new lm(n)),X(!0)}function QO(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return X(!0);let i=r.map(o=>Bu(()=>{let s=sc(e)??t,a=es(o,s),c=jO(a)?a.canActivate(e,n):Sn(s,()=>a(e,n));return Pr(c).pipe(Kt())}));return X(i).pipe(Xo())}function YO(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>kO(s)).filter(s=>s!==null).map(s=>Bu(()=>{let a=s.guards.map(c=>{let l=sc(s.node)??t,h=es(c,l),p=BO(h)?h.canActivateChild(r,n):Sn(l,()=>h(r,n));return Pr(p).pipe(Kt())});return X(a).pipe(Xo())}));return X(o).pipe(Xo())}function ZO(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return X(!0);let s=o.map(a=>{let c=sc(e)??i,l=es(a,c),h=UO(l)?l.canDeactivate(n,e,t,r):Sn(c,()=>l(n,e,t,r));return Pr(h).pipe(Kt())});return X(s).pipe(Xo())}function JO(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return X(!0);let o=i.map(s=>{let a=es(s,n),c=VO(a)?a.canLoad(e,t):Sn(n,()=>a(e,t));return Pr(c)});return X(o).pipe(Xo(),HC(r))}function HC(n){return Vf(nt(e=>{if(typeof e!="boolean")throw hd(n,e)}),G(e=>e===!0))}function XO(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return X(!0);let o=i.map(s=>{let a=es(s,n),c=$O(a)?a.canMatch(e,t):Sn(n,()=>a(e,t));return Pr(c)});return X(o).pipe(Xo(),HC(r))}var nc=class{constructor(e){this.segmentGroup=e||null}},rc=class extends Error{constructor(e){super(),this.urlTree=e}};function Ho(n){return mo(new nc(n))}function eF(n){return mo(new ee(4e3,!1))}function tF(n){return mo(BC(!1,qt.GuardRejected))}var wm=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return X(r);if(i.numberOfChildren>1||!i.children[ue])return eF(`${e.redirectTo}`);i=i.children[ue]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:h,url:p,outlet:m,params:v,data:b,title:R}=i,N=Sn(o,()=>a({params:v,data:b,queryParams:c,fragment:l,routeConfig:h,url:p,outlet:m,title:R}));if(N instanceof nr)throw new rc(N);t=N}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new rc(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new nr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new De(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new ee(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Im={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function nF(n,e,t,r,i){let o=qC(n,e,t);return o.matched?(r=CO(e,r),XO(r,e,t,i).pipe(G(s=>s===!0?o:V({},Im)))):X(o)}function qC(n,e,t){if(e.path==="**")return rF(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?V({},Im):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Jk)(t,n,e);if(!i)return V({},Im);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?V(V({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function rF(n){return{matched:!0,parameters:n.length>0?DC(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function yC(n,e,t,r){return t.length>0&&sF(n,t,r)?{segmentGroup:new De(e,oF(r,new De(t,n.children))),slicedSegments:[]}:t.length===0&&aF(n,t,r)?{segmentGroup:new De(n.segments,iF(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new De(n.segments,n.children),slicedSegments:t}}function iF(n,e,t,r){let i={};for(let o of t)if(yd(n,e,o)&&!r[pn(o)]){let s=new De([],{});i[pn(o)]=s}return V(V({},r),i)}function oF(n,e){let t={};t[ue]=e;for(let r of n)if(r.path===""&&pn(r)!==ue){let i=new De([],{});t[pn(r)]=i}return t}function sF(n,e,t){return t.some(r=>yd(n,e,r)&&pn(r)!==ue)}function aF(n,e,t){return t.some(r=>yd(n,e,r))}function yd(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function cF(n,e,t){return e.length===0&&!n.children[t]}var Em=class{};function uF(n,e,t,r,i,o,s="emptyOnly"){return new Dm(n,e,t,r,i,s,o).recognize()}var lF=31,Dm=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new wm(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ee(4002,`'${e.segmentGroup}'`)}recognize(){let e=yC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(G(({children:t,rootSnapshot:r})=>{let i=new Ht(r,t),o=new dd("",i),s=yO(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Go([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ue,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ue,t).pipe(G(r=>({children:r,rootSnapshot:t})),wr(r=>{if(r instanceof rc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof nc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(G(s=>s instanceof Ht?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ee(o).pipe(ui(s=>{let a=r.children[s],c=TO(t,s);return this.processSegmentGroup(e,c,a,s,i)}),li((s,a)=>(s.push(...a),s)),Ir(null),Kf(),Qe(s=>{if(s===null)return Ho(r);let a=zC(s);return dF(a),X(a)}))}processSegment(e,t,r,i,o,s,a){return Ee(t).pipe(ui(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(wr(l=>{if(l instanceof nc)return X(null);throw l}))),Kt(c=>!!c),wr(c=>{if($C(c))return cF(r,i,o)?X(new Em):Ho(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return pn(r)!==s&&(s===ue||!yd(i,o,r))?Ho(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):Ho(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=qC(t,i,o);if(!c)return Ho(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>lF&&(this.allowRedirects=!1));let v=new Go(o,l,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,vC(i),pn(i),i.component??i._loadedComponent??null,i,_C(i)),b=ld(v,a,this.paramsInheritanceStrategy);v.params=Object.freeze(b.params),v.data=Object.freeze(b.data);let R=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,v,e);return this.applyRedirects.lineralizeSegments(i,R).pipe(Qe(N=>this.processSegment(e,r,t,N.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=nF(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Ue(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ue(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:v}=c,b=new Go(m,p,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,vC(r),pn(r),r.component??r._loadedComponent??null,r,_C(r)),R=ld(b,s,this.paramsInheritanceStrategy);b.params=Object.freeze(R.params),b.data=Object.freeze(R.data);let{segmentGroup:N,slicedSegments:B}=yC(t,m,v,l);if(B.length===0&&N.hasChildren())return this.processChildren(h,l,N,b).pipe(G(F=>new Ht(b,F)));if(l.length===0&&B.length===0)return X(new Ht(b,[]));let q=pn(r)===o;return this.processSegment(h,l,N,B,q?ue:o,!0,b).pipe(G(F=>new Ht(b,F instanceof Ht?[F]:[])))}))):Ho(t)))}getChildConfig(e,t,r){return t.children?X({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?X({routes:t._loadedRoutes,injector:t._loadedInjector}):JO(e,t,r,this.urlSerializer).pipe(Qe(i=>i?this.configLoader.loadChildren(e,t).pipe(nt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):tF(t))):X({routes:[],injector:e})}};function dF(n){n.sort((e,t)=>e.value.outlet===ue?-1:t.value.outlet===ue?1:e.value.outlet.localeCompare(t.value.outlet))}function hF(n){let e=n.value.routeConfig;return e&&e.path===""}function zC(n){let e=[],t=new Set;for(let r of n){if(!hF(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=zC(r.children);e.push(new Ht(r.value,i))}return e.filter(r=>!t.has(r))}function vC(n){return n.data||{}}function _C(n){return n.resolve||{}}function fF(n,e,t,r,i,o){return Qe(s=>uF(n,e,t,r,s.extractedUrl,i,o).pipe(G(({state:a,tree:c})=>xe(V({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function pF(n,e){return Qe(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return X(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of GC(c))s.add(l);let a=0;return Ee(s).pipe(ui(c=>o.has(c)?gF(c,r,n,e):(c.data=ld(c,c.parent,n).resolve,X(void 0))),nt(()=>a++),vo(1),Qe(c=>a===s.size?X(t):Ct))})}function GC(n){let e=n.children.map(t=>GC(t)).flat();return[n,...e]}function gF(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!VC(i)&&(o[ic]=i.title),mF(o,n,e,r).pipe(G(s=>(n._resolvedData=s,n.data=ld(n,n.parent,t).resolve,null)))}function mF(n,e,t,r){let i=em(n);if(i.length===0)return X({});let o={};return Ee(i).pipe(Qe(s=>yF(n[s],e,t,r).pipe(Kt(),nt(a=>{if(a instanceof tc)throw hd(new Qo,a);o[s]=a}))),vo(1),Gf(o),wr(s=>$C(s)?Ct:mo(s)))}function yF(n,e,t,r){let i=sc(e)??r,o=es(n,i),s=o.resolve?o.resolve(e,t):Sn(i,()=>o(e,t));return Pr(s)}function Jg(n){return Ue(e=>{let t=n(e);return t?Ee(t).pipe(G(()=>e)):X(e)})}var WC=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ue);return r}getResolvedTitleForRoute(t){return t.data[ic]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(vF),providedIn:"root"})}}return n})(),vF=(()=>{class n extends WC{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(O(lC))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),uc=new W("",{providedIn:"root",factory:()=>({})}),_F=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=st({type:n,selectors:[["ng-component"]],standalone:!0,features:[M0],decls:1,vars:0,template:function(r,i){r&1&&fn(0,"router-outlet")},dependencies:[SO],encapsulation:2})}}return n})();function bm(n){let e=n.children&&n.children.map(bm),t=e?xe(V({},n),{children:e}):V({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ue&&(t.component=_F),t}var pd=new W(""),Sm=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=j(Wl)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return X(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Pr(t.loadComponent()).pipe(G(KC),nt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),ma(()=>{this.componentLoaders.delete(t)})),i=new ho(r,()=>new qe).pipe(lo());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return X({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=wF(r,this.compiler,t,this.onLoadEndListener).pipe(ma(()=>{this.childrenLoaders.delete(r)})),s=new ho(o,()=>new qe).pipe(lo());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function wF(n,e,t,r){return Pr(n.loadChildren()).pipe(G(KC),Qe(i=>i instanceof Aa||Array.isArray(i)?X(i):Ee(e.compileModuleAsync(i))),G(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(pd,[],{optional:!0,self:!0}).flat()),{routes:s.map(bm),injector:o}}))}function IF(n){return n&&typeof n=="object"&&"default"in n}function KC(n){return IF(n)?n.default:n}var Am=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(EF),providedIn:"root"})}}return n})(),EF=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),QC=new W(""),YC=new W("");function DF(n,e,t){let r=n.get(YC),i=n.get(Ft);return n.get(ye).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),CF(n))),{onViewTransitionCreated:c}=r;return c&&Sn(n,()=>c({transition:a,from:e,to:t})),s})}function CF(n){return new Promise(e=>{Tg({read:()=>setTimeout(e)},{injector:n})})}var TF=new W(""),xm=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new qe,this.transitionAbortSubject=new qe,this.configLoader=j(Sm),this.environmentInjector=j($t),this.urlSerializer=j(oc),this.rootContexts=j(ac),this.location=j(Bo),this.inputBindingEnabled=j(md,{optional:!0})!==null,this.titleStrategy=j(WC),this.options=j(uc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=j(Am),this.createViewTransition=j(QC,{optional:!0}),this.navigationErrorHandler=j(TF,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>X(void 0),this.rootComponentType=null;let t=i=>this.events.next(new cm(i)),r=i=>this.events.next(new um(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(xe(V(V({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new ut({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Ka,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(lt(o=>o.id!==0),G(o=>xe(V({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Ue(o=>{let s=!1,a=!1;return X(o).pipe(Ue(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",qt.SupersededByNewNavigation),Ct;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?xe(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new Nr(c.id,this.urlSerializer.serialize(c.rawUrl),p,od.IgnoredSameUrlNavigation)),c.resolve(!1),Ct}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return X(c).pipe(Ue(p=>{let m=this.transitions?.getValue();return this.events.next(new Yo(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?Ct:Promise.resolve(p)}),fF(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),nt(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=xe(V({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new sd(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:p,extractedUrl:m,source:v,restoredState:b,extras:R}=c,N=new Yo(p,this.urlSerializer.serialize(m),v,b);this.events.next(N);let B=FC(this.rootComponentType).snapshot;return this.currentTransition=o=xe(V({},c),{targetSnapshot:B,urlAfterRedirects:m,extras:xe(V({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,X(o)}else{let p="";return this.events.next(new Nr(c.id,this.urlSerializer.serialize(c.extractedUrl),p,od.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Ct}}),nt(c=>{let l=new im(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),G(c=>(this.currentTransition=o=xe(V({},c),{guards:PO(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),qO(this.environmentInjector,c=>this.events.next(c)),nt(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw hd(this.urlSerializer,c.guardsResult);let l=new om(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),lt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",qt.GuardRejected),!1)),Jg(c=>{if(c.guards.canActivateChecks.length)return X(c).pipe(nt(l=>{let h=new sm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Ue(l=>{let h=!1;return X(l).pipe(pF(this.paramsInheritanceStrategy,this.environmentInjector),nt({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",qt.NoDataFromResolver)}}))}),nt(l=>{let h=new am(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),Jg(c=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(nt(m=>{h.component=m}),G(()=>{})));for(let m of h.children)p.push(...l(m));return p};return ga(l(c.targetSnapshot.root)).pipe(Ir(null),Gn(1))}),Jg(()=>this.afterPreactivation()),Ue(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return h?Ee(h).pipe(G(()=>o)):X(o)}),G(c=>{let l=AO(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=xe(V({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),nt(()=>{this.events.next(new Xa)}),NO(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Gn(1),nt({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new rr(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),Yf(this.transitionAbortSubject.pipe(nt(c=>{throw c}))),ma(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",qt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),wr(c=>{if(a=!0,UC(c))this.events.next(new tr(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),RO(c)?this.events.next(new Zo(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let l=new Ja(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let h=Sn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof tc){let{message:p,cancellationCode:m}=hd(this.urlSerializer,h);this.events.next(new tr(o.id,this.urlSerializer.serialize(o.extractedUrl),p,m)),this.events.next(new Zo(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(c);o.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return Ct}))}))}cancelNavigationTransition(t,r,i){let o=new tr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function bF(n){return n!==Ka}var SF=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(AF),providedIn:"root"})}}return n})(),Cm=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},AF=(()=>{class n extends Cm{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=cg(n)))(i||n)}})()}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ZC=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(xF),providedIn:"root"})}}return n})(),xF=(()=>{class n extends ZC{constructor(){super(...arguments),this.location=j(Bo),this.urlSerializer=j(oc),this.options=j(uc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=j(Am),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new nr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=FC(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Yo)this.stateMemento=this.createStateMemento();else if(t instanceof Nr)this.rawUrlTree=r.initialUrl;else if(t instanceof sd){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Xa?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof tr&&(t.code===qt.GuardRejected||t.code===qt.NoDataFromResolver)?this.restoreHistory(r):t instanceof Ja?this.restoreHistory(r,!0):t instanceof rr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof nr?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=V(V({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=V(V({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=cg(n)))(i||n)}})()}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ga=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Ga||{});function JC(n,e){n.events.pipe(lt(t=>t instanceof rr||t instanceof tr||t instanceof Ja||t instanceof Nr),G(t=>t instanceof rr||t instanceof Nr?Ga.COMPLETE:(t instanceof tr?t.code===qt.Redirect||t.code===qt.SupersededByNewNavigation:!1)?Ga.REDIRECTING:Ga.FAILED),lt(t=>t!==Ga.REDIRECTING),Gn(1)).subscribe(()=>{e()})}function MF(n){throw n}var RF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},NF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Si=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=j(Hl),this.stateManager=j(ZC),this.options=j(uc,{optional:!0})||{},this.pendingTasks=j(Vo),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=j(xm),this.urlSerializer=j(oc),this.location=j(Bo),this.urlHandlingStrategy=j(Am),this._events=new qe,this.errorHandler=this.options.errorHandler||MF,this.navigated=!1,this.routeReuseStrategy=j(SF),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=j(pd,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!j(md,{optional:!0}),this.eventsSubscription=new Be,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof tr&&r.code!==qt.Redirect&&r.code!==qt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof rr)this.navigated=!0;else if(r instanceof Zo){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=V({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||bF(i.source)},s);this.scheduleNavigation(a,Ka,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}kF(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ka,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=V({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(bm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=V(V({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=NC(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return PC(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Ya(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Ka,null,r)}navigate(t,r={skipLocationChange:!1}){return PF(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=V({},RF):r===!1?i=V({},NF):i=r,Ya(t))return hC(this.currentUrlTree,t,i);let o=this.parseUrl(t);return hC(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,c=m});let h=this.pendingTasks.add();return JC(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function PF(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ee(4008,!1)}function kF(n){return!(n instanceof Xa)&&!(n instanceof Zo)}var gd=class{};var OF=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(lt(t=>t instanceof rr),ui(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Ul(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Ee(i).pipe(_r())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=X(null);let o=i.pipe(Qe(s=>s===null?X(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Ee([o,s]).pipe(_r())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(O(Si),O(Wl),O($t),O(gd),O(Sm))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),XC=new W(""),FF=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Yo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof rr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Nr&&t.code===od.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ad&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ad(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){i0()}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();function LF(n){return n.routerState.root}function lc(n,e){return{\u0275kind:n,\u0275providers:e}}function VF(){let n=j(Xt);return e=>{let t=n.get(Rr);if(e!==t.components[0])return;let r=n.get(Si),i=n.get(eT);n.get(Mm)===1&&r.initialNavigation(),n.get(tT,null,de.Optional)?.setUpPreloading(),n.get(XC,null,de.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var eT=new W("",{factory:()=>new qe}),Mm=new W("",{providedIn:"root",factory:()=>1});function jF(){return lc(2,[{provide:Mm,useValue:0},{provide:Gl,multi:!0,deps:[Xt],useFactory:e=>{let t=e.get(Q0,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(Si),o=e.get(eT);JC(i,()=>{r(!0)}),e.get(xm).afterPreactivation=()=>(r(!0),o.closed?X(void 0):o),i.initialNavigation()}))}}])}function BF(){return lc(3,[{provide:Gl,multi:!0,useFactory:()=>{let e=j(Si);return()=>{e.setUpLocationChangeListener()}}},{provide:Mm,useValue:2}])}var tT=new W("");function UF(n){return lc(0,[{provide:tT,useExisting:OF},{provide:gd,useExisting:n}])}function $F(){return lc(8,[mC,{provide:md,useExisting:mC}])}function HF(n){let e=[{provide:QC,useValue:DF},{provide:YC,useValue:V({skipNextTransition:!!n?.skipInitialTransition},n)}];return lc(9,e)}var wC=new W("ROUTER_FORROOT_GUARD"),qF=[Bo,{provide:oc,useClass:Qo},Si,ac,{provide:Jo,useFactory:LF,deps:[Si]},Sm,[]],Rm=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[qF,[],{provide:pd,multi:!0,useValue:t},{provide:wC,useFactory:KF,deps:[[Si,new Oo,new Qp]]},{provide:uc,useValue:r||{}},r?.useHash?GF():WF(),zF(),r?.preloadingStrategy?UF(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?QF(r):[],r?.bindToComponentInputs?$F().\u0275providers:[],r?.enableViewTransitions?HF().\u0275providers:[],YF()]}}static forChild(t){return{ngModule:n,providers:[{provide:pd,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(O(wC,8))}}static{this.\u0275mod=xt({type:n})}static{this.\u0275inj=At({})}}return n})();function zF(){return{provide:XC,useFactory:()=>{let n=j(eC),e=j(ye),t=j(uc),r=j(xm),i=j(oc);return t.scrollOffset&&n.setOffset(t.scrollOffset),new FF(i,r,n,e,t)}}}function GF(){return{provide:Di,useClass:Z0}}function WF(){return{provide:Di,useClass:jg}}function KF(n){return"guarded"}function QF(n){return[n.initialNavigation==="disabled"?BF().\u0275providers:[],n.initialNavigation==="enabledBlocking"?jF().\u0275providers:[]]}var IC=new W("");function YF(){return[{provide:IC,useFactory:VF},{provide:Ag,multi:!0,useExisting:IC}]}var ZF=[],nT=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=xt({type:n})}static{this.\u0275inj=At({imports:[Rm.forRoot(ZF),Rm]})}}return n})();var vd=class{constructor(){this.name="name",this.goalLife="goal",this.photoUrl="photo",this.email="email@domain.com",this.phoneNumber="999-999-9999",this.location="city, country",this.socialNetwork="@facebook"}};var JF="firebase",XF="10.14.1";vr(JF,XF,"app");var dc=new xr("ANGULARFIRE2_VERSION");var eL=(n,e)=>{let t=e?[e]:uI(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Ai=class{constructor(){return eL(tL)}},tL="app-check";function Nm(){}var _d=class{zone;delegate;constructor(e,t=$f){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},Pm=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Nm,{},Nm,Nm)),t.pipe(nt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},wd=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new _d(Zone.current)),this.insideAngular=t.run(()=>new _d(Zone.current,pa)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(O(ye))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nL(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Lt(n){return rL(nL())(n)}function rL(n){return function(t){return t=t.lift(new Pm(n.ngZone)),t.pipe(cn(n.outsideAngular),Wt(n.insideAngular))}}var sL=new Map,aL={activated:!1,tokenObservers:[]},cL={initialized:!1,enabled:!1};function gn(n){return sL.get(n)||Object.assign({},aL)}function cT(){return cL}var uL="https://content-firebaseappcheck.googleapis.com/v1";var lL="exchangeDebugToken",iT={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Z9=24*60*60*1e3;var Om=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return M(this,null,function*(){this.stop();try{this.pending=new If,this.pending.promise.catch(t=>{}),yield dL(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new If,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function dL(n){return new Promise(e=>{setTimeout(e,n)})}var hL={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},kr=new aI("appCheck","AppCheck",hL);function uT(n){if(!gn(n).activated)throw kr.create("use-before-activation",{appName:n.name})}function lT(r,i){return M(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let v=yield s.getHeartbeatsHeader();v&&(o["X-Firebase-Client"]=v)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(v){throw kr.create("fetch-network-error",{originalErrorMessage:v?.message})}if(c.status!==200)throw kr.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(v){throw kr.create("fetch-parse-error",{originalErrorMessage:v?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw kr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function dT(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${uL}/projects/${t}/apps/${r}:${lL}?key=${i}`,body:{debug_token:e}}}var fL="firebase-app-check-database",pL=1,Fm="firebase-app-check-store";var Id=null;function gL(){return Id||(Id=new Promise((n,e)=>{try{let t=indexedDB.open(fL,pL);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(kr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Fm,{keyPath:"compositeKey"})}}}catch(t){e(kr.create("storage-open",{originalErrorMessage:t?.message}))}}),Id)}function mL(n,e){return yL(vL(n),e)}function yL(n,e){return M(this,null,function*(){let r=(yield gL()).transaction(Fm,"readwrite"),o=r.objectStore(Fm).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(kr.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function vL(n){return`${n.options.appId}-${n.name}`}var Lm=new wu("@firebase/app-check");function km(n,e){return _u()?mL(n,e).catch(t=>{Lm.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function hT(){return cT().enabled}function fT(){return M(this,null,function*(){let n=cT();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var _L={error:"UNKNOWN_ERROR"};function wL(n){return iI.encodeString(JSON.stringify(n),!1)}function Vm(n,e=!1){return M(this,null,function*(){let t=n.app;uT(t);let r=gn(t),i=r.token,o;if(i&&!hc(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(hc(c)?i=c:yield km(t,void 0))}if(!e&&i&&hc(i))return{token:i.token};let s=!1;if(hT()){r.exchangeTokenPromise||(r.exchangeTokenPromise=lT(dT(t,yield fT()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield km(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield gn(t).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?Lm.warn(c.message):Lm.error(c),o=c}let a;return i?o?hc(i)?a={token:i.token,internalError:o}:a=sT(o):(a={token:i.token},r.token=i,yield km(t,i)):a=sT(o),s&&CL(t,a),a})}function IL(n){return M(this,null,function*(){let e=n.app;uT(e);let{provider:t}=gn(e);if(hT()){let r=yield fT(),{token:i}=yield lT(dT(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function EL(n,e,t,r){let{app:i}=n,o=gn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&hc(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),oT(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>oT(n))}function pT(n,e){let t=gn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function oT(n){let{app:e}=n,t=gn(e),r=t.tokenRefresher;r||(r=DL(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function DL(n){let{app:e}=n;return new Om(()=>M(this,null,function*(){let t=gn(e),r;if(t.token?r=yield Vm(n,!0):r=yield Vm(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=gn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},iT.RETRIAL_MIN_WAIT,iT.RETRIAL_MAX_WAIT)}function CL(n,e){let t=gn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function hc(n){return n.expireTimeMillis-Date.now()>0}function sT(n){return{token:wL(_L),error:n}}var jm=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=gn(this.app);for(let t of e)pT(this.app,t.next);return Promise.resolve()}};function TL(n,e){return new jm(n,e)}function bL(n){return{getToken:e=>Vm(n,e),getLimitedUseToken:()=>IL(n),addTokenListener:e=>EL(n,"INTERNAL",e),removeTokenListener:e=>pT(n.app,e)}}var SL="@firebase/app-check",AL="0.8.8";var xL="app-check",aT="app-check-internal";function ML(){la(new oi(xL,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return TL(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(aT).initialize()})),la(new oi(aT,n=>{let e=n.getProvider("app-check").getImmediate();return bL(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),vr(SL,AL)}ML();var RL=["localhost","0.0.0.0","127.0.0.1"],u3=typeof window<"u"&&RL.includes(window.location.hostname);var NL="firebase",PL="10.14.1";Ut.registerVersion(NL,PL,"app-compat");var kL=["ngOnDestroy"],yT=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(kL.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>t.run(()=>l)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(h=>{let p=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,p),p})})})});var Ed=class{constructor(e){return e}},ts=new W("angularfire2.app.options"),ns=new W("angularfire2.app.name");function fc(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=Ut.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Ut.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;OL("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Ed(s)}var OL=(n,...e)=>{Rg()&&typeof console<"u"&&console[n](...e)},FL={provide:Ed,useFactory:fc,deps:[ts,ye,[new Oo,ns]]},vT=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:ts,useValue:t},{provide:ns,useValue:r}]}}constructor(t){Ut.registerVersion("angularfire",dc.full,"core"),Ut.registerVersion("angularfire",dc.full,"app-compat"),Ut.registerVersion("angular",R0.full,t.toString())}static \u0275fac=function(r){return new(r||n)(O(Ot))};static \u0275mod=xt({type:n});static \u0275inj=At({providers:[FL]})}return n})();function Dd(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return LL(i,s)||(mT("error",`${e} was already initialized on the ${t} Firebase App with different settings.${VL?" You may need to reload as Firebase is not HMR aware.":""}`),mT("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function LL(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var VL=typeof module<"u"&&!!module.hot,mT=(n,...e)=>{Rg()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Bm=new W("angularfire2.auth.use-emulator"),Um=new W("angularfire2.auth.settings"),$m=new W("angularfire2.auth.tenant-id"),Hm=new W("angularfire2.auth.langugage-code"),qm=new W("angularfire2.auth.use-device-language"),zm=new W("angularfire.auth.persistence"),Gm=(n,e,t,r,i,o,s,a)=>Dd(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[l,h]of Object.entries(s))c.settings[l]=h;return a&&c.setPersistence(a),c},[t,r,i,o,s,a]),_T=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,c,l,h,p,m,v){let b=new qe,R=X(void 0).pipe(Wt(s.outsideAngular),Ue(()=>o.runOutsideAngular(()=>import("./chunk-DT56ZVVI.js"))),G(()=>fc(t,o,r)),G(N=>Gm(N,o,a,l,h,p,c,m)),$u({bufferSize:1,refCount:!1}));if(Ci(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=X(null);else{R.pipe(Kt()).subscribe();let N=R.pipe(Ue(F=>F.getRedirectResult().then(Z=>Z,()=>null)),Lt,$u({bufferSize:1,refCount:!1})),B=R.pipe(Ue(F=>new pe(Z=>({unsubscribe:o.runOutsideAngular(()=>F.onAuthStateChanged(te=>Z.next(te),te=>Z.error(te),()=>Z.complete()))})))),q=R.pipe(Ue(F=>new pe(Z=>({unsubscribe:o.runOutsideAngular(()=>F.onIdTokenChanged(te=>Z.next(te),te=>Z.error(te),()=>Z.complete()))}))));this.authState=N.pipe(Hu(B),cn(s.outsideAngular),Wt(s.insideAngular)),this.user=N.pipe(Hu(q),cn(s.outsideAngular),Wt(s.insideAngular)),this.idToken=this.user.pipe(Ue(F=>F?Ee(F.getIdToken()):X(null))),this.idTokenResult=this.user.pipe(Ue(F=>F?Ee(F.getIdTokenResult()):X(null))),this.credential=zf(N,b,this.authState.pipe(lt(F=>!F))).pipe(G(F=>F?.user?F:null),cn(s.outsideAngular),Wt(s.insideAngular))}return yT(this,R,o,{spy:{apply:(N,B,q)=>{(N.startsWith("signIn")||N.startsWith("createUser"))&&q.then(F=>b.next(F))}}})}static \u0275fac=function(r){return new(r||n)(O(ts),O(ns,8),O(Ot),O(ye),O(wd),O(Bm,8),O(Um,8),O($m,8),O(Hm,8),O(qm,8),O(zm,8),O(Ai,8))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var wT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},IT={};var Or,Wm;(function(){var n;function e(I,y){function w(){}w.prototype=y.prototype,I.D=y.prototype,I.prototype=new w,I.prototype.constructor=I,I.C=function(E,D,T){for(var _=Array(arguments.length-2),Un=2;Un<arguments.length;Un++)_[Un-2]=arguments[Un];return y.prototype[D].apply(E,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,y,w){w||(w=0);var E=Array(16);if(typeof y=="string")for(var D=0;16>D;++D)E[D]=y.charCodeAt(w++)|y.charCodeAt(w++)<<8|y.charCodeAt(w++)<<16|y.charCodeAt(w++)<<24;else for(D=0;16>D;++D)E[D]=y[w++]|y[w++]<<8|y[w++]<<16|y[w++]<<24;y=I.g[0],w=I.g[1],D=I.g[2];var T=I.g[3],_=y+(T^w&(D^T))+E[0]+3614090360&4294967295;y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[1]+3905402710&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[2]+606105819&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[3]+3250441966&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(T^w&(D^T))+E[4]+4118548399&4294967295,y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[5]+1200080426&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[6]+2821735955&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[7]+4249261313&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(T^w&(D^T))+E[8]+1770035416&4294967295,y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[9]+2336552879&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[10]+4294925233&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[11]+2304563134&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(T^w&(D^T))+E[12]+1804603682&4294967295,y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[13]+4254626195&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[14]+2792965006&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[15]+1236535329&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(D^T&(w^D))+E[1]+4129170786&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[6]+3225465664&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[11]+643717713&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[0]+3921069994&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(D^T&(w^D))+E[5]+3593408605&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[10]+38016083&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[15]+3634488961&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[4]+3889429448&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(D^T&(w^D))+E[9]+568446438&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[14]+3275163606&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[3]+4107603335&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[8]+1163531501&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(D^T&(w^D))+E[13]+2850285829&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[2]+4243563512&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[7]+1735328473&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[12]+2368359562&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(w^D^T)+E[5]+4294588738&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[8]+2272392833&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[11]+1839030562&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[14]+4259657740&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(w^D^T)+E[1]+2763975236&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[4]+1272893353&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[7]+4139469664&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[10]+3200236656&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(w^D^T)+E[13]+681279174&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[0]+3936430074&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[3]+3572445317&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[6]+76029189&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(w^D^T)+E[9]+3654602809&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[12]+3873151461&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[15]+530742520&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[2]+3299628645&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(D^(w|~T))+E[0]+4096336452&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[7]+1126891415&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[14]+2878612391&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[5]+4237533241&4294967295,w=D+(_<<21&4294967295|_>>>11),_=y+(D^(w|~T))+E[12]+1700485571&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[3]+2399980690&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[10]+4293915773&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[1]+2240044497&4294967295,w=D+(_<<21&4294967295|_>>>11),_=y+(D^(w|~T))+E[8]+1873313359&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[15]+4264355552&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[6]+2734768916&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[13]+1309151649&4294967295,w=D+(_<<21&4294967295|_>>>11),_=y+(D^(w|~T))+E[4]+4149444226&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[11]+3174756917&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[2]+718787259&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[9]+3951481745&4294967295,I.g[0]=I.g[0]+y&4294967295,I.g[1]=I.g[1]+(D+(_<<21&4294967295|_>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+T&4294967295}r.prototype.u=function(I,y){y===void 0&&(y=I.length);for(var w=y-this.blockSize,E=this.B,D=this.h,T=0;T<y;){if(D==0)for(;T<=w;)i(this,I,T),T+=this.blockSize;if(typeof I=="string"){for(;T<y;)if(E[D++]=I.charCodeAt(T++),D==this.blockSize){i(this,E),D=0;break}}else for(;T<y;)if(E[D++]=I[T++],D==this.blockSize){i(this,E),D=0;break}}this.h=D,this.o+=y},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var y=1;y<I.length-8;++y)I[y]=0;var w=8*this.o;for(y=I.length-8;y<I.length;++y)I[y]=w&255,w/=256;for(this.u(I),I=Array(16),y=w=0;4>y;++y)for(var E=0;32>E;E+=8)I[w++]=this.g[y]>>>E&255;return I};function o(I,y){var w=a;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=y(I)}function s(I,y){this.h=y;for(var w=[],E=!0,D=I.length-1;0<=D;D--){var T=I[D]|0;E&&T==y||(w[D]=T,E=!1)}this.g=w}var a={};function c(I){return-128<=I&&128>I?o(I,function(y){return new s([y|0],0>y?-1:0)}):new s([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return N(l(-I));for(var y=[],w=1,E=0;I>=w;E++)y[E]=I/w|0,w*=4294967296;return new s(y,0)}function h(I,y){if(I.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(I.charAt(0)=="-")return N(h(I.substring(1),y));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(y,8)),E=p,D=0;D<I.length;D+=8){var T=Math.min(8,I.length-D),_=parseInt(I.substring(D,D+T),y);8>T?(T=l(Math.pow(y,T)),E=E.j(T).add(l(_))):(E=E.j(w),E=E.add(l(_)))}return E}var p=c(0),m=c(1),v=c(16777216);n=s.prototype,n.m=function(){if(R(this))return-N(this).m();for(var I=0,y=1,w=0;w<this.g.length;w++){var E=this.i(w);I+=(0<=E?E:4294967296+E)*y,y*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(b(this))return"0";if(R(this))return"-"+N(this).toString(I);for(var y=l(Math.pow(I,6)),w=this,E="";;){var D=Z(w,y).g;w=B(w,D.j(y));var T=((0<w.g.length?w.g[0]:w.h)>>>0).toString(I);if(w=D,b(w))return T+E;for(;6>T.length;)T="0"+T;E=T+E}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function b(I){if(I.h!=0)return!1;for(var y=0;y<I.g.length;y++)if(I.g[y]!=0)return!1;return!0}function R(I){return I.h==-1}n.l=function(I){return I=B(this,I),R(I)?-1:b(I)?0:1};function N(I){for(var y=I.g.length,w=[],E=0;E<y;E++)w[E]=~I.g[E];return new s(w,~I.h).add(m)}n.abs=function(){return R(this)?N(this):this},n.add=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0,D=0;D<=y;D++){var T=E+(this.i(D)&65535)+(I.i(D)&65535),_=(T>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);E=_>>>16,T&=65535,_&=65535,w[D]=_<<16|T}return new s(w,w[w.length-1]&-2147483648?-1:0)};function B(I,y){return I.add(N(y))}n.j=function(I){if(b(this)||b(I))return p;if(R(this))return R(I)?N(this).j(N(I)):N(N(this).j(I));if(R(I))return N(this.j(N(I)));if(0>this.l(v)&&0>I.l(v))return l(this.m()*I.m());for(var y=this.g.length+I.g.length,w=[],E=0;E<2*y;E++)w[E]=0;for(E=0;E<this.g.length;E++)for(var D=0;D<I.g.length;D++){var T=this.i(E)>>>16,_=this.i(E)&65535,Un=I.i(D)>>>16,qs=I.i(D)&65535;w[2*E+2*D]+=_*qs,q(w,2*E+2*D),w[2*E+2*D+1]+=T*qs,q(w,2*E+2*D+1),w[2*E+2*D+1]+=_*Un,q(w,2*E+2*D+1),w[2*E+2*D+2]+=T*Un,q(w,2*E+2*D+2)}for(E=0;E<y;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=y;E<2*y;E++)w[E]=0;return new s(w,0)};function q(I,y){for(;(I[y]&65535)!=I[y];)I[y+1]+=I[y]>>>16,I[y]&=65535,y++}function F(I,y){this.g=I,this.h=y}function Z(I,y){if(b(y))throw Error("division by zero");if(b(I))return new F(p,p);if(R(I))return y=Z(N(I),y),new F(N(y.g),N(y.h));if(R(y))return y=Z(I,N(y)),new F(N(y.g),y.h);if(30<I.g.length){if(R(I)||R(y))throw Error("slowDivide_ only works with positive integers.");for(var w=m,E=y;0>=E.l(I);)w=te(w),E=te(E);var D=J(w,1),T=J(E,1);for(E=J(E,2),w=J(w,2);!b(E);){var _=T.add(E);0>=_.l(I)&&(D=D.add(w),T=_),E=J(E,1),w=J(w,1)}return y=B(I,D.j(y)),new F(D,y)}for(D=p;0<=I.l(y);){for(w=Math.max(1,Math.floor(I.m()/y.m())),E=Math.ceil(Math.log(w)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),T=l(w),_=T.j(y);R(_)||0<_.l(I);)w-=E,T=l(w),_=T.j(y);b(T)&&(T=m),D=D.add(T),I=B(I,_)}return new F(D,I)}n.A=function(I){return Z(this,I).h},n.and=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)&I.i(E);return new s(w,this.h&I.h)},n.or=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)|I.i(E);return new s(w,this.h|I.h)},n.xor=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)^I.i(E);return new s(w,this.h^I.h)};function te(I){for(var y=I.g.length+1,w=[],E=0;E<y;E++)w[E]=I.i(E)<<1|I.i(E-1)>>>31;return new s(w,I.h)}function J(I,y){var w=y>>5;y%=32;for(var E=I.g.length-w,D=[],T=0;T<E;T++)D[T]=0<y?I.i(T+w)>>>y|I.i(T+w+1)<<32-y:I.i(T+w);return new s(D,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Wm=IT.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Or=IT.Integer=s}).apply(typeof wT<"u"?wT:typeof self<"u"?self:typeof window<"u"?window:{});var Cd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ir={};var Km,BL,rs,Qm,pc,Td,Ym,Zm,Jm;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,f){return u==Array.prototype||u==Object.prototype||(u[d]=f.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Cd=="object"&&Cd];for(var d=0;d<u.length;++d){var f=u[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(u,d){if(d)e:{var f=r;u=u.split(".");for(var g=0;g<u.length-1;g++){var C=u[g];if(!(C in f))break e;f=f[C]}u=u[u.length-1],g=f[u],d=d(g),d!=g&&d!=null&&e(f,u,{configurable:!0,writable:!0,value:d})}}function o(u,d){u instanceof String&&(u+="");var f=0,g=!1,C={next:function(){if(!g&&f<u.length){var A=f++;return{value:d(A,u[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(u){return u||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function c(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function l(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function h(u,d,f){return u.call.apply(u.bind,arguments)}function p(u,d,f){if(!u)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),u.apply(d,C)}}return function(){return u.apply(d,arguments)}}function m(u,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function v(u,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),u.apply(this,g)}}function b(u,d){function f(){}f.prototype=d.prototype,u.aa=d.prototype,u.prototype=new f,u.prototype.constructor=u,u.Qb=function(g,C,A){for(var L=Array(arguments.length-2),be=2;be<arguments.length;be++)L[be-2]=arguments[be];return d.prototype[C].apply(g,L)}}function R(u){let d=u.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=u[g];return f}return[]}function N(u,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(c(g)){let C=u.length||0,A=g.length||0;u.length=C+A;for(let L=0;L<A;L++)u[C+L]=g[L]}else u.push(g)}}class B{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function q(u){return/^[\s\xa0]*$/.test(u)}function F(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function Z(u){return Z[" "](u),u}Z[" "]=function(){};var te=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function J(u,d,f){for(let g in u)d.call(f,u[g],g,u)}function I(u,d){for(let f in u)d.call(void 0,u[f],f,u)}function y(u){let d={};for(let f in u)d[f]=u[f];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(u,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)u[f]=g[f];for(let A=0;A<w.length;A++)f=w[A],Object.prototype.hasOwnProperty.call(g,f)&&(u[f]=g[f])}}function D(u){var d=1;u=u.split(":");let f=[];for(;0<d&&u.length;)f.push(u.shift()),d--;return u.length&&f.push(u.join(":")),f}function T(u){a.setTimeout(()=>{throw u},0)}function _(){var u=Kh;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class Un{constructor(){this.h=this.g=null}add(d,f){let g=qs.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var qs=new B(()=>new mx,u=>u.reset());class mx{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let zs,Gs=!1,Kh=new Un,ew=()=>{let u=a.Promise.resolve(void 0);zs=()=>{u.then(yx)}};var yx=()=>{for(var u;u=_();){try{u.h.call(u.g)}catch(f){T(f)}var d=qs;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}Gs=!1};function pr(){this.s=this.s,this.C=this.C}pr.prototype.s=!1,pr.prototype.ma=function(){this.s||(this.s=!0,this.N())},pr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pt(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}pt.prototype.h=function(){this.defaultPrevented=!0};var vx=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return u}();function Ws(u,d){if(pt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var f=this.type=u.type,g=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(te){e:{try{Z(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=u.fromElement:f=="mouseout"&&(d=u.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:_x[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ws.aa.h.call(this)}}b(Ws,pt);var _x={2:"touch",3:"pen",4:"mouse"};Ws.prototype.h=function(){Ws.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ks="closure_listenable_"+(1e6*Math.random()|0),wx=0;function Ix(u,d,f,g,C){this.listener=u,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++wx,this.da=this.fa=!1}function tu(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function nu(u){this.src=u,this.g={},this.h=0}nu.prototype.add=function(u,d,f,g,C){var A=u.toString();u=this.g[A],u||(u=this.g[A]=[],this.h++);var L=Yh(u,d,g,C);return-1<L?(d=u[L],f||(d.fa=!1)):(d=new Ix(d,this.src,A,!!g,C),d.fa=f,u.push(d)),d};function Qh(u,d){var f=d.type;if(f in u.g){var g=u.g[f],C=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=C)&&Array.prototype.splice.call(g,C,1),A&&(tu(d),u.g[f].length==0&&(delete u.g[f],u.h--))}}function Yh(u,d,f,g){for(var C=0;C<u.length;++C){var A=u[C];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return C}return-1}var Zh="closure_lm_"+(1e6*Math.random()|0),Jh={};function tw(u,d,f,g,C){if(g&&g.once)return rw(u,d,f,g,C);if(Array.isArray(d)){for(var A=0;A<d.length;A++)tw(u,d[A],f,g,C);return null}return f=nf(f),u&&u[Ks]?u.K(d,f,l(g)?!!g.capture:!!g,C):nw(u,d,f,!1,g,C)}function nw(u,d,f,g,C,A){if(!d)throw Error("Invalid event type");var L=l(C)?!!C.capture:!!C,be=ef(u);if(be||(u[Zh]=be=new nu(u)),f=be.add(d,f,g,L,A),f.proxy)return f;if(g=Ex(),f.proxy=g,g.src=u,g.listener=f,u.addEventListener)vx||(C=L),C===void 0&&(C=!1),u.addEventListener(d.toString(),g,C);else if(u.attachEvent)u.attachEvent(ow(d.toString()),g);else if(u.addListener&&u.removeListener)u.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Ex(){function u(f){return d.call(u.src,u.listener,f)}let d=Dx;return u}function rw(u,d,f,g,C){if(Array.isArray(d)){for(var A=0;A<d.length;A++)rw(u,d[A],f,g,C);return null}return f=nf(f),u&&u[Ks]?u.L(d,f,l(g)?!!g.capture:!!g,C):nw(u,d,f,!0,g,C)}function iw(u,d,f,g,C){if(Array.isArray(d))for(var A=0;A<d.length;A++)iw(u,d[A],f,g,C);else g=l(g)?!!g.capture:!!g,f=nf(f),u&&u[Ks]?(u=u.i,d=String(d).toString(),d in u.g&&(A=u.g[d],f=Yh(A,f,g,C),-1<f&&(tu(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete u.g[d],u.h--)))):u&&(u=ef(u))&&(d=u.g[d.toString()],u=-1,d&&(u=Yh(d,f,g,C)),(f=-1<u?d[u]:null)&&Xh(f))}function Xh(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[Ks])Qh(d.i,u);else{var f=u.type,g=u.proxy;d.removeEventListener?d.removeEventListener(f,g,u.capture):d.detachEvent?d.detachEvent(ow(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=ef(d))?(Qh(f,u),f.h==0&&(f.src=null,d[Zh]=null)):tu(u)}}}function ow(u){return u in Jh?Jh[u]:Jh[u]="on"+u}function Dx(u,d){if(u.da)u=!0;else{d=new Ws(d,this);var f=u.listener,g=u.ha||u.src;u.fa&&Xh(u),u=f.call(g,d)}return u}function ef(u){return u=u[Zh],u instanceof nu?u:null}var tf="__closure_events_fn_"+(1e9*Math.random()>>>0);function nf(u){return typeof u=="function"?u:(u[tf]||(u[tf]=function(d){return u.handleEvent(d)}),u[tf])}function gt(){pr.call(this),this.i=new nu(this),this.M=this,this.F=null}b(gt,pr),gt.prototype[Ks]=!0,gt.prototype.removeEventListener=function(u,d,f,g){iw(this,u,d,f,g)};function It(u,d){var f,g=u.F;if(g)for(f=[];g;g=g.F)f.push(g);if(u=u.M,g=d.type||d,typeof d=="string")d=new pt(d,u);else if(d instanceof pt)d.target=d.target||u;else{var C=d;d=new pt(g,u),E(d,C)}if(C=!0,f)for(var A=f.length-1;0<=A;A--){var L=d.g=f[A];C=ru(L,g,!0,d)&&C}if(L=d.g=u,C=ru(L,g,!0,d)&&C,C=ru(L,g,!1,d)&&C,f)for(A=0;A<f.length;A++)L=d.g=f[A],C=ru(L,g,!1,d)&&C}gt.prototype.N=function(){if(gt.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var f=u.g[d],g=0;g<f.length;g++)tu(f[g]);delete u.g[d],u.h--}}this.F=null},gt.prototype.K=function(u,d,f,g){return this.i.add(String(u),d,!1,f,g)},gt.prototype.L=function(u,d,f,g){return this.i.add(String(u),d,!0,f,g)};function ru(u,d,f,g){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,A=0;A<d.length;++A){var L=d[A];if(L&&!L.da&&L.capture==f){var be=L.listener,ct=L.ha||L.src;L.fa&&Qh(u.i,L),C=be.call(ct,g)!==!1&&C}}return C&&!g.defaultPrevented}function sw(u,d,f){if(typeof u=="function")f&&(u=m(u,f));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(u,d||0)}function aw(u){u.g=sw(()=>{u.g=null,u.i&&(u.i=!1,aw(u))},u.l);let d=u.h;u.h=null,u.m.apply(null,d)}class Cx extends pr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:aw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qs(u){pr.call(this),this.h=u,this.g={}}b(Qs,pr);var cw=[];function uw(u){J(u.g,function(d,f){this.g.hasOwnProperty(f)&&Xh(d)},u),u.g={}}Qs.prototype.N=function(){Qs.aa.N.call(this),uw(this)},Qs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rf=a.JSON.stringify,Tx=a.JSON.parse,bx=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function of(){}of.prototype.h=null;function lw(u){return u.h||(u.h=u.i())}function dw(){}var Ys={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function sf(){pt.call(this,"d")}b(sf,pt);function af(){pt.call(this,"c")}b(af,pt);var ti={},hw=null;function iu(){return hw=hw||new gt}ti.La="serverreachability";function fw(u){pt.call(this,ti.La,u)}b(fw,pt);function Zs(u){let d=iu();It(d,new fw(d))}ti.STAT_EVENT="statevent";function pw(u,d){pt.call(this,ti.STAT_EVENT,u),this.stat=d}b(pw,pt);function Et(u){let d=iu();It(d,new pw(d,u))}ti.Ma="timingevent";function gw(u,d){pt.call(this,ti.Ma,u),this.size=d}b(gw,pt);function Js(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},d)}function Xs(){this.g=!0}Xs.prototype.xa=function(){this.g=!1};function Sx(u,d,f,g,C,A){u.info(function(){if(u.g)if(A)for(var L="",be=A.split("&"),ct=0;ct<be.length;ct++){var Ie=be[ct].split("=");if(1<Ie.length){var mt=Ie[0];Ie=Ie[1];var yt=mt.split("_");L=2<=yt.length&&yt[1]=="type"?L+(mt+"="+Ie+"&"):L+(mt+"=redacted&")}}else L=null;else L=A;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+L})}function Ax(u,d,f,g,C,A,L){u.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+A+" "+L})}function no(u,d,f,g){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+Mx(u,f)+(g?" "+g:"")})}function xx(u,d){u.info(function(){return"TIMEOUT: "+d})}Xs.prototype.info=function(){};function Mx(u,d){if(!u.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(u=0;u<f.length;u++)if(Array.isArray(f[u])){var g=f[u];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var A=C[0];if(A!="noop"&&A!="stop"&&A!="close")for(var L=1;L<C.length;L++)C[L]=""}}}}return rf(f)}catch{return d}}var ou={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},mw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},cf;function su(){}b(su,of),su.prototype.g=function(){return new XMLHttpRequest},su.prototype.i=function(){return{}},cf=new su;function gr(u,d,f,g){this.j=u,this.i=d,this.l=f,this.R=g||1,this.U=new Qs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new yw}function yw(){this.i=null,this.g="",this.h=!1}var vw={},uf={};function lf(u,d,f){u.L=1,u.v=lu($n(d)),u.m=f,u.P=!0,_w(u,null)}function _w(u,d){u.F=Date.now(),au(u),u.A=$n(u.v);var f=u.A,g=u.R;Array.isArray(g)||(g=[String(g)]),Pw(f.i,"t",g),u.C=0,f=u.j.J,u.h=new yw,u.g=Zw(u.j,f?d:null,!u.m),0<u.O&&(u.M=new Cx(m(u.Y,u,u.g),u.O)),d=u.U,f=u.g,g=u.ca;var C="readystatechange";Array.isArray(C)||(C&&(cw[0]=C.toString()),C=cw);for(var A=0;A<C.length;A++){var L=tw(f,C[A],g||d.handleEvent,!1,d.h||d);if(!L)break;d.g[L.key]=L}d=u.H?y(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),Zs(),Sx(u.i,u.u,u.A,u.l,u.R,u.m)}gr.prototype.ca=function(u){u=u.target;let d=this.M;d&&Hn(u)==3?d.j():this.Y(u)},gr.prototype.Y=function(u){try{if(u==this.g)e:{let yt=Hn(this.g);var d=this.g.Ba();let oo=this.g.Z();if(!(3>yt)&&(yt!=3||this.g&&(this.h.h||this.g.oa()||Bw(this.g)))){this.J||yt!=4||d==7||(d==8||0>=oo?Zs(3):Zs(2)),df(this);var f=this.g.Z();this.X=f;t:if(ww(this)){var g=Bw(this.g);u="";var C=g.length,A=Hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ni(this),ea(this);var L="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,u+=this.h.i.decode(g[d],{stream:!(A&&d==C-1)});g.length=0,this.h.g+=u,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=f==200,Ax(this.i,this.u,this.A,this.l,this.R,yt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var be,ct=this.g;if((be=ct.g?ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(be)){var Ie=be;break t}}Ie=null}if(f=Ie)no(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hf(this,f);else{this.o=!1,this.s=3,Et(12),ni(this),ea(this);break e}}if(this.P){f=!0;let sn;for(;!this.J&&this.C<L.length;)if(sn=Rx(this,L),sn==uf){yt==4&&(this.s=4,Et(14),f=!1),no(this.i,this.l,null,"[Incomplete Response]");break}else if(sn==vw){this.s=4,Et(15),no(this.i,this.l,L,"[Invalid Chunk]"),f=!1;break}else no(this.i,this.l,sn,null),hf(this,sn);if(ww(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yt!=4||L.length!=0||this.h.h||(this.s=1,Et(16),f=!1),this.o=this.o&&f,!f)no(this.i,this.l,L,"[Invalid Chunked Response]"),ni(this),ea(this);else if(0<L.length&&!this.W){this.W=!0;var mt=this.j;mt.g==this&&mt.ba&&!mt.M&&(mt.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),vf(mt),mt.M=!0,Et(11))}}else no(this.i,this.l,L,null),hf(this,L);yt==4&&ni(this),this.o&&!this.J&&(yt==4?Ww(this.j,this):(this.o=!1,au(this)))}else Kx(this.g),f==400&&0<L.indexOf("Unknown SID")?(this.s=3,Et(12)):(this.s=0,Et(13)),ni(this),ea(this)}}}catch{}finally{}};function ww(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Rx(u,d){var f=u.C,g=d.indexOf(`
`,f);return g==-1?uf:(f=Number(d.substring(f,g)),isNaN(f)?vw:(g+=1,g+f>d.length?uf:(d=d.slice(g,g+f),u.C=g+f,d)))}gr.prototype.cancel=function(){this.J=!0,ni(this)};function au(u){u.S=Date.now()+u.I,Iw(u,u.I)}function Iw(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Js(m(u.ba,u),d)}function df(u){u.B&&(a.clearTimeout(u.B),u.B=null)}gr.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(xx(this.i,this.A),this.L!=2&&(Zs(),Et(17)),ni(this),this.s=2,ea(this)):Iw(this,this.S-u)};function ea(u){u.j.G==0||u.J||Ww(u.j,u)}function ni(u){df(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,uw(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function hf(u,d){try{var f=u.j;if(f.G!=0&&(f.g==u||ff(f.h,u))){if(!u.K&&ff(f.h,u)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<u.F)gu(f),fu(f);else break e;yf(f),Et(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=Js(m(f.Za,f),6e3));if(1>=Cw(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ii(f,11)}else if((u.K||f.g==u)&&gu(f),!q(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let Ie=C[d];if(f.T=Ie[0],Ie=Ie[1],f.G==2)if(Ie[0]=="c"){f.K=Ie[1],f.ia=Ie[2];let mt=Ie[3];mt!=null&&(f.la=mt,f.j.info("VER="+f.la));let yt=Ie[4];yt!=null&&(f.Aa=yt,f.j.info("SVER="+f.Aa));let oo=Ie[5];oo!=null&&typeof oo=="number"&&0<oo&&(g=1.5*oo,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let sn=u.g;if(sn){let yu=sn.g?sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(yu){var A=g.h;A.g||yu.indexOf("spdy")==-1&&yu.indexOf("quic")==-1&&yu.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(pf(A,A.h),A.h=null))}if(g.D){let _f=sn.g?sn.g.getResponseHeader("X-HTTP-Session-Id"):null;_f&&(g.ya=_f,Re(g.I,g.D,_f))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-u.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var L=u;if(g.qa=Yw(g,g.J?g.ia:null,g.W),L.K){Tw(g.h,L);var be=L,ct=g.L;ct&&(be.I=ct),be.B&&(df(be),au(be)),g.g=L}else zw(g);0<f.i.length&&pu(f)}else Ie[0]!="stop"&&Ie[0]!="close"||ii(f,7);else f.G==3&&(Ie[0]=="stop"||Ie[0]=="close"?Ie[0]=="stop"?ii(f,7):mf(f):Ie[0]!="noop"&&f.l&&f.l.ta(Ie),f.v=0)}}Zs(4)}catch{}}var Nx=class{constructor(u,d){this.g=u,this.map=d}};function Ew(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Dw(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Cw(u){return u.h?1:u.g?u.g.size:0}function ff(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function pf(u,d){u.g?u.g.add(d):u.h=d}function Tw(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}Ew.prototype.cancel=function(){if(this.i=bw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function bw(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(let f of u.g.values())d=d.concat(f.D);return d}return R(u.i)}function Px(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var d=[],f=u.length,g=0;g<f;g++)d.push(u[g]);return d}d=[],f=0;for(g in u)d[f++]=u[g];return d}function kx(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var d=[];u=u.length;for(var f=0;f<u;f++)d.push(f);return d}d=[],f=0;for(let g in u)d[f++]=g;return d}}}function Sw(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var f=kx(u),g=Px(u),C=g.length,A=0;A<C;A++)d.call(void 0,g[A],f&&f[A],u)}var Aw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ox(u,d){if(u){u=u.split("&");for(var f=0;f<u.length;f++){var g=u[f].indexOf("="),C=null;if(0<=g){var A=u[f].substring(0,g);C=u[f].substring(g+1)}else A=u[f];d(A,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function ri(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ri){this.h=u.h,cu(this,u.j),this.o=u.o,this.g=u.g,uu(this,u.s),this.l=u.l;var d=u.i,f=new ra;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),xw(this,f),this.m=u.m}else u&&(d=String(u).match(Aw))?(this.h=!1,cu(this,d[1]||"",!0),this.o=ta(d[2]||""),this.g=ta(d[3]||"",!0),uu(this,d[4]),this.l=ta(d[5]||"",!0),xw(this,d[6]||"",!0),this.m=ta(d[7]||"")):(this.h=!1,this.i=new ra(null,this.h))}ri.prototype.toString=function(){var u=[],d=this.j;d&&u.push(na(d,Mw,!0),":");var f=this.g;return(f||d=="file")&&(u.push("//"),(d=this.o)&&u.push(na(d,Mw,!0),"@"),u.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&u.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&u.push("/"),u.push(na(f,f.charAt(0)=="/"?Vx:Lx,!0))),(f=this.i.toString())&&u.push("?",f),(f=this.m)&&u.push("#",na(f,Bx)),u.join("")};function $n(u){return new ri(u)}function cu(u,d,f){u.j=f?ta(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function uu(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function xw(u,d,f){d instanceof ra?(u.i=d,Ux(u.i,u.h)):(f||(d=na(d,jx)),u.i=new ra(d,u.h))}function Re(u,d,f){u.i.set(d,f)}function lu(u){return Re(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ta(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function na(u,d,f){return typeof u=="string"?(u=encodeURI(u).replace(d,Fx),f&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Fx(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Mw=/[#\/\?@]/g,Lx=/[#\?:]/g,Vx=/[#\?]/g,jx=/[#\?@]/g,Bx=/#/g;function ra(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function mr(u){u.g||(u.g=new Map,u.h=0,u.i&&Ox(u.i,function(d,f){u.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=ra.prototype,n.add=function(u,d){mr(this),this.i=null,u=ro(this,u);var f=this.g.get(u);return f||this.g.set(u,f=[]),f.push(d),this.h+=1,this};function Rw(u,d){mr(u),d=ro(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function Nw(u,d){return mr(u),d=ro(u,d),u.g.has(d)}n.forEach=function(u,d){mr(this),this.g.forEach(function(f,g){f.forEach(function(C){u.call(d,C,g,this)},this)},this)},n.na=function(){mr(this);let u=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=u[g];for(let A=0;A<C.length;A++)f.push(d[g])}return f},n.V=function(u){mr(this);let d=[];if(typeof u=="string")Nw(this,u)&&(d=d.concat(this.g.get(ro(this,u))));else{u=Array.from(this.g.values());for(let f=0;f<u.length;f++)d=d.concat(u[f])}return d},n.set=function(u,d){return mr(this),this.i=null,u=ro(this,u),Nw(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},n.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function Pw(u,d,f){Rw(u,d),0<f.length&&(u.i=null,u.g.set(ro(u,d),R(f)),u.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),L=this.V(g);for(g=0;g<L.length;g++){var C=A;L[g]!==""&&(C+="="+encodeURIComponent(String(L[g]))),u.push(C)}}return this.i=u.join("&")};function ro(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function Ux(u,d){d&&!u.j&&(mr(u),u.i=null,u.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(Rw(this,g),Pw(this,C,f))},u)),u.j=d}function $x(u,d){let f=new Xs;if(a.Image){let g=new Image;g.onload=v(yr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=v(yr,f,"TestLoadImage: error",!1,d,g),g.onabort=v(yr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=v(yr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=u}else d(!1)}function Hx(u,d){let f=new Xs,g=new AbortController,C=setTimeout(()=>{g.abort(),yr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:g.signal}).then(A=>{clearTimeout(C),A.ok?yr(f,"TestPingServer: ok",!0,d):yr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),yr(f,"TestPingServer: error",!1,d)})}function yr(u,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function qx(){this.g=new bx}function zx(u,d,f){let g=f||"";try{Sw(u,function(C,A){let L=C;l(C)&&(L=rf(C)),d.push(g+A+"="+encodeURIComponent(L))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function ia(u){this.l=u.Ub||null,this.j=u.eb||!1}b(ia,of),ia.prototype.g=function(){return new du(this.l,this.j)},ia.prototype.i=function(u){return function(){return u}}({});function du(u,d){gt.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(du,gt),n=du.prototype,n.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,sa(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,oa(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,sa(this)),this.g&&(this.readyState=3,sa(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;kw(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function kw(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?oa(this):sa(this),this.readyState==3&&kw(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,oa(this))},n.Qa=function(u){this.g&&(this.response=u,oa(this))},n.ga=function(){this.g&&oa(this)};function oa(u){u.readyState=4,u.l=null,u.j=null,u.v=null,sa(u)}n.setRequestHeader=function(u,d){this.u.append(u,d)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,u.push(f[0]+": "+f[1]),f=d.next();return u.join(`\r
`)};function sa(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(du.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Ow(u){let d="";return J(u,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function gf(u,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Ow(f),typeof u=="string"?f!=null&&encodeURIComponent(String(f)):Re(u,d,f))}function je(u){gt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(je,gt);var Gx=/^https?$/i,Wx=["POST","PUT"];n=je.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():cf.g(),this.v=this.o?lw(this.o):lw(cf),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(A){Fw(this,A);return}if(u=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),C=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Wx,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,L]of f)this.g.setRequestHeader(A,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{jw(this),this.u=!0,this.g.send(u),this.u=!1}catch(A){Fw(this,A)}};function Fw(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,Lw(u),hu(u)}function Lw(u){u.A||(u.A=!0,It(u,"complete"),It(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,It(this,"complete"),It(this,"abort"),hu(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),hu(this,!0)),je.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Vw(this):this.bb())},n.bb=function(){Vw(this)};function Vw(u){if(u.h&&typeof s<"u"&&(!u.v[1]||Hn(u)!=4||u.Z()!=2)){if(u.u&&Hn(u)==4)sw(u.Ea,0,u);else if(It(u,"readystatechange"),Hn(u)==4){u.h=!1;try{let L=u.Z();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=L===0){var C=String(u.D).match(Aw)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!Gx.test(C?C.toLowerCase():"")}f=g}if(f)It(u,"complete"),It(u,"success");else{u.m=6;try{var A=2<Hn(u)?u.g.statusText:""}catch{A=""}u.l=A+" ["+u.Z()+"]",Lw(u)}}finally{hu(u)}}}}function hu(u,d){if(u.g){jw(u);let f=u.g,g=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||It(u,"ready");try{f.onreadystatechange=g}catch{}}}function jw(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Hn(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Hn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),Tx(d)}};function Bw(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Kx(u){let d={};u=(u.g&&2<=Hn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<u.length;g++){if(q(u[g]))continue;var f=D(u[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[C]||[];d[C]=A,A.push(f)}I(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function aa(u,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[u]||d}function Uw(u){this.Aa=0,this.i=[],this.j=new Xs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=aa("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=aa("baseRetryDelayMs",5e3,u),this.cb=aa("retryDelaySeedMs",1e4,u),this.Wa=aa("forwardChannelMaxRetries",2,u),this.wa=aa("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ew(u&&u.concurrentRequestLimit),this.Da=new qx,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Uw.prototype,n.la=8,n.G=1,n.connect=function(u,d,f,g){Et(0),this.W=u,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=Yw(this,null,this.W),pu(this)};function mf(u){if($w(u),u.G==3){var d=u.U++,f=$n(u.I);if(Re(f,"SID",u.K),Re(f,"RID",d),Re(f,"TYPE","terminate"),ca(u,f),d=new gr(u,u.j,d),d.L=2,d.v=lu($n(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=Zw(d.j,null),d.g.ea(d.v)),d.F=Date.now(),au(d)}Qw(u)}function fu(u){u.g&&(vf(u),u.g.cancel(),u.g=null)}function $w(u){fu(u),u.u&&(a.clearTimeout(u.u),u.u=null),gu(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function pu(u){if(!Dw(u.h)&&!u.s){u.s=!0;var d=u.Ga;zs||ew(),Gs||(zs(),Gs=!0),Kh.add(d,u),u.B=0}}function Qx(u,d){return Cw(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Js(m(u.Ga,u,d),Kw(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let C=new gr(this,this.j,u),A=this.o;if(this.S&&(A?(A=y(A),E(A,this.S)):A=this.S),this.m!==null||this.O||(C.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=qw(this,C,d),f=$n(this.I),Re(f,"RID",u),Re(f,"CVER",22),this.D&&Re(f,"X-HTTP-Session-Id",this.D),ca(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(Ow(A)))+"&"+d:this.m&&gf(f,this.m,A)),pf(this.h,C),this.Ua&&Re(f,"TYPE","init"),this.P?(Re(f,"$req",d),Re(f,"SID","null"),C.T=!0,lf(C,f,null)):lf(C,f,d),this.G=2}}else this.G==3&&(u?Hw(this,u):this.i.length==0||Dw(this.h)||Hw(this))};function Hw(u,d){var f;d?f=d.l:f=u.U++;let g=$n(u.I);Re(g,"SID",u.K),Re(g,"RID",f),Re(g,"AID",u.T),ca(u,g),u.m&&u.o&&gf(g,u.m,u.o),f=new gr(u,u.j,f,u.B+1),u.m===null&&(f.H=u.o),d&&(u.i=d.D.concat(u.i)),d=qw(u,f,1e3),f.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),pf(u.h,f),lf(f,g,d)}function ca(u,d){u.H&&J(u.H,function(f,g){Re(d,g,f)}),u.l&&Sw({},function(f,g){Re(d,g,f)})}function qw(u,d,f){f=Math.min(u.i.length,f);var g=u.l?m(u.l.Na,u.l,u):null;e:{var C=u.i;let A=-1;for(;;){let L=["count="+f];A==-1?0<f?(A=C[0].g,L.push("ofs="+A)):A=0:L.push("ofs="+A);let be=!0;for(let ct=0;ct<f;ct++){let Ie=C[ct].g,mt=C[ct].map;if(Ie-=A,0>Ie)A=Math.max(0,C[ct].g-100),be=!1;else try{zx(mt,L,"req"+Ie+"_")}catch{g&&g(mt)}}if(be){g=L.join("&");break e}}}return u=u.i.splice(0,f),d.D=u,g}function zw(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;zs||ew(),Gs||(zs(),Gs=!0),Kh.add(d,u),u.v=0}}function yf(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Js(m(u.Fa,u),Kw(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,Gw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Js(m(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Et(10),fu(this),Gw(this))};function vf(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Gw(u){u.g=new gr(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=$n(u.qa);Re(d,"RID","rpc"),Re(d,"SID",u.K),Re(d,"AID",u.T),Re(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&Re(d,"TO",u.ja),Re(d,"TYPE","xmlhttp"),ca(u,d),u.m&&u.o&&gf(d,u.m,u.o),u.L&&(u.g.I=u.L);var f=u.g;u=u.ia,f.L=1,f.v=lu($n(d)),f.m=null,f.P=!0,_w(f,u)}n.Za=function(){this.C!=null&&(this.C=null,fu(this),yf(this),Et(19))};function gu(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Ww(u,d){var f=null;if(u.g==d){gu(u),vf(u),u.g=null;var g=2}else if(ff(u.h,d))f=d.D,Tw(u.h,d),g=1;else return;if(u.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=u.B;g=iu(),It(g,new gw(g,f)),pu(u)}else zw(u);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&Qx(u,d)||g==2&&yf(u)))switch(f&&0<f.length&&(d=u.h,d.i=d.i.concat(f)),C){case 1:ii(u,5);break;case 4:ii(u,10);break;case 3:ii(u,6);break;default:ii(u,2)}}}function Kw(u,d){let f=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(f*=2),f*d}function ii(u,d){if(u.j.info("Error code "+d),d==2){var f=m(u.fb,u),g=u.Xa;let C=!g;g=new ri(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||cu(g,"https"),lu(g),C?$x(g.toString(),f):Hx(g.toString(),f)}else Et(2);u.G=0,u.l&&u.l.sa(d),Qw(u),$w(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function Qw(u){if(u.G=0,u.ka=[],u.l){let d=bw(u.h);(d.length!=0||u.i.length!=0)&&(N(u.ka,d),N(u.ka,u.i),u.h.i.length=0,R(u.i),u.i.length=0),u.l.ra()}}function Yw(u,d,f){var g=f instanceof ri?$n(f):new ri(f);if(g.g!="")d&&(g.g=d+"."+g.g),uu(g,g.s);else{var C=a.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var A=new ri(null);g&&cu(A,g),d&&(A.g=d),C&&uu(A,C),f&&(A.l=f),g=A}return f=u.D,d=u.ya,f&&d&&Re(g,f,d),Re(g,"VER",u.la),ca(u,g),g}function Zw(u,d,f){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new je(new ia({eb:f})):new je(u.pa),d.Ha(u.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Jw(){}n=Jw.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function mu(){}mu.prototype.g=function(u,d){return new Bt(u,d)};function Bt(u,d){gt.call(this),this.g=new Uw(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!q(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!q(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new io(this)}b(Bt,gt),Bt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Bt.prototype.close=function(){mf(this.g)},Bt.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var f={};f.__data__=u,u=f}else this.u&&(f={},f.__data__=rf(u),u=f);d.i.push(new Nx(d.Ya++,u)),d.G==3&&pu(d)},Bt.prototype.N=function(){this.g.l=null,delete this.j,mf(this.g),delete this.g,Bt.aa.N.call(this)};function Xw(u){sf.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(let f in d){u=f;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}b(Xw,sf);function eI(){af.call(this),this.status=1}b(eI,af);function io(u){this.g=u}b(io,Jw),io.prototype.ua=function(){It(this.g,"a")},io.prototype.ta=function(u){It(this.g,new Xw(u))},io.prototype.sa=function(u){It(this.g,new eI)},io.prototype.ra=function(){It(this.g,"b")},mu.prototype.createWebChannel=mu.prototype.g,Bt.prototype.send=Bt.prototype.o,Bt.prototype.open=Bt.prototype.m,Bt.prototype.close=Bt.prototype.close,Jm=ir.createWebChannelTransport=function(){return new mu},Zm=ir.getStatEventTarget=function(){return iu()},Ym=ir.Event=ti,Td=ir.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ou.NO_ERROR=0,ou.TIMEOUT=8,ou.HTTP_ERROR=6,pc=ir.ErrorCode=ou,mw.COMPLETE="complete",Qm=ir.EventType=mw,dw.EventType=Ys,Ys.OPEN="a",Ys.CLOSE="b",Ys.ERROR="c",Ys.MESSAGE="d",gt.prototype.listen=gt.prototype.K,rs=ir.WebChannel=dw,BL=ir.FetchXmlHttpFactory=ia,je.prototype.listenOnce=je.prototype.L,je.prototype.getLastError=je.prototype.Ka,je.prototype.getLastErrorCode=je.prototype.Ba,je.prototype.getStatus=je.prototype.Z,je.prototype.getResponseJson=je.prototype.Oa,je.prototype.getResponseText=je.prototype.oa,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Ha,Km=ir.XhrIo=je}).apply(typeof Cd<"u"?Cd:typeof self<"u"?self:typeof window<"u"?window:{});var ET="@firebase/firestore";var et=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};et.UNAUTHENTICATED=new et(null),et.GOOGLE_CREDENTIALS=new et("google-credentials-uid"),et.FIRST_PARTY=new et("first-party-uid"),et.MOCK_USER=new et("mock-user");var ks="10.14.0";var $r=new wu("@firebase/firestore");function cs(){return $r.logLevel}function Tb(n){$r.setLogLevel(n)}function k(n,...e){if($r.logLevel<=In.DEBUG){let t=e.map(r_);$r.debug(`Firestore (${ks}): ${n}`,...t)}}function ze(n,...e){if($r.logLevel<=In.ERROR){let t=e.map(r_);$r.error(`Firestore (${ks}): ${n}`,...t)}}function mn(n,...e){if($r.logLevel<=In.WARN){let t=e.map(r_);$r.warn(`Firestore (${ks}): ${n}`,...t)}}function r_(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function z(n="Unexpected state"){let e=`FIRESTORE (${ks}) INTERNAL ASSERTION FAILED: `+n;throw ze(e),new Error(e)}function K(n,e){n||z()}function bb(n,e){n||z()}function U(n,e){return n}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},P=class extends sI{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var it=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Od=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},iy=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(et.UNAUTHENTICATED))}shutdown(){}},oy=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},sy=class{constructor(e){this.t=e,this.currentUser=et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){K(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new it;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new it,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>M(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new it)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(K(typeof r.accessToken=="string"),new Od(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return K(e===null||typeof e=="string"),new et(e)}},ay=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=et.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},cy=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new ay(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(et.FIRST_PARTY))}shutdown(){}invalidateToken(){}},uy=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},ly=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){K(this.o===void 0);let r=o=>{o.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,k("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(K(typeof t.token=="string"),this.R=t.token,new uy(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function UL(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Fd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=UL(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function ae(n,e){return n<e?-1:n>e?1:0}function ys(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Sb(n){return n+"\0"}var Le=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new P(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new P(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new P(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new P(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Y=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Le(0,0))}static max(){return new n(new Le(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Ld=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&z(),r===void 0?r=e.length-t:r>e.length-t&&z(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},_e=class n extends Ld{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new P(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},$L=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ge=class n extends Ld{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return $L.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new P(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new P(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new P(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new P(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var $=class n{constructor(e){this.path=e}static fromPath(e){return new n(_e.fromString(e))}static fromName(e){return new n(_e.fromString(e).popFirst(5))}static empty(){return new n(_e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_e.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return _e.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new _e(e.slice()))}};var vs=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function dy(n){return n.fields.find(e=>e.kind===2)}function Mi(n){return n.fields.filter(e=>e.kind!==2)}vs.UNKNOWN_ID=-1;var ps=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var bc=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,rn.min())}};function Ab(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Y.fromTimestamp(r===1e9?new Le(t+1,0):new Le(t,r));return new rn(i,$.empty(),e)}function xb(n){return new rn(n.readTime,n.key,-1)}var rn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Y.min(),$.empty(),-1)}static max(){return new n(Y.max(),$.empty(),-1)}};function i_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=$.comparator(n.documentKey,e.documentKey),t!==0?t:ae(n.largestBatchId,e.largestBatchId))}var Mb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Vd=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Jr(n){return M(this,null,function*(){if(n.code!==x.FAILED_PRECONDITION||n.message!==Mb)throw n;k("LocalStore","Unexpectedly lost primary lease")})}var S=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var jd=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new it,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Fi(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=o_(r.target.error);this.V.reject(new Fi(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new Fi(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(k("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new fy(t)}},Hr=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(ua())===12.2&&ze("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return k("SimpleDb","Removing database:",e),Ri(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!_u())return!1;if(n.v())return!0;let e=ua(),t=n.S(e),r=0<t&&t<10,i=Rb(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return M(this,null,function*(){return this.db||(k("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new Fi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new P(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new P(x.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Fi(e,s))},i.onupgradeneeded=o=>{k("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{k("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return M(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=jd.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),S.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if(k("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function Rb(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var hy=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Ri(this.B.delete())}},Fi=class extends P{constructor(e,t){super(x.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Xr(n){return n.name==="IndexedDbTransactionError"}var fy=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(k("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(k("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ri(r)}add(e){return k("SimpleDb","ADD",this.store.name,e,e),Ri(this.store.add(e))}get(e){return Ri(this.store.get(e)).next(t=>(t===void 0&&(t=null),k("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return k("SimpleDb","DELETE",this.store.name,e),Ri(this.store.delete(e))}count(){return k("SimpleDb","COUNT",this.store.name),Ri(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new S((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,c)=>{s.push(c)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new S((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){k("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new S((r,i)=>{t.onerror=o=>{let s=o_(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new S((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new hy(a),l=t(a.primaryKey,a.value,c);if(l instanceof S){let h=l.catch(p=>(c.done(),S.reject(p)));r.push(h)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>S.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Ri(n){return new S((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=o_(r.target.error);t(i)}})}var DT=!1;function o_(n){let e=Hr.S(ua());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new P("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return DT||(DT=!0,setTimeout(()=>{throw r},0)),r}}return n}var py=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){k("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>M(this,null,function*(){this.task=null;try{k("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){Xr(t)?k("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield Jr(t)}yield this.X(6e4)}))}},gy=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return M(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return S.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return k("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(k("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=xb(o);i_(s,r)>0&&(r=s)}),new rn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var zt=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Wc(n){return n==null}function Sc(n){return n===0&&1/n==-1/0}function Nb(n){return typeof n=="number"&&Number.isInteger(n)&&!Sc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Mt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=CT(e)),e=HL(n.get(t),e);return CT(e)}function HL(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function CT(n){return n+""}function Rn(n){let e=n.length;if(K(e>=2),e===2)return K(n.charAt(0)===""&&n.charAt(1)===""),_e.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&z(),n.charAt(s+1)){case"":let a=n.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:z()}o=s+2}return new _e(r)}var TT=["userId","batchId"];function Md(n,e){return[n,Mt(e)]}function Pb(n,e,t){return[n,Mt(e),t]}var qL={},zL=["prefixPath","collectionGroup","readTime","documentId"],GL=["prefixPath","collectionGroup","documentId"],WL=["collectionGroup","readTime","prefixPath","documentId"],KL=["canonicalId","targetId"],QL=["targetId","path"],YL=["path","targetId"],ZL=["collectionId","parent"],JL=["indexId","uid"],XL=["uid","sequenceNumber"],eV=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],tV=["indexId","uid","orderedDocumentKey"],nV=["userId","collectionPath","documentId"],rV=["userId","collectionPath","largestBatchId"],iV=["userId","collectionGroup","largestBatchId"],kb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],oV=[...kb,"documentOverlays"],Ob=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Fb=Ob,s_=[...Fb,"indexConfiguration","indexState","indexEntries"],sV=s_,aV=[...s_,"globals"];var Ac=class extends Vd{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function ot(n,e){let t=U(n);return Hr.F(t._e,e)}function bT(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ki(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Lb(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ne=class n{constructor(e,t){this.comparator=e,this.root=t||Pn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fs(this.root,e,this.comparator,!1)}getReverseIterator(){return new fs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fs(this.root,e,this.comparator,!0)}},fs=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Pn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();let e=this.left.check();if(e!==this.right.check())throw z();return e+(this.isRed()?0:1)}};Pn.EMPTY=null,Pn.RED=!0,Pn.BLACK=!1;Pn.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Pn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ae=class n{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Bd(this.data.getIterator())}getIteratorFrom(e){return new Bd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Bd=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function is(n){return n.hasNext()?n.getNext():void 0}var Gt=class n{constructor(e){this.fields=e,e.sort(Ge.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ae(Ge.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ys(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Ud=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function Vb(){return typeof atob<"u"}var Ke=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Ud("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ke.EMPTY_BYTE_STRING=new Ke("");var cV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ar(n){if(K(!!n),typeof n=="string"){let e=0,t=cV.exec(n);if(K(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ke(n.seconds),nanos:ke(n.nanos)}}function ke(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function qr(n){return typeof n=="string"?Ke.fromBase64String(n):Ke.fromUint8Array(n)}function Nh(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function a_(n){let e=n.mapValue.fields.__previous_value__;return Nh(e)?a_(e):e}function xc(n){let e=ar(n.mapValue.fields.__local_write_time__.timestampValue);return new Le(e.seconds,e.nanos)}var my=class{constructor(e,t,r,i,o,s,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},zr=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Br={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Rd={nullValue:"NULL_VALUE"};function Li(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Nh(n)?4:jb(n)?9007199254740991:Ph(n)?10:11:z()}function Fn(n,e){if(n===e)return!0;let t=Li(n);if(t!==Li(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return xc(n).isEqual(xc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=ar(i.timestampValue),a=ar(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return qr(i.bytesValue).isEqual(qr(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return ke(i.geoPointValue.latitude)===ke(o.geoPointValue.latitude)&&ke(i.geoPointValue.longitude)===ke(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ke(i.integerValue)===ke(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=ke(i.doubleValue),a=ke(o.doubleValue);return s===a?Sc(s)===Sc(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return ys(n.arrayValue.values||[],e.arrayValue.values||[],Fn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(bT(s)!==bT(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Fn(s[c],a[c])))return!1;return!0}(n,e);default:return z()}}function Mc(n,e){return(n.values||[]).find(t=>Fn(t,e))!==void 0}function Gr(n,e){if(n===e)return 0;let t=Li(n),r=Li(e);if(t!==r)return ae(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ae(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=ke(o.integerValue||o.doubleValue),c=ke(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return ST(n.timestampValue,e.timestampValue);case 4:return ST(xc(n),xc(e));case 5:return ae(n.stringValue,e.stringValue);case 6:return function(o,s){let a=qr(o),c=qr(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let h=ae(a[l],c[l]);if(h!==0)return h}return ae(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ae(ke(o.latitude),ke(s.latitude));return a!==0?a:ae(ke(o.longitude),ke(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return AT(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,l,h;let p=o.fields||{},m=s.fields||{},v=(a=p.value)===null||a===void 0?void 0:a.arrayValue,b=(c=m.value)===null||c===void 0?void 0:c.arrayValue,R=ae(((l=v?.values)===null||l===void 0?void 0:l.length)||0,((h=b?.values)===null||h===void 0?void 0:h.length)||0);return R!==0?R:AT(v,b)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Br.mapValue&&s===Br.mapValue)return 0;if(o===Br.mapValue)return 1;if(s===Br.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let m=ae(c[p],h[p]);if(m!==0)return m;let v=Gr(a[c[p]],l[h[p]]);if(v!==0)return v}return ae(c.length,h.length)}(n.mapValue,e.mapValue);default:throw z()}}function ST(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ae(n,e);let t=ar(n),r=ar(e),i=ae(t.seconds,r.seconds);return i!==0?i:ae(t.nanos,r.nanos)}function AT(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Gr(t[i],r[i]);if(o)return o}return ae(t.length,r.length)}function _s(n){return yy(n)}function yy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=ar(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return qr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return $.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=yy(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${yy(t.fields[s])}`;return i+"}"}(n.mapValue):z()}function Vi(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function vy(n){return!!n&&"integerValue"in n}function Rc(n){return!!n&&"arrayValue"in n}function xT(n){return!!n&&"nullValue"in n}function MT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Nd(n){return!!n&&"mapValue"in n}function Ph(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Ic(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Ki(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ic(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ic(n.arrayValue.values[t]);return e}return Object.assign({},n)}function jb(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Bb={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function uV(n){return"nullValue"in n?Rd:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Vi(zr.empty(),$.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Ph(n)?Bb:{mapValue:{}}:z()}function lV(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Vi(zr.empty(),$.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?Bb:"mapValue"in n?Ph(n)?{mapValue:{}}:Br:z()}function RT(n,e){let t=Gr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function NT(n,e){let t=Gr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var wt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Nd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ic(t)}setAll(e){let t=Ge.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Ic(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Nd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Fn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Nd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ki(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Ic(this.value))}};function Ub(n){let e=[];return Ki(n.fields,(t,r)=>{let i=new Ge([t]);if(Nd(r)){let o=Ub(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Gt(e)}var tt=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Y.min(),Y.min(),Y.min(),wt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Y.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Y.min(),Y.min(),wt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Y.min(),Y.min(),wt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ln=class{constructor(e,t){this.position=e,this.inclusive=t}};function PT(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=$.comparator($.fromName(s.referenceValue),t.key):r=Gr(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function kT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Fn(n.position[t],e.position[t]))return!1;return!0}var ji=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function dV(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var $d=class{},fe=class n extends $d{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Iy(e,t,r):t==="array-contains"?new Cy(e,r):t==="in"?new Hd(e,r):t==="not-in"?new Ty(e,r):t==="array-contains-any"?new by(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Ey(e,r):new Dy(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Gr(t,this.value)):t!==null&&Li(this.value)===Li(t)&&this.matchesComparison(Gr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Te=class n extends $d{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return ws(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function ws(n){return n.op==="and"}function _y(n){return n.op==="or"}function c_(n){return $b(n)&&ws(n)}function $b(n){for(let e of n.filters)if(e instanceof Te)return!1;return!0}function wy(n){if(n instanceof fe)return n.field.canonicalString()+n.op.toString()+_s(n.value);if(c_(n))return n.filters.map(e=>wy(e)).join(",");{let e=n.filters.map(t=>wy(t)).join(",");return`${n.op}(${e})`}}function Hb(n,e){return n instanceof fe?function(r,i){return i instanceof fe&&r.op===i.op&&r.field.isEqual(i.field)&&Fn(r.value,i.value)}(n,e):n instanceof Te?function(r,i){return i instanceof Te&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&Hb(s,i.filters[a]),!0):!1}(n,e):void z()}function qb(n,e){let t=n.filters.concat(e);return Te.create(t,n.op)}function zb(n){return n instanceof fe?function(t){return`${t.field.canonicalString()} ${t.op} ${_s(t.value)}`}(n):n instanceof Te?function(t){return t.op.toString()+" {"+t.getFilters().map(zb).join(" ,")+"}"}(n):"Filter"}var Iy=class extends fe{constructor(e,t,r){super(e,t,r),this.key=$.fromName(r.referenceValue)}matches(e){let t=$.comparator(e.key,this.key);return this.matchesComparison(t)}},Ey=class extends fe{constructor(e,t){super(e,"in",t),this.keys=Gb("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Dy=class extends fe{constructor(e,t){super(e,"not-in",t),this.keys=Gb("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Gb(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>$.fromName(r.referenceValue))}var Cy=class extends fe{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Rc(t)&&Mc(t.arrayValue,this.value)}},Hd=class extends fe{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Mc(this.value.arrayValue,t)}},Ty=class extends fe{constructor(e,t){super(e,"not-in",t)}matches(e){if(Mc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Mc(this.value.arrayValue,t)}},by=class extends fe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Rc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Mc(this.value.arrayValue,r))}};var Sy=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function Ay(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Sy(n,e,t,r,i,o,s)}function Bi(n){let e=U(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>wy(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Wc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>_s(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>_s(r)).join(",")),e.ue=t}return e.ue}function Kc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!dV(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Hb(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!kT(n.startAt,e.startAt)&&kT(n.endAt,e.endAt)}function qd(n){return $.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function zd(n,e){return n.filters.filter(t=>t instanceof fe&&t.field.isEqual(e))}function OT(n,e,t){let r=Rd,i=!0;for(let o of zd(n,e)){let s=Rd,a=!0;switch(o.op){case"<":case"<=":s=uV(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Rd}RT({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];RT({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function FT(n,e,t){let r=Br,i=!0;for(let o of zd(n,e)){let s=Br,a=!0;switch(o.op){case">=":case">":s=lV(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Br}NT({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];NT({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var yn=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Wb(n,e,t,r,i,o,s,a){return new yn(n,e,t,r,i,o,s,a)}function Os(n){return new yn(n)}function LT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function u_(n){return n.collectionGroup!==null}function gs(n){let e=U(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ae(Ge.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new ji(o,r))}),t.has(Ge.keyField().canonicalString())||e.ce.push(new ji(Ge.keyField(),r))}return e.ce}function Rt(n){let e=U(n);return e.le||(e.le=hV(e,gs(n))),e.le}function hV(n,e){if(n.limitType==="F")return Ay(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new ji(i.field,o)});let t=n.endAt?new Ln(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ln(n.startAt.position,n.startAt.inclusive):null;return Ay(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function xy(n,e){let t=n.filters.concat([e]);return new yn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Gd(n,e,t){return new yn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Qc(n,e){return Kc(Rt(n),Rt(e))&&n.limitType===e.limitType}function Kb(n){return`${Bi(Rt(n))}|lt:${n.limitType}`}function us(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>zb(i)).join(", ")}]`),Wc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>_s(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>_s(i)).join(",")),`Target(${r})`}(Rt(n))}; limitType=${n.limitType})`}function Yc(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):$.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of gs(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let l=PT(s,a,c);return s.inclusive?l<=0:l<0}(r.startAt,gs(r),i)||r.endAt&&!function(s,a,c){let l=PT(s,a,c);return s.inclusive?l>=0:l>0}(r.endAt,gs(r),i))}(n,e)}function Qb(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Yb(n){return(e,t)=>{let r=!1;for(let i of gs(n)){let o=fV(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function fV(n,e,t){let r=n.field.isKeyField()?$.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?Gr(c,l):z()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return z()}}var Vn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ki(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return Lb(this.inner)}size(){return this.innerSize}};var pV=new Ne($.comparator);function Vt(){return pV}var Zb=new Ne($.comparator);function _c(...n){let e=Zb;for(let t of n)e=e.insert(t.key,t);return e}function Jb(n){let e=Zb;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Nn(){return Ec()}function Xb(){return Ec()}function Ec(){return new Vn(n=>n.toString(),(n,e)=>n.isEqual(e))}var gV=new Ne($.comparator),mV=new Ae($.comparator);function ce(...n){let e=mV;for(let t of n)e=e.add(t);return e}var yV=new Ae(ae);function l_(){return yV}function d_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sc(e)?"-0":e}}function eS(n){return{integerValue:""+n}}function tS(n,e){return Nb(e)?eS(e):d_(n,e)}var Is=class{constructor(){this._=void 0}};function vV(n,e,t){return n instanceof Wr?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Nh(o)&&(o=a_(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof cr?rS(n,e):n instanceof ur?iS(n,e):function(i,o){let s=nS(i,o),a=VT(s)+VT(i.Pe);return vy(s)&&vy(i.Pe)?eS(a):d_(i.serializer,a)}(n,e)}function _V(n,e,t){return n instanceof cr?rS(n,e):n instanceof ur?iS(n,e):t}function nS(n,e){return n instanceof Kr?function(r){return vy(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Wr=class extends Is{},cr=class extends Is{constructor(e){super(),this.elements=e}};function rS(n,e){let t=oS(e);for(let r of n.elements)t.some(i=>Fn(i,r))||t.push(r);return{arrayValue:{values:t}}}var ur=class extends Is{constructor(e){super(),this.elements=e}};function iS(n,e){let t=oS(e);for(let r of n.elements)t=t.filter(i=>!Fn(i,r));return{arrayValue:{values:t}}}var Kr=class extends Is{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function VT(n){return ke(n.integerValue||n.doubleValue)}function oS(n){return Rc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Ui=class{constructor(e,t){this.field=e,this.transform=t}};function wV(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof cr&&i instanceof cr||r instanceof ur&&i instanceof ur?ys(r.elements,i.elements,Fn):r instanceof Kr&&i instanceof Kr?Fn(r.Pe,i.Pe):r instanceof Wr&&i instanceof Wr}(n.transform,e.transform)}var My=class{constructor(e,t){this.version=e,this.transformResults=t}},He=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Pd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Es=class{};function sS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Yr(n.key,He.none()):new Qr(n.key,n.data,He.none());{let t=n.data,r=wt.empty(),i=new Ae(Ge.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new vn(n.key,r,new Gt(i.toArray()),He.none())}}function IV(n,e,t){n instanceof Qr?function(i,o,s){let a=i.value.clone(),c=BT(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof vn?function(i,o,s){if(!Pd(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=BT(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(aS(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Dc(n,e,t,r){return n instanceof Qr?function(o,s,a,c){if(!Pd(o.precondition,s))return a;let l=o.value.clone(),h=UT(o.fieldTransforms,c,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof vn?function(o,s,a,c){if(!Pd(o.precondition,s))return a;let l=UT(o.fieldTransforms,c,s),h=s.data;return h.setAll(aS(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return Pd(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function EV(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=nS(r.transform,i||null);o!=null&&(t===null&&(t=wt.empty()),t.set(r.field,o))}return t||null}function jT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ys(r,i,(o,s)=>wV(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Qr=class extends Es{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},vn=class extends Es{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function aS(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function BT(n,e,t){let r=new Map;K(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,_V(s,a,t[i]))}return r}function UT(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,vV(o,s,e))}return r}var Yr=class extends Es{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Nc=class extends Es{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Pc=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&IV(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Dc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Dc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Xb();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=sS(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ce())}isEqual(e){return this.batchId===e.batchId&&ys(this.mutations,e.mutations,(t,r)=>jT(t,r))&&ys(this.baseMutations,e.baseMutations,(t,r)=>jT(t,r))}},Ry=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){K(e.mutations.length===r.length);let i=function(){return gV}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var kc=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Ny=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Je,ve;function cS(n){switch(n){default:return z();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function uS(n){if(n===void 0)return ze("GRPC error has no .code"),x.UNKNOWN;switch(n){case Je.OK:return x.OK;case Je.CANCELLED:return x.CANCELLED;case Je.UNKNOWN:return x.UNKNOWN;case Je.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case Je.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case Je.INTERNAL:return x.INTERNAL;case Je.UNAVAILABLE:return x.UNAVAILABLE;case Je.UNAUTHENTICATED:return x.UNAUTHENTICATED;case Je.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case Je.NOT_FOUND:return x.NOT_FOUND;case Je.ALREADY_EXISTS:return x.ALREADY_EXISTS;case Je.PERMISSION_DENIED:return x.PERMISSION_DENIED;case Je.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case Je.ABORTED:return x.ABORTED;case Je.OUT_OF_RANGE:return x.OUT_OF_RANGE;case Je.UNIMPLEMENTED:return x.UNIMPLEMENTED;case Je.DATA_LOSS:return x.DATA_LOSS;default:return z()}}(ve=Je||(Je={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";var $T=null;function lS(){return new TextEncoder}var DV=new Or([4294967295,4294967295],0);function HT(n){let e=lS().encode(n),t=new Wm;return t.update(e),new Uint8Array(t.digest())}function qT(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Or([t,r],0),new Or([i,o],0)]}var Py=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Oi(`Invalid padding: ${t}`);if(r<0)throw new Oi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Oi(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Oi(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Or.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Or.fromNumber(r)));return i.compare(DV)===1&&(i=new Or([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=HT(e),[r,i]=qT(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=HT(e),[r,i]=qT(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Oi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Oc=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Fc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Y.min(),i,new Ne(ae),Vt(),ce())}},Fc=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ce(),ce(),ce())}};var ms=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Wd=class{constructor(e,t){this.targetId=e,this.me=t}},Kd=class{constructor(e,t,r=Ke.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Qd=class{constructor(){this.fe=0,this.ge=GT(),this.pe=Ke.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ce(),t=ce(),r=ce();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:z()}}),new Fc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=GT()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,K(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},ky=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Vt(),this.qe=zT(),this.Qe=new Ne(ae)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:z()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(qd(o))if(r===0){let s=new $(o.path);this.Ue(t,s,tt.newNoDocument(s,Y.min()))}else K(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),c=a?this.Xe(a,e,s):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}$T?.et(function(h,p,m,v,b){var R,N,B,q,F,Z;let te={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},J=p.unchangedNames;return J&&(te.bloomFilter={applied:b===0,hashCount:(R=J?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:(q=(B=(N=J?.bits)===null||N===void 0?void 0:N.bitmap)===null||B===void 0?void 0:B.length)!==null&&q!==void 0?q:0,padding:(Z=(F=J?.bits)===null||F===void 0?void 0:F.padding)!==null&&Z!==void 0?Z:0,mightContain:I=>{var y;return(y=v?.mightContain(I))!==null&&y!==void 0&&y}}),te}(s,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=qr(r).toUint8Array()}catch(c){if(c instanceof Ud)return mn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Py(s,i,o)}catch(c){return mn(c instanceof Oi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&qd(a.target)){let c=new $(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,tt.newNoDocument(c,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=ce();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Oc(e,t,this.Qe,this.ke,r);return this.ke=Vt(),this.qe=zT(),this.Qe=new Ne(ae),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Qd,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ae(ae),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||k("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Qd),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function zT(){return new Ne($.comparator)}function GT(){return new Ne($.comparator)}var CV={asc:"ASCENDING",desc:"DESCENDING"},TV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bV={and:"AND",or:"OR"},Oy=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Fy(n,e){return n.useProto3Json||Wc(e)?e:{value:e}}function Ds(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function SV(n,e){return Ds(n,e.toTimestamp())}function We(n){return K(!!n),Y.fromTimestamp(function(t){let r=ar(t);return new Le(r.seconds,r.nanos)}(n))}function h_(n,e){return Ly(n,e).canonicalString()}function Ly(n,e){let t=function(i){return new _e(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function hS(n){let e=_e.fromString(n);return K(ES(e)),e}function Lc(n,e){return h_(n.databaseId,e.path)}function kn(n,e){let t=hS(e);if(t.get(1)!==n.databaseId.projectId)throw new P(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new P(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $(gS(t))}function fS(n,e){return h_(n.databaseId,e)}function pS(n){let e=hS(n);return e.length===4?_e.emptyPath():gS(e)}function Vy(n){return new _e(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function gS(n){return K(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function WT(n,e,t){return{name:Lc(n,e),fields:t.value.mapValue.fields}}function mS(n,e,t){let r=kn(n,e.name),i=We(e.updateTime),o=e.createTime?We(e.createTime):Y.min(),s=new wt({mapValue:{fields:e.fields}}),a=tt.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function AV(n,e){return"found"in e?function(r,i){K(!!i.found),i.found.name,i.found.updateTime;let o=kn(r,i.found.name),s=We(i.found.updateTime),a=i.found.createTime?We(i.found.createTime):Y.min(),c=new wt({mapValue:{fields:i.found.fields}});return tt.newFoundDocument(o,s,a,c)}(n,e):"missing"in e?function(r,i){K(!!i.missing),K(!!i.readTime);let o=kn(r,i.missing),s=We(i.readTime);return tt.newNoDocument(o,s)}(n,e):z()}function xV(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(K(h===void 0||typeof h=="string"),Ke.fromBase64String(h||"")):(K(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Ke.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?x.UNKNOWN:uS(l.code);return new P(h,l.message||"")}(s);t=new Kd(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=kn(n,r.document.name),o=We(r.document.updateTime),s=r.document.createTime?We(r.document.createTime):Y.min(),a=new wt({mapValue:{fields:r.document.fields}}),c=tt.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new ms(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=kn(n,r.document),o=r.readTime?We(r.readTime):Y.min(),s=tt.newNoDocument(i,o),a=r.removedTargetIds||[];t=new ms([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=kn(n,r.document),o=r.removedTargetIds||[];t=new ms([],o,i,null)}else{if(!("filter"in e))return z();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Ny(i,o),a=r.targetId;t=new Wd(a,s)}}return t}function Vc(n,e){let t;if(e instanceof Qr)t={update:WT(n,e.key,e.value)};else if(e instanceof Yr)t={delete:Lc(n,e.key)};else if(e instanceof vn)t={update:WT(n,e.key,e.data),updateMask:OV(e.fieldMask)};else{if(!(e instanceof Nc))return z();t={verify:Lc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Wr)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof cr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ur)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Kr)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw z()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:SV(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:z()}(n,e.precondition)),t}function jy(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?He.updateTime(We(o.updateTime)):o.exists!==void 0?He.exists(o.exists):He.none()}(e.currentDocument):He.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)K(a.setToServerValue==="REQUEST_TIME"),c=new Wr;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];c=new cr(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];c=new ur(h)}else"increment"in a?c=new Kr(s,a.increment):z();let l=Ge.fromServerFormat(a.fieldPath);return new Ui(l,c)}(n,i)):[];if(e.update){e.update.name;let i=kn(n,e.update.name),o=new wt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let l=c.fieldPaths||[];return new Gt(l.map(h=>Ge.fromServerFormat(h)))}(e.updateMask);return new vn(i,o,s,t,r)}return new Qr(i,o,t,r)}if(e.delete){let i=kn(n,e.delete);return new Yr(i,t)}if(e.verify){let i=kn(n,e.verify);return new Nc(i,t)}return z()}function MV(n,e){return n&&n.length>0?(K(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?We(i.updateTime):We(o);return s.isEqual(Y.min())&&(s=We(o)),new My(s,i.transformResults||[])}(t,e))):[]}function yS(n,e){return{documents:[fS(n,e.path)]}}function vS(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=fS(n,i);let o=function(l){if(l.length!==0)return IS(Te.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:ls(m.field),direction:NV(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=Fy(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function _S(n){let e=pS(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){K(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let m=wS(p);return m instanceof Te&&c_(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(b){return new ji(ds(b.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Wc(m)?null:m}(t.limit));let c=null;t.startAt&&(c=function(p){let m=!!p.before,v=p.values||[];return new Ln(v,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,v=p.values||[];return new Ln(v,m)}(t.endAt)),Wb(e,i,s,o,a,"F",c,l)}function RV(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function wS(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=ds(t.unaryFilter.field);return fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ds(t.unaryFilter.field);return fe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ds(t.unaryFilter.field);return fe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ds(t.unaryFilter.field);return fe.create(s,"!=",{nullValue:"NULL_VALUE"});default:return z()}}(n):n.fieldFilter!==void 0?function(t){return fe.create(ds(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return z()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Te.create(t.compositeFilter.filters.map(r=>wS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return z()}}(t.compositeFilter.op))}(n):z()}function NV(n){return CV[n]}function PV(n){return TV[n]}function kV(n){return bV[n]}function ls(n){return{fieldPath:n.canonicalString()}}function ds(n){return Ge.fromServerFormat(n.fieldPath)}function IS(n){return n instanceof fe?function(t){if(t.op==="=="){if(MT(t.value))return{unaryFilter:{field:ls(t.field),op:"IS_NAN"}};if(xT(t.value))return{unaryFilter:{field:ls(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(MT(t.value))return{unaryFilter:{field:ls(t.field),op:"IS_NOT_NAN"}};if(xT(t.value))return{unaryFilter:{field:ls(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ls(t.field),op:PV(t.op),value:t.value}}}(n):n instanceof Te?function(t){let r=t.getFilters().map(i=>IS(i));return r.length===1?r[0]:{compositeFilter:{op:kV(t.op),filters:r}}}(n):z()}function OV(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ES(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Cs=class n{constructor(e,t,r,i,o=Y.min(),s=Y.min(),a=Ke.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Yd=class{constructor(e){this.ct=e}};function FV(n,e){let t;if(e.document)t=mS(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=$.fromSegments(e.noDocument.path),i=Hi(e.noDocument.readTime);t=tt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return z();{let r=$.fromSegments(e.unknownDocument.path),i=Hi(e.unknownDocument.version);t=tt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new Le(i[0],i[1]);return Y.fromTimestamp(o)}(e.readTime)),t}function KT(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Zd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Lc(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Ds(o,s.version.toTimestamp()),createTime:Ds(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:$i(e.version)};else{if(!e.isUnknownDocument())return z();r.unknownDocument={path:t.path.toArray(),version:$i(e.version)}}return r}function Zd(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function $i(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Hi(n){let e=new Le(n.seconds,n.nanoseconds);return Y.fromTimestamp(e)}function Ni(n,e){let t=(e.baseMutations||[]).map(o=>jy(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>jy(n.ct,o)),i=Le.fromMillis(e.localWriteTimeMs);return new Pc(e.batchId,i,t,r)}function wc(n){let e=Hi(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Hi(n.lastLimboFreeSnapshotVersion):Y.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return K(o.documents.length===1),Rt(Os(pS(o.documents[0])))}(n.query):function(o){return Rt(_S(o))}(n.query),new Cs(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ke.fromBase64String(n.resumeToken))}function DS(n,e){let t=$i(e.snapshotVersion),r=$i(e.lastLimboFreeSnapshotVersion),i;i=qd(e.target)?yS(n.ct,e.target):vS(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Bi(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function f_(n){let e=_S({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Gd(e,e.limit,"L"):e}function Xm(n,e){return new kc(e.largestBatchId,jy(n.ct,e.overlayMutation))}function QT(n,e){let t=e.path.lastSegment();return[n,Mt(e.path.popLast()),t]}function YT(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:$i(r.readTime),documentKey:Mt(r.documentKey.path),largestBatchId:r.largestBatchId}}var By=class{getBundleMetadata(e,t){return ZT(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Hi(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return ZT(e).put(function(i){return{bundleId:i.id,createTime:$i(We(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return JT(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:f_(o.bundledQuery),readTime:Hi(o.readTime)}}(r)})}saveNamedQuery(e,t){return JT(e).put(function(i){return{name:i.name,readTime:$i(We(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function ZT(n){return ot(n,"bundles")}function JT(n){return ot(n,"namedQueries")}var Jd=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return gc(e).get(QT(this.userId,t)).next(r=>r?Xm(this.serializer,r):null)}getOverlays(e,t){let r=Nn();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new kc(t,s);i.push(this.ht(e,a))}),S.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(Mt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(gc(e).j("collectionPathOverlayIndex",a))}),S.waitFor(o)}getOverlaysForCollection(e,t,r){let i=Nn(),o=Mt(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return gc(e).U("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let l=Xm(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=Nn(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return gc(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,h)=>{let p=Xm(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):h.done()}).next(()=>o)}ht(e,t){return gc(e).put(function(i,o,s){let[a,c,l]=QT(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Vc(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function gc(n){return ot(n,"documentOverlays")}var Uy=class{Pt(e){return ot(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?Ke.fromUint8Array(r):Ke.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var or=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(ke(e.integerValue));else if("doubleValue"in e){let r=ke(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Sc(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=ar(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(qr(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?jb(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Ph(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):z()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(ke(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),$.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};or.vt=new or;function LV(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function XT(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=LV(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var $y=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=XT(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=XT(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},Hy=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},qy=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},Pi=class{constructor(){this.jt=new $y,this.Ht=new Hy(this.jt),this.Jt=new qy(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var ki=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function Fr(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=eb(n.arrayValue,e.arrayValue),t!==0?t:(t=eb(n.directionalValue,e.directionalValue),t!==0?t:$.comparator(n.documentKey,e.documentKey)))}function eb(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var Xd=class{constructor(e){this.Xt=new Ae((t,r)=>Ge.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(K(e.collectionGroup===this.collectionId),this.nn)return!1;let t=dy(e);if(t!==void 0&&!this.sn(t))return!1;let r=Mi(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.on(a,c)||!this._n(this.en[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Ae(Ge.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new ps(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new ps(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new ps(r.field,r.dir==="asc"?0:1)));return new vs(vs.UNKNOWN_ID,this.collectionId,t,bc.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function CS(n){var e,t;if(K(n instanceof fe||n instanceof Te),n instanceof fe){if(n instanceof Hd){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>fe.create(n.field,"==",o)))||[];return Te.create(i,"or")}return n}let r=n.filters.map(i=>CS(i));return Te.create(r,n.op)}function VV(n){if(n.getFilters().length===0)return[];let e=Wy(CS(n));return K(TS(e)),zy(e)||Gy(e)?[e]:e.getFilters()}function zy(n){return n instanceof fe}function Gy(n){return n instanceof Te&&c_(n)}function TS(n){return zy(n)||Gy(n)||function(t){if(t instanceof Te&&_y(t)){for(let r of t.getFilters())if(!zy(r)&&!Gy(r))return!1;return!0}return!1}(n)}function Wy(n){if(K(n instanceof fe||n instanceof Te),n instanceof fe)return n;if(n.filters.length===1)return Wy(n.filters[0]);let e=n.filters.map(r=>Wy(r)),t=Te.create(e,n.op);return t=eh(t),TS(t)?t:(K(t instanceof Te),K(ws(t)),K(t.filters.length>1),t.filters.reduce((r,i)=>p_(r,i)))}function p_(n,e){let t;return K(n instanceof fe||n instanceof Te),K(e instanceof fe||e instanceof Te),t=n instanceof fe?e instanceof fe?function(i,o){return Te.create([i,o],"and")}(n,e):tb(n,e):e instanceof fe?tb(e,n):function(i,o){if(K(i.filters.length>0&&o.filters.length>0),ws(i)&&ws(o))return qb(i,o.getFilters());let s=_y(i)?i:o,a=_y(i)?o:i,c=s.filters.map(l=>p_(l,a));return Te.create(c,"or")}(n,e),eh(t)}function tb(n,e){if(ws(e))return qb(e,n.getFilters());{let t=e.filters.map(r=>p_(n,r));return Te.create(t,"or")}}function eh(n){if(K(n instanceof fe||n instanceof Te),n instanceof fe)return n;let e=n.getFilters();if(e.length===1)return eh(e[0]);if($b(n))return n;let t=e.map(i=>eh(i)),r=[];return t.forEach(i=>{i instanceof fe?r.push(i):i instanceof Te&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Te.create(r,n.op)}var Ky=class{constructor(){this.un=new jc}addToCollectionParentIndex(e,t){return this.un.add(t),S.resolve()}getCollectionParents(e,t){return S.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return S.resolve()}deleteFieldIndex(e,t){return S.resolve()}deleteAllFieldIndexes(e){return S.resolve()}createTargetIndexes(e,t){return S.resolve()}getDocumentsMatchingTarget(e,t){return S.resolve(null)}getIndexType(e,t){return S.resolve(0)}getFieldIndexes(e,t){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,t){return S.resolve(rn.min())}getMinOffsetFromCollectionGroup(e,t){return S.resolve(rn.min())}updateCollectionGroup(e,t,r){return S.resolve()}updateIndexEntries(e,t){return S.resolve()}},jc=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ae(_e.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ae(_e.comparator)).toArray()}};var bd=new Uint8Array(0),Qy=class{constructor(e,t){this.databaseId=t,this.cn=new jc,this.ln=new Vn(r=>Bi(r),(r,i)=>Kc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:Mt(i)};return nb(e).put(o)}return S.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[Sb(t),""],!1,!0);return nb(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(Rn(s.parent))}return r})}addFieldIndex(e,t){let r=mc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=ss(e);return o.next(a=>{s.put(YT(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=mc(e),i=ss(e),o=os(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=mc(e),r=os(e),i=ss(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return S.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new Xd(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=os(e),i=!0,o=new Map;return S.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=ce(),a=[];return S.forEach(o,(c,l)=>{k("IndexedDbIndexManager",`Using index ${function(F){return`id=${F.indexId}|cg=${F.collectionGroup}|f=${F.fields.map(Z=>`${Z.fieldPath}:${Z.kind}`).join(",")}`}(c)} to execute ${Bi(t)}`);let h=function(F,Z){let te=dy(Z);if(te===void 0)return null;for(let J of zd(F,te.fieldPath))switch(J.op){case"array-contains-any":return J.value.arrayValue.values||[];case"array-contains":return[J.value]}return null}(l,c),p=function(F,Z){let te=new Map;for(let J of Mi(Z))for(let I of zd(F,J.fieldPath))switch(I.op){case"==":case"in":te.set(J.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return te.set(J.fieldPath.canonicalString(),I.value),Array.from(te.values())}return null}(l,c),m=function(F,Z){let te=[],J=!0;for(let I of Mi(Z)){let y=I.kind===0?OT(F,I.fieldPath,F.startAt):FT(F,I.fieldPath,F.startAt);te.push(y.value),J&&(J=y.inclusive)}return new Ln(te,J)}(l,c),v=function(F,Z){let te=[],J=!0;for(let I of Mi(Z)){let y=I.kind===0?FT(F,I.fieldPath,F.endAt):OT(F,I.fieldPath,F.endAt);te.push(y.value),J&&(J=y.inclusive)}return new Ln(te,J)}(l,c),b=this.In(c,l,m),R=this.In(c,l,v),N=this.Tn(c,l,p),B=this.En(c.indexId,h,b,m.inclusive,R,v.inclusive,N);return S.forEach(B,q=>r.G(q,t.limit).next(F=>{F.forEach(Z=>{let te=$.fromSegments(Z.documentKey);s.has(te)||(s=s.add(te),a.push(te))})}))}).next(()=>a)}return S.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=VV(Te.create(e.filters,"and")).map(r=>Ay(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let c=(t!=null?t.length:1)*Math.max(r.length,o.length),l=c/(t!=null?t.length:1),h=[];for(let p=0;p<c;++p){let m=t?this.dn(t[p/l]):bd,v=this.An(e,m,r[p%l],i),b=this.Rn(e,m,o[p%l],s),R=a.map(N=>this.An(e,m,N,!0));h.push(...this.createRange(v,b,R))}return h}An(e,t,r,i){let o=new ki(e,$.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new ki(e,$.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new Xd(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return S.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let l=new Ae(Ge.comparator),h=!1;for(let p of c.filters)for(let m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:l=l.add(m.field));for(let p of c.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new Pi;for(let i of Mi(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);or.vt.It(o,s)}return r.zt()}dn(e){let t=new Pi;return or.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new Pi;return or.vt.It(Vi(this.databaseId,t),r.Yt(function(o){let s=Mi(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new Pi);let o=0;for(let s of Mi(e)){let a=r[o++];for(let c of i)if(this.fn(t,s.fieldPath)&&Rc(a))i=this.gn(i,s,a);else{let l=c.Yt(s.kind);or.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new Pi;c.seed(a.zt()),or.vt.It(s,c.Yt(t.kind)),o.push(c)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof fe&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=mc(e),i=ss(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return S.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(h,p){let m=p?new bc(p.sequenceNumber,new rn(Hi(p.readTime),new $(Rn(p.documentKey)),p.largestBatchId)):bc.empty(),v=h.fields.map(([b,R])=>new ps(Ge.fromServerFormat(b),R));return new vs(h.indexId,h.collectionGroup,v,m)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:ae(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=mc(e),o=ss(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>S.forEach(a,c=>o.put(YT(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return S.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?S.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),S.forEach(a,c=>this.wn(e,i,c).next(l=>{let h=this.Sn(o,c);return l.isEqual(h)?S.resolve():this.bn(e,o,c,l,h)}))))})}Dn(e,t,r,i){return os(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return os(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=os(e),o=new Ae(Fr);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new ki(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new Ae(Fr),i=this.Vn(t,e);if(i==null)return r;let o=dy(t);if(o!=null){let s=e.data.field(o.fieldPath);if(Rc(s))for(let a of s.arrayValue.values||[])r=r.add(new ki(t.indexId,e.key,this.dn(a),i))}else r=r.add(new ki(t.indexId,e.key,bd,i));return r}bn(e,t,r,i,o){k("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(c,l,h,p,m){let v=c.getIterator(),b=l.getIterator(),R=is(v),N=is(b);for(;R||N;){let B=!1,q=!1;if(R&&N){let F=h(R,N);F<0?q=!0:F>0&&(B=!0)}else R!=null?q=!0:B=!0;B?(p(N),N=is(b)):q?(m(R),R=is(v)):(R=is(v),N=is(b))}}(i,o,Fr,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),S.waitFor(s)}yn(e){let t=1;return ss(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>Fr(s,a)).filter((s,a,c)=>!a||Fr(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Fr(s,e),c=Fr(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&c<0)i.push(s),i.push(s.Zt());else if(c>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,bd,[]],c=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,bd,[]];o.push(IDBKeyRange.bound(a,c))}return o}Cn(e,t){return Fr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(rb)}getMinOffset(e,t){return S.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||z())).next(rb)}};function nb(n){return ot(n,"collectionParents")}function os(n){return ot(n,"indexEntries")}function mc(n){return ot(n,"indexConfiguration")}function ss(n){return ot(n,"indexState")}function rb(n){K(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;i_(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new rn(e.readTime,e.documentKey,t)}var ib={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},nn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function bS(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,c=r.J({range:s},(h,p,m)=>(a++,m.delete()));o.push(c.next(()=>{K(a===1)}));let l=[];for(let h of t.mutations){let p=Pb(e,h.key.path,t.batchId);o.push(i.delete(p)),l.push(h.key)}return S.waitFor(o).next(()=>l)}function th(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw z();e=n.noDocument}return JSON.stringify(e).length}nn.DEFAULT_COLLECTION_PERCENTILE=10,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nn.DEFAULT=new nn(41943040,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nn.DISABLED=new nn(-1,0,0);var nh=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){K(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Lr(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=hs(e),s=Lr(e);return s.add({}).next(a=>{K(typeof a=="number");let c=new Pc(a,t,r,i),l=function(v,b,R){let N=R.baseMutations.map(q=>Vc(v.ct,q)),B=R.mutations.map(q=>Vc(v.ct,q));return{userId:b,batchId:R.batchId,localWriteTimeMs:R.localWriteTime.toMillis(),baseMutations:N,mutations:B}}(this.serializer,this.userId,c),h=[],p=new Ae((m,v)=>ae(m.canonicalString(),v.canonicalString()));for(let m of i){let v=Pb(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),h.push(s.put(l)),h.push(o.put(v,qL))}return p.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),S.waitFor(h).next(()=>c)})}lookupMutationBatch(e,t){return Lr(e).get(t).next(r=>r?(K(r.userId===this.userId),Ni(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?S.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Lr(e).J({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(K(a.batchId>=r),o=Ni(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Lr(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Lr(e).U("userMutationsIndex",t).next(r=>r.map(i=>Ni(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=Md(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return hs(e).J({range:i},(s,a,c)=>{let[l,h,p]=s,m=Rn(h);if(l===this.userId&&t.path.isEqual(m))return Lr(e).get(p).next(v=>{if(!v)throw z();K(v.userId===this.userId),o.push(Ni(this.serializer,v))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ae(ae),i=[];return t.forEach(o=>{let s=Md(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=hs(e).J({range:a},(l,h,p)=>{let[m,v,b]=l,R=Rn(v);m===this.userId&&o.path.isEqual(R)?r=r.add(b):p.done()});i.push(c)}),S.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=Md(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Ae(ae);return hs(e).J({range:s},(c,l,h)=>{let[p,m,v]=c,b=Rn(m);p===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(v)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(Lr(e).get(o).next(s=>{if(s===null)throw z();K(s.userId===this.userId),r.push(Ni(this.serializer,s))}))}),S.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return bS(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),S.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return S.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return hs(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=Rn(o[1]);i.push(c)}else a.done()}).next(()=>{K(i.length===0)})})}containsKey(e,t){return SS(e,this.userId,t)}Nn(e){return AS(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function SS(n,e,t){let r=Md(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return hs(n).J({range:o,H:!0},(a,c,l)=>{let[h,p,m]=a;h===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function Lr(n){return ot(n,"mutations")}function hs(n){return ot(n,"documentMutations")}function AS(n){return ot(n,"mutationQueues")}var Ts=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var Yy=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new Ts(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>Y.fromTimestamp(new Le(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>as(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(K(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return as(e).J((s,a)=>{let c=wc(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>S.waitFor(o)).next(()=>i)}forEachTarget(e,t){return as(e).J((r,i)=>{let o=wc(i);t(o)})}qn(e){return ob(e).get("targetGlobalKey").next(t=>(K(t!==null),t))}Qn(e,t){return ob(e).put("targetGlobalKey",t)}Kn(e,t){return as(e).put(DS(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=Bi(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return as(e).J({range:i,index:"queryTargetsIndex"},(s,a,c)=>{let l=wc(a);Kc(t,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=Vr(e);return t.forEach(s=>{let a=Mt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),S.waitFor(i)}removeMatchingKeys(e,t,r){let i=Vr(e);return S.forEach(t,o=>{let s=Mt(o.path);return S.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=Vr(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Vr(e),o=ce();return i.J({range:r,H:!0},(s,a,c)=>{let l=Rn(s[1]),h=new $(l);o=o.add(h)}).next(()=>o)}containsKey(e,t){let r=Mt(t.path),i=IDBKeyRange.bound([r],[Sb(r)],!1,!0),o=0;return Vr(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return as(e).get(t).next(r=>r?wc(r):null)}};function as(n){return ot(n,"targets")}function ob(n){return ot(n,"targetGlobal")}function Vr(n){return ot(n,"targetDocuments")}function sb([n,e],[t,r]){let i=ae(n,t);return i===0?ae(e,r):i}var Zy=class{constructor(e){this.Un=e,this.buffer=new Ae(sb),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();sb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Jy=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){k("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>M(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Xr(t)?k("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield Jr(t)}yield this.Hn(3e5)}))}},Xy=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return S.resolve(zt.oe);let r=new Zy(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(k("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(ib)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ib):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,c,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(k("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),cs()<=In.DEBUG&&k("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(l-c)+`ms
Total Duration: ${l-h}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function jV(n,e){return new Xy(n,e)}var ev=class{constructor(e,t){this.db=e,this.garbageCollector=jV(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return Sd(e,r)}removeReference(e,t,r){return Sd(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Sd(e,t)}nr(e,t){return function(i,o){let s=!1;return AS(i).Y(a=>SS(i,a,o).next(c=>(c&&(s=!0),S.resolve(!c)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let c=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,Y.min()),Vr(e).delete(function(p){return[0,Mt(p.path)]}(s))))});i.push(c)}}).next(()=>S.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Sd(e,t)}tr(e,t){let r=Vr(e),i,o=zt.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==zt.oe&&t(new $(Rn(i)),o),o=l,i=c):o=zt.oe}).next(()=>{o!==zt.oe&&t(new $(Rn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Sd(n,e){return Vr(n).put(function(r,i){return{targetId:0,path:Mt(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var rh=class{constructor(){this.changes=new Vn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,tt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?S.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var tv=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return xi(e).put(r)}removeEntry(e,t,r){return xi(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Zd(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=tt.newInvalidDocument(t);return xi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(yc(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:tt.newInvalidDocument(t)};return xi(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(yc(t))},(i,o)=>{r={document:this.ir(t,o),size:th(o)}}).next(()=>r)}getEntries(e,t){let r=Vt();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=Vt(),i=new Ne($.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,th(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return S.resolve();let i=new Ae(ub);t.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(yc(i.first()),yc(i.last())),s=i.getIterator(),a=s.getNext();return xi(e).J({index:"documentKeyIndex",range:o},(c,l,h)=>{let p=$.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&ub(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.$(yc(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),Zd(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return xi(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=Vt();for(let p of l){let m=this.ir($.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(Yc(t,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,t,r,i){let o=Vt(),s=cb(t,r),a=cb(t,rn.max());return xi(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,l,h)=>{let p=this.ir($.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new nv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return ab(e).get("remoteDocumentGlobalKey").next(t=>(K(!!t),t))}rr(e,t){return ab(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=FV(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Y.min())))return r}return tt.newInvalidDocument(e)}};function xS(n){return new tv(n)}var nv=class extends rh{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Vn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Ae((o,s)=>ae(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=KT(this.cr.serializer,s);i=i.add(o.path.popLast());let l=th(c);r+=l-a.size,t.push(this.cr.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=KT(this.cr.serializer,s.convertToNoDocument(Y.min()));t.push(this.cr.addEntry(e,o,c))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),S.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function ab(n){return ot(n,"remoteDocumentGlobal")}function xi(n){return ot(n,"remoteDocumentsV14")}function yc(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function cb(n,e){let t=e.documentKey.path.toArray();return[n,Zd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function ub(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=ae(t[o],r[o]),i)return i;return i=ae(t.length,r.length),i||(i=ae(t[t.length-2],r[r.length-2]),i||ae(t[t.length-1],r[r.length-1]))}var rv=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var ih=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Dc(r.mutation,i,Gt.empty(),Le.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ce()){let i=Nn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=_c();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Nn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ce()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Vt(),s=Ec(),a=function(){return Ec()}();return t.forEach((c,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof vn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),Dc(h.mutation,l,h.mutation.getFieldMask(),Le.now())):s.set(l.key,Gt.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new rv(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Ec(),i=new Ne((s,a)=>s-a),o=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let h=r.get(c)||Gt.empty();h=a.applyToLocalView(l,h),r.set(c,h);let p=(i.get(a.batchId)||ce()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,h=c.value,p=Xb();h.forEach(m=>{if(!o.has(m)){let v=sS(t.get(m),r.get(m));v!==null&&p.set(m,v),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return S.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return $.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):u_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):S.resolve(Nn()),a=-1,c=o;return s.next(l=>S.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?S.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,ce())).next(h=>({batchId:a,changes:Jb(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $(t)).next(r=>{let i=_c();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=_c();return this.indexManager.getCollectionParents(e,o).next(a=>S.forEach(a,c=>{let l=function(p,m){return new yn(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,tt.newInvalidDocument(h)))});let a=_c();return s.forEach((c,l)=>{let h=o.get(c);h!==void 0&&Dc(h.mutation,l,Gt.empty(),Le.now()),Yc(t,l)&&(a=a.insert(c,l))}),a})}};var iv=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return S.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:We(i.createTime)}}(t)),S.resolve()}getNamedQuery(e,t){return S.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:f_(i.bundledQuery),readTime:We(i.readTime)}}(t)),S.resolve()}};var ov=class{constructor(){this.overlays=new Ne($.comparator),this.Ir=new Map}getOverlay(e,t){return S.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Nn();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),S.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),S.resolve()}getOverlaysForCollection(e,t,r){let i=Nn(),o=t.length+1,s=new $(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return S.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ne((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Nn(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Nn(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return S.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new kc(t,r));let o=this.Ir.get(t);o===void 0&&(o=ce(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var sv=class{constructor(){this.sessionToken=Ke.EMPTY_BYTE_STRING}getSessionToken(e){return S.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,S.resolve()}};var Bc=class{constructor(){this.Tr=new Ae(Xe.Er),this.dr=new Ae(Xe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Xe(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Xe(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new $(new _e([])),r=new Xe(t,e),i=new Xe(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new $(new _e([])),r=new Xe(t,e),i=new Xe(t,e+1),o=ce();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Xe(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Xe=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return $.comparator(e.key,t.key)||ae(e.wr,t.wr)}static Ar(e,t){return ae(e.wr,t.wr)||$.comparator(e.key,t.key)}};var av=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ae(Xe.Er)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Pc(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new Xe(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(s)}lookupMutationBatch(e,t){return S.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return S.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Xe(t,0),i=new Xe(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),S.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ae(ae);return t.forEach(i=>{let o=new Xe(i,0),s=new Xe(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),S.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;$.isDocumentKey(o)||(o=o.child(""));let s=new Xe(new $(o),0),a=new Ae(ae);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},s),S.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){K(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return S.forEach(t.mutations,i=>{let o=new Xe(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Xe(t,0),i=this.br.firstAfterOrEqual(r);return S.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var cv=class{constructor(e){this.Mr=e,this.docs=function(){return new Ne($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return S.resolve(r?r.document.mutableCopy():tt.newInvalidDocument(t))}getEntries(e,t){let r=Vt();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():tt.newInvalidDocument(i))}),S.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Vt(),s=t.path,a=new $(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:h}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||i_(xb(h),r)<=0||(i.has(h.key)||Yc(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return S.resolve(o)}getAllFromCollectionGroup(e,t,r,i){z()}Or(e,t){return S.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new uv(this)}getSize(e){return S.resolve(this.size)}},uv=class extends rh{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),S.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var lv=class{constructor(e){this.persistence=e,this.Nr=new Vn(t=>Bi(t),Kc),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Bc,this.targetCount=0,this.kr=Ts.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),S.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Ts(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,S.resolve()}updateTargetData(e,t){return this.Kn(t),S.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),S.waitFor(o).next(()=>i)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return S.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),S.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),S.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),S.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return S.resolve(r)}containsKey(e,t){return S.resolve(this.Br.containsKey(t))}};var oh=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new zt(0),this.Kr=!1,this.Kr=!0,this.$r=new sv,this.referenceDelegate=e(this),this.Ur=new lv(this),this.indexManager=new Ky,this.remoteDocumentCache=function(i){return new cv(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Yd(t),this.Gr=new iv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ov,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new av(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("MemoryPersistence","Starting transaction:",e);let i=new dv(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return S.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},dv=class extends Vd{constructor(e){super(),this.currentSequenceNumber=e}},sh=class n{constructor(e){this.persistence=e,this.Jr=new Bc,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw z()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),S.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),S.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),S.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.Xr,r=>{let i=$.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,Y.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return S.or([()=>S.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var hv=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new jd("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",TT,{unique:!0}),c.createObjectStore("documentMutations")}(e),lb(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=S.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),lb(e)),s=s.next(()=>function(c){let l=c.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Y.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,l){return l.store("mutations").U().next(h=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",TT,{unique:!0});let p=l.store("mutations"),m=h.map(v=>p.put(v));return S.waitFor(m)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:nV});l.createIndex("collectionPathOverlayIndex",rV,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",iV,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:zL});l.createIndex("documentKeyIndex",GL),l.createIndex("collectionGroupIndex",WL)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:JL}).createIndex("sequenceNumberIndex",XL,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:eV}).createIndex("documentKeyIndex",tV,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=th(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>S.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>S.forEach(a,c=>{K(c.userId===o.userId);let l=Ni(this.serializer,c);return bS(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let c=new _e(s),l=function(p){return[0,Mt(p)]}(c);o.push(t.get(l).next(h=>h?S.resolve():(p=>t.put({targetId:0,path:Mt(p),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>S.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:ZL});let r=t.store("collectionParents"),i=new jc,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:Mt(c)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let c=new _e(s);return o(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,c],l)=>{let h=Rn(a);return o(h.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=wc(i),s=DS(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),c=function(p){return p.document?new $(_e.fromString(p.document.name).popFirst(5)):p.noDocument?$.fromSegments(p.noDocument.path):p.unknownDocument?$.fromSegments(p.unknownDocument.path):z()}(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>S.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=xS(this.serializer),o=new oh(sh.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(c=>{var l;let h=(l=a.get(c.userId))!==null&&l!==void 0?l:ce();Ni(this.serializer,c).keys().forEach(p=>h=h.add(p)),a.set(c.userId,h)}),S.forEach(a,(c,l)=>{let h=new et(l),p=Jd.lt(this.serializer,h),m=o.getIndexManager(h),v=nh.lt(h,this.serializer,m,o.referenceDelegate);return new ih(i,v,p,m).recalculateAndSaveOverlaysForDocumentKeys(new Ac(t,zt.oe),c).next()})})}};function lb(n){n.createObjectStore("targetDocuments",{keyPath:QL}).createIndex("documentTargetsIndex",YL,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",KL,{unique:!0}),n.createObjectStore("targetGlobal")}var ey="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",fv=class n{constructor(e,t,r,i,o,s,a,c,l,h,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=h,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!n.D())throw new P(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ev(this,i),this.Ai=t+"main",this.serializer=new Yd(c),this.Ri=new Hr(this.Ai,this.hi,new hv(this.serializer)),this.$r=new Uy,this.Ur=new Yy(this.referenceDelegate,this.serializer),this.remoteDocumentCache=xS(this.serializer),this.Gr=new By,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&ze("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new P(x.FAILED_PRECONDITION,ey);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new zt(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>M(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>M(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>M(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ad(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Xr(e))return k("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return k("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return vc(e).get("owner").next(t=>S.resolve(this.vi(t)))}Ci(e){return Ad(e).delete(this.clientId)}Fi(){return M(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=ot(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return S.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?S.resolve(!0):vc(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new P(x.FAILED_PRECONDITION,ey);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ad(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&k("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return M(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new Ac(e,zt.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Ad(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return nh.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Qy(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Jd.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(c){return c===17?aV:c===16?sV:c===15?s_:c===14?Fb:c===13?Ob:c===12?oV:c===11?kb:void z()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new Ac(a,this.Qr?this.Qr.next():zt.oe),t==="readwrite-primary"?this.wi(s).next(c=>!!c||this.Si(s)).next(c=>{if(!c)throw ze(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new P(x.FAILED_PRECONDITION,Mb);return r(s)}).next(c=>this.Di(s).next(()=>c)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return vc(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new P(x.FAILED_PRECONDITION,ey)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vc(e).put("owner",t)}static D(){return Hr.D()}bi(e){let t=vc(e);return t.get("owner").next(r=>this.vi(r)?(k("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):S.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(ze(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;Ef()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return k("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ze("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){ze("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function vc(n){return ot(n,"owner")}function Ad(n){return ot(n,"clientMetadata")}function g_(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var pv=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ce(),i=ce();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var gv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var ah=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Ef()?8:Rb(ua())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new gv;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(cs()<=In.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",us(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),S.resolve()):(cs()<=In.DEBUG&&k("QueryEngine","Query:",us(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(cs()<=In.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",us(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Rt(t))):S.resolve())}Yi(e,t){if(LT(t))return S.resolve(null);let r=Rt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Gd(t,null,"F"),r=Rt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ce(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(t,a);return this.ns(t,l,s,c.readTime)?this.Yi(e,Gd(t,null,"F")):this.rs(e,l,t,c)}))})))}Zi(e,t,r,i){return LT(t)||i.isEqual(Y.min())?S.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?S.resolve(null):(cs()<=In.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),us(t)),this.rs(e,s,t,Ab(i,-1)).next(a=>a))})}ts(e,t){let r=new Ae(Yb(e));return t.forEach((i,o)=>{Yc(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return cs()<=In.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",us(t)),this.Ji.getDocumentsMatchingQuery(e,t,rn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var mv=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Ne(ae),this._s=new Vn(o=>Bi(o),Kc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ih(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function MS(n,e,t,r){return new mv(n,e,t,r)}function RS(n,e){return M(this,null,function*(){let t=U(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=ce();for(let l of i){s.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function BV(n,e){let t=U(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,h){let p=l.batch,m=p.keys(),v=S.resolve();return m.forEach(b=>{v=v.next(()=>h.getEntry(c,b)).next(R=>{let N=l.docVersions.get(b);K(N!==null),R.version.compareTo(N)<0&&(p.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),h.addEntry(R)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(c,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ce();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function NS(n){let e=U(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function UV(n,e){let t=U(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,p)));let v=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(Ke.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),function(R,N,B){return R.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(m,v,h)&&a.push(t.Ur.updateTargetData(o,v))});let c=Vt(),l=ce();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(PS(o,s,e.documentUpdates).next(h=>{c=h.Ps,l=h.Is})),!r.isEqual(Y.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(p=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return S.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.os=i,o))}function PS(n,e,t){let r=ce(),i=ce();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Vt();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Y.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):k("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:s,Is:i}})}function $V(n,e){let t=U(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function bs(n,e){let t=U(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,S.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new Cs(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Ss(n,e,t){return M(this,null,function*(){let r=U(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Xr(s))throw s;k("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function ch(n,e,t){let r=U(n),i=Y.min(),o=ce();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,h){let p=U(c),m=p._s.get(h);return m!==void 0?S.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,s,Rt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:Y.min(),t?o:ce())).next(a=>(FS(r,Qb(e),a),{documents:a,Ts:o})))}function kS(n,e){let t=U(n),r=U(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function OS(n,e){let t=U(n),r=t.us.get(e)||Y.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,Ab(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(FS(t,e,i),i))}function FS(n,e,t){let r=n.us.get(e)||Y.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function HV(n,e,t,r){return M(this,null,function*(){let i=U(n),o=ce(),s=Vt();for(let l of t){let h=e.Es(l.metadata.name);l.document&&(o=o.add(h));let p=e.ds(l);p.setReadTime(e.As(l.metadata.readTime)),s=s.insert(h,p)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),c=yield bs(i,function(h){return Rt(Os(_e.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>PS(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Ur.addMatchingKeys(l,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.Ps,h.Is)).next(()=>h.Ps)))})}function qV(r,i){return M(this,arguments,function*(n,e,t=ce()){let o=yield bs(n,Rt(f_(e.bundledQuery))),s=U(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=We(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(Ke.EMPTY_BYTE_STRING,c);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function db(n,e){return`firestore_clients_${n}_${e}`}function hb(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function ty(n,e){return`firestore_targets_${n}_${e}`}var uh=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new P(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(ze("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Cc=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new P(r.error.code,r.error.message))),o?new n(e,r.state,i):(ze("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},lh=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=l_();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=Nb(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(ze("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},yv=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(ze("SharedClientState",`Failed to parse online state: ${e}`),null)}},Uc=class{constructor(){this.activeTargetIds=l_()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Tc=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Ne(ae),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=db(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Uc),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return M(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(db(this.persistenceKey,r));if(i){let o=lh.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(ty(this.persistenceKey,e));if(i){let o=Cc.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ty(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return k("SharedClientState","READ",e,t),t}setItem(e,t){k("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){k("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(k("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void ze("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>M(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=zt.oe;if(o!=null)try{let a=JSON.parse(o);K(typeof a=="number"),s=a}catch(a){ze("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==zt.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new uh(this.currentUser,e,t,r),o=hb(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=hb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=ty(this.persistenceKey,e),o=new Cc(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return lh.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return uh.Rs(new et(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return Cc.Rs(i,t)}Ls(e){return yv.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return M(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);k("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=l_();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},dh=class{constructor(){this.so=new Uc,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Uc,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var vv=class{_o(e){}shutdown(){}};var hh=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){k("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){k("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var xd=null;function ny(){return xd===null?xd=function(){return 268435456+Math.round(2147483648*Math.random())}():xd++,"0x"+xd.toString(16)}var zV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var _v=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var _t="WebChannelConnection",wv=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=ny(),c=this.xo(t,r.toUriEncodedString());k("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,c,l,i).then(h=>(k("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw mn("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",c,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ks}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=zV[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=ny();return new Promise((s,a)=>{let c=new Km;c.setWithCredentials(!0),c.listenOnce(Qm.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case pc.NO_ERROR:let h=c.getResponseJson();k(_t,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case pc.TIMEOUT:k(_t,`RPC '${e}' ${o} timed out`),a(new P(x.DEADLINE_EXCEEDED,"Request time out"));break;case pc.HTTP_ERROR:let p=c.getStatus();if(k(_t,`RPC '${e}' ${o} failed with status:`,p,"response text:",c.getResponseText()),p>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);let v=m?.error;if(v&&v.status&&v.message){let b=function(N){let B=N.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(B)>=0?B:x.UNKNOWN}(v.status);a(new P(b,v.message))}else a(new P(x.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new P(x.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{k(_t,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);k(_t,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=ny(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Jm(),a=Zm(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=o.join("");k(_t,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=s.createWebChannel(h,c),m=!1,v=!1,b=new _v({Io:N=>{v?k(_t,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(k(_t,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),k(_t,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},To:()=>p.close()}),R=(N,B,q)=>{N.listen(B,F=>{try{q(F)}catch(Z){setTimeout(()=>{throw Z},0)}})};return R(p,rs.EventType.OPEN,()=>{v||(k(_t,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),R(p,rs.EventType.CLOSE,()=>{v||(v=!0,k(_t,`RPC '${e}' stream ${i} transport closed`),b.So())}),R(p,rs.EventType.ERROR,N=>{v||(v=!0,mn(_t,`RPC '${e}' stream ${i} transport errored:`,N),b.So(new P(x.UNAVAILABLE,"The operation could not be completed")))}),R(p,rs.EventType.MESSAGE,N=>{var B;if(!v){let q=N.data[0];K(!!q);let F=q,Z=F.error||((B=F[0])===null||B===void 0?void 0:B.error);if(Z){k(_t,`RPC '${e}' stream ${i} received error:`,Z);let te=Z.status,J=function(w){let E=Je[w];if(E!==void 0)return uS(E)}(te),I=Z.message;J===void 0&&(J=x.INTERNAL,I="Unknown error status: "+te+" with message "+Z.message),v=!0,b.So(new P(J,I)),p.close()}else k(_t,`RPC '${e}' stream ${i} received:`,q),b.bo(q)}}),R(a,Ym.STAT_EVENT,N=>{N.stat===Td.PROXY?k(_t,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Td.NOPROXY&&k(_t,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}};function LS(){return typeof window<"u"?window:null}function kd(){return typeof document<"u"?document:null}function Zc(n){return new Oy(n,!0)}var $c=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&k("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var fh=class{constructor(e,t,r,i,o,s,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new $c(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return M(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return M(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return M(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===x.RESOURCE_EXHAUSTED?(ze(t.toString()),ze("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new P(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>M(this,null,function*(){this.state=0,this.start()}))}I_(e){return k("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(k("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Iv=class extends fh{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=xV(this.serializer,e),r=function(o){if(!("targetChange"in o))return Y.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Y.min():s.readTime?We(s.readTime):Y.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=Vy(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=qd(c)?{documents:yS(o,c)}:{query:vS(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=dS(o,s.resumeToken);let l=Fy(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(Y.min())>0){a.readTime=Ds(o,s.snapshotVersion.toTimestamp());let l=Fy(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=RV(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=Vy(this.serializer),t.removeTarget=e,this.a_(t)}},Ev=class extends fh{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return K(!!e.streamToken),this.lastStreamToken=e.streamToken,K(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){K(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=MV(e.writeResults,e.commitTime),r=We(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=Vy(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Vc(this.serializer,r))};this.a_(t)}};var Dv=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new P(x.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,Ly(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new P(x.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,Ly(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new P(x.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Cv=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ze(t),this.D_=!1):k("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Tv=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>M(this,null,function*(){ei(this)&&(k("RemoteStore","Restarting streams for network reachability change."),yield function(c){return M(this,null,function*(){let l=U(c);l.L_.add(4),yield Fs(l),l.q_.set("Unknown"),l.L_.delete(4),yield Jc(l)})}(this))}))}),this.q_=new Cv(r,i)}};function Jc(n){return M(this,null,function*(){if(ei(n))for(let e of n.B_)yield e(!0)})}function Fs(n){return M(this,null,function*(){for(let e of n.B_)yield e(!1)})}function kh(n,e){let t=U(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),v_(t)?y_(t):Vs(t).r_()&&m_(t,e))}function As(n,e){let t=U(n),r=Vs(t);t.N_.delete(e),r.r_()&&VS(t,e),t.N_.size===0&&(r.r_()?r.o_():ei(t)&&t.q_.set("Unknown"))}function m_(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Y.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Vs(n).A_(e)}function VS(n,e){n.Q_.xe(e),Vs(n).R_(e)}function y_(n){n.Q_=new ky({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Vs(n).start(),n.q_.v_()}function v_(n){return ei(n)&&!Vs(n).n_()&&n.N_.size>0}function ei(n){return U(n).L_.size===0}function jS(n){n.Q_=void 0}function GV(n){return M(this,null,function*(){n.q_.set("Online")})}function WV(n){return M(this,null,function*(){n.N_.forEach((e,t)=>{m_(n,e)})})}function KV(n,e){return M(this,null,function*(){jS(n),v_(n)?(n.q_.M_(e),y_(n)):n.q_.set("Unknown")})}function QV(n,e,t){return M(this,null,function*(){if(n.q_.set("Online"),e instanceof Kd&&e.state===2&&e.cause)try{yield function(i,o){return M(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){k("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ph(n,r)}else if(e instanceof ms?n.Q_.Ke(e):e instanceof Wd?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Y.min()))try{let r=yield NS(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let h=o.N_.get(c);if(!h)return;o.N_.set(c,h.withResumeToken(Ke.EMPTY_BYTE_STRING,h.snapshotVersion)),VS(o,c);let p=new Cs(h.target,c,l,h.sequenceNumber);m_(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){k("RemoteStore","Failed to raise snapshot:",r),yield ph(n,r)}})}function ph(n,e,t){return M(this,null,function*(){if(!Xr(e))throw e;n.L_.add(1),yield Fs(n),n.q_.set("Offline"),t||(t=()=>NS(n.localStore)),n.asyncQueue.enqueueRetryable(()=>M(this,null,function*(){k("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Jc(n)}))})}function BS(n,e){return e().catch(t=>ph(n,t,e))}function Ls(n){return M(this,null,function*(){let e=U(n),t=Zr(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;YV(e);)try{let i=yield $V(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,ZV(e,i)}catch(i){yield ph(e,i)}US(e)&&$S(e)})}function YV(n){return ei(n)&&n.O_.length<10}function ZV(n,e){n.O_.push(e);let t=Zr(n);t.r_()&&t.V_&&t.m_(e.mutations)}function US(n){return ei(n)&&!Zr(n).n_()&&n.O_.length>0}function $S(n){Zr(n).start()}function JV(n){return M(this,null,function*(){Zr(n).p_()})}function XV(n){return M(this,null,function*(){let e=Zr(n);for(let t of n.O_)e.m_(t.mutations)})}function e2(n,e,t){return M(this,null,function*(){let r=n.O_.shift(),i=Ry.from(r,e,t);yield BS(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Ls(n)})}function t2(n,e){return M(this,null,function*(){e&&Zr(n).V_&&(yield function(r,i){return M(this,null,function*(){if(function(s){return cS(s)&&s!==x.ABORTED}(i.code)){let o=r.O_.shift();Zr(r).s_(),yield BS(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Ls(r)}})}(n,e)),US(n)&&$S(n)})}function fb(n,e){return M(this,null,function*(){let t=U(n);t.asyncQueue.verifyOperationInProgress(),k("RemoteStore","RemoteStore received new credentials");let r=ei(t);t.L_.add(3),yield Fs(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Jc(t)})}function bv(n,e){return M(this,null,function*(){let t=U(n);e?(t.L_.delete(2),yield Jc(t)):e||(t.L_.add(2),yield Fs(t),t.q_.set("Unknown"))})}function Vs(n){return n.K_||(n.K_=function(t,r,i){let o=U(t);return o.w_(),new Iv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:GV.bind(null,n),Ro:WV.bind(null,n),mo:KV.bind(null,n),d_:QV.bind(null,n)}),n.B_.push(e=>M(this,null,function*(){e?(n.K_.s_(),v_(n)?y_(n):n.q_.set("Unknown")):(yield n.K_.stop(),jS(n))}))),n.K_}function Zr(n){return n.U_||(n.U_=function(t,r,i){let o=U(t);return o.w_(),new Ev(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:JV.bind(null,n),mo:t2.bind(null,n),f_:XV.bind(null,n),g_:e2.bind(null,n)}),n.B_.push(e=>M(this,null,function*(){e?(n.U_.s_(),yield Ls(n)):(yield n.U_.stop(),n.O_.length>0&&(k("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var Sv=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new it,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new P(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function js(n,e){if(ze("AsyncQueue",`${e}: ${n}`),Xr(n))return new P(x.UNAVAILABLE,`${e}: ${n}`);throw n}var gh=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$.comparator(t.key,r.key):(t,r)=>$.comparator(t.key,r.key),this.keyedMap=_c(),this.sortedSet=new Ne(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var mh=class{constructor(){this.W_=new Ne($.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):z():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},xs=class n{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,gh.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Av=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},xv=class{constructor(){this.queries=pb(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=U(t),o=i.queries;i.queries=pb(),o.forEach((s,a)=>{for(let c of a.j_)c.onError(r)})})(this,new P(x.ABORTED,"Firestore shutting down"))}};function pb(){return new Vn(n=>Kb(n),Qc)}function __(n,e){return M(this,null,function*(){let t=U(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new Av,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=js(s,`Initialization of query '${us(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&I_(t)})}function w_(n,e){return M(this,null,function*(){let t=U(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function n2(n,e){let t=U(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&I_(t)}function r2(n,e,t){let r=U(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function I_(n){n.Y_.forEach(e=>{e.next()})}var Mv,gb;(gb=Mv||(Mv={})).ea="default",gb.Cache="cache";var Hc=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new xs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=xs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Mv.Cache}};var Rv=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var yh=class{constructor(e){this.serializer=e}Es(e){return kn(this.serializer,e)}ds(e){return e.metadata.exists?mS(this.serializer,e.document,!1):tt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return We(e)}},Nv=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=HS(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=_e.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new yh(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||ce()).add(o);t.set(s,a)}}return t}complete(){return M(this,null,function*(){let e=yield HV(this.localStore,new yh(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield qV(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function HS(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var vh=class{constructor(e){this.key=e}},_h=class{constructor(e){this.key=e}},wh=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ce(),this.mutatedKeys=ce(),this.Aa=Yb(e),this.Ra=new gh(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new mh,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),v=Yc(this.query,p)?p:null,b=!!m&&this.mutatedKeys.has(m.key),R=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),N=!1;m&&v?m.data.isEqual(v.data)?b!==R&&(r.track({type:3,doc:v}),N=!0):this.ga(m,v)||(r.track({type:2,doc:v}),N=!0,(c&&this.Aa(v,c)>0||l&&this.Aa(v,l)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),N=!0):m&&!v&&(r.track({type:1,doc:m}),N=!0,(c||l)&&(a=!0)),N&&(v?(s=s.add(v),o=R?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,p)=>function(v,b){let R=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return R(v)-R(b)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,s.length!==0||l?{snapshot:new xs(this.query,e.Ra,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new mh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ce(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new _h(r))}),this.da.forEach(r=>{e.has(r)||t.push(new vh(r))}),t}ba(e){this.Ta=e.Ts,this.da=ce();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return xs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Pv=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},kv=class{constructor(e){this.key=e,this.va=!1}},Ov=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Vn(a=>Kb(a),Qc),this.Ma=new Map,this.xa=new Set,this.Oa=new Ne($.comparator),this.Na=new Map,this.La=new Bc,this.Ba={},this.ka=new Map,this.qa=Ts.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function i2(n,e,t=!0){return M(this,null,function*(){let r=Oh(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield qS(r,e,t,!0),i})}function o2(n,e){return M(this,null,function*(){let t=Oh(n);yield qS(t,e,!0,!1)})}function qS(n,e,t,r){return M(this,null,function*(){let i=yield bs(n.localStore,Rt(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield E_(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&kh(n.remoteStore,i),a})}function E_(n,e,t,r,i){return M(this,null,function*(){n.Ka=(p,m,v)=>function(R,N,B,q){return M(this,null,function*(){let F=N.view.ma(B);F.ns&&(F=yield ch(R.localStore,N.query,!1).then(({documents:I})=>N.view.ma(I,F)));let Z=q&&q.targetChanges.get(N.targetId),te=q&&q.targetMismatches.get(N.targetId)!=null,J=N.view.applyChanges(F,R.isPrimaryClient,Z,te);return Fv(R,N.targetId,J.wa),J.snapshot})}(n,p,m,v);let o=yield ch(n.localStore,e,!0),s=new wh(e,o.Ts),a=s.ma(o.documents),c=Fc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,c);Fv(n,t,l.wa);let h=new Pv(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function s2(n,e,t){return M(this,null,function*(){let r=U(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Qc(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Ss(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&As(r.remoteStore,i.targetId),Ms(r,i.targetId)}).catch(Jr))):(Ms(r,i.targetId),yield Ss(r.localStore,i.targetId,!0))})}function a2(n,e){return M(this,null,function*(){let t=U(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),As(t.remoteStore,r.targetId))})}function c2(n,e,t){return M(this,null,function*(){let r=b_(n);try{let i=yield function(s,a){let c=U(s),l=Le.now(),h=a.reduce((v,b)=>v.add(b.key),ce()),p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let b=Vt(),R=ce();return c.cs.getEntries(v,h).next(N=>{b=N,b.forEach((B,q)=>{q.isValidDocument()||(R=R.add(B))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,b)).next(N=>{p=N;let B=[];for(let q of a){let F=EV(q,p.get(q.key).overlayedDocument);F!=null&&B.push(new vn(q.key,F,Ub(F.value.mapValue),He.exists(!0)))}return c.mutationQueue.addMutationBatch(v,l,B,a)}).next(N=>{m=N;let B=N.applyToLocalDocumentSet(p,R);return c.documentOverlayCache.saveOverlays(v,N.batchId,B)})}).then(()=>({batchId:m.batchId,changes:Jb(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let l=s.Ba[s.currentUser.toKey()];l||(l=new Ne(ae)),l=l.insert(a,c),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield hr(r,i.changes),yield Ls(r.remoteStore)}catch(i){let o=js(i,"Failed to persist write");t.reject(o)}})}function zS(n,e){return M(this,null,function*(){let t=U(n);try{let r=yield UV(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(K(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?K(s.va):i.removedDocuments.size>0&&(K(s.va),s.va=!1))}),yield hr(t,r,e)}catch(r){yield Jr(r)}})}function mb(n,e,t){let r=U(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=U(s);c.onlineState=a;let l=!1;c.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&I_(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function u2(n,e,t){return M(this,null,function*(){let r=U(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new Ne($.comparator);s=s.insert(o,tt.newNoDocument(o,Y.min()));let a=ce().add(o),c=new Oc(Y.min(),new Map,new Ne(ae),s,a);yield zS(r,c),r.Oa=r.Oa.remove(o),r.Na.delete(e),T_(r)}else yield Ss(r.localStore,e,!1).then(()=>Ms(r,e,t)).catch(Jr)})}function l2(n,e){return M(this,null,function*(){let t=U(n),r=e.batch.batchId;try{let i=yield BV(t.localStore,e);C_(t,r,null),D_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield hr(t,i)}catch(i){yield Jr(i)}})}function d2(n,e,t){return M(this,null,function*(){let r=U(n);try{let i=yield function(s,a){let c=U(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(p=>(K(p!==null),h=p.keys(),c.mutationQueue.removeMutationBatch(l,p))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})}(r.localStore,e);C_(r,e,t),D_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield hr(r,i)}catch(i){yield Jr(i)}})}function h2(n,e){return M(this,null,function*(){let t=U(n);ei(t.remoteStore)||k("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=U(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=js(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function D_(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function C_(n,e,t){let r=U(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Ms(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||GS(n,r)})}function GS(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(As(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),T_(n))}function Fv(n,e,t){for(let r of t)r instanceof vh?(n.La.addReference(r.key,e),f2(n,r)):r instanceof _h?(k("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||GS(n,r.key)):z()}function f2(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(k("SyncEngine","New document in limbo: "+t),n.xa.add(r),T_(n))}function T_(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new $(_e.fromString(e)),r=n.qa.next();n.Na.set(r,new kv(t)),n.Oa=n.Oa.insert(t,r),kh(n.remoteStore,new Cs(Rt(Os(t.path)),r,"TargetPurposeLimboResolution",zt.oe))}}function hr(n,e,t){return M(this,null,function*(){let r=U(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{s.push(r.Ka(c,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(l){i.push(l);let p=pv.Wi(c.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(c,l){return M(this,null,function*(){let h=U(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>S.forEach(l,m=>S.forEach(m.$i,v=>h.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>S.forEach(m.Ui,v=>h.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!Xr(p))throw p;k("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let v=h.os.get(m),b=v.snapshotVersion,R=v.withLastLimboFreeSnapshotVersion(b);h.os=h.os.insert(m,R)}}})}(r.localStore,o))})}function p2(n,e){return M(this,null,function*(){let t=U(n);if(!t.currentUser.isEqual(e)){k("SyncEngine","User change. New user:",e.toKey());let r=yield RS(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(c=>{c.reject(new P(x.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield hr(t,r.hs)}})}function g2(n,e){let t=U(n),r=t.Na.get(e);if(r&&r.va)return ce().add(r.key);{let i=ce(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function m2(n,e){return M(this,null,function*(){let t=U(n),r=yield ch(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&Fv(t,e.targetId,i.wa),i})}function y2(n,e){return M(this,null,function*(){let t=U(n);return OS(t.localStore,e).then(r=>hr(t,r))})}function v2(n,e,t,r){return M(this,null,function*(){let i=U(n),o=yield function(a,c){let l=U(a),h=U(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.Mn(p,c).next(m=>m?l.localDocuments.getDocuments(p,m):S.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield Ls(i.remoteStore):t==="acknowledged"||t==="rejected"?(C_(i,e,r||null),D_(i,e),function(a,c){U(U(a).mutationQueue).On(c)}(i.localStore,e)):z(),yield hr(i,o)):k("SyncEngine","Cannot apply mutation batch with id: "+e)})}function _2(n,e){return M(this,null,function*(){let t=U(n);if(Oh(t),b_(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield yb(t,r.toArray());t.Qa=!0,yield bv(t.remoteStore,!0);for(let o of i)kh(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Ms(t,s),Ss(t.localStore,s,!0))),As(t.remoteStore,s)}),yield i,yield yb(t,r),function(s){let a=U(s);a.Na.forEach((c,l)=>{As(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new Ne($.comparator)}(t),t.Qa=!1,yield bv(t.remoteStore,!1)}})}function yb(n,e,t){return M(this,null,function*(){let r=U(n),i=[],o=[];for(let s of e){let a,c=r.Ma.get(s);if(c&&c.length!==0){a=yield bs(r.localStore,Rt(c[0]));for(let l of c){let h=r.Fa.get(l),p=yield m2(r,h);p.snapshot&&o.push(p.snapshot)}}else{let l=yield kS(r.localStore,s);a=yield bs(r.localStore,l),yield E_(r,WS(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function WS(n){return Wb(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function w2(n){return function(t){return U(U(t).persistence).Qi()}(U(n).localStore)}function I2(n,e,t,r){return M(this,null,function*(){let i=U(n);if(i.Qa)return void k("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield OS(i.localStore,Qb(o[0])),a=Oc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Ke.EMPTY_BYTE_STRING);yield hr(i,s,a);break}case"rejected":yield Ss(i.localStore,e,!0),Ms(i,e,r);break;default:z()}})}function E2(n,e,t){return M(this,null,function*(){let r=Oh(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){k("SyncEngine","Adding an already active target "+i);continue}let o=yield kS(r.localStore,i),s=yield bs(r.localStore,o);yield E_(r,WS(o),s.targetId,!1,s.resumeToken),kh(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield Ss(r.localStore,i,!1).then(()=>{As(r.remoteStore,i),Ms(r,i)}).catch(Jr))}})}function Oh(n){let e=U(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=zS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=g2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=u2.bind(null,e),e.Ca.d_=n2.bind(null,e.eventManager),e.Ca.$a=r2.bind(null,e.eventManager),e}function b_(n){let e=U(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=l2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=d2.bind(null,e),e}function D2(n,e,t){let r=U(n);(function(o,s,a){return M(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(v,b){let R=U(v),N=We(b.createTime);return R.persistence.runTransaction("hasNewerBundle","readonly",B=>R.Gr.getBundleMetadata(B,b.id)).then(B=>!!B&&B.createTime.compareTo(N)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(v){return{taskState:"Success",documentsLoaded:v.totalDocuments,bytesLoaded:v.totalBytes,totalDocuments:v.totalDocuments,totalBytes:v.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(HS(c));let l=new Nv(c,o.localStore,s.serializer),h=yield s.Ua();for(;h;){let m=yield l.la(h);m&&a._updateProgress(m),h=yield s.Ua()}let p=yield l.complete();return yield hr(o,p.Ia,void 0),yield function(v,b){let R=U(v);return R.persistence.runTransaction("Save bundle","readwrite",N=>R.Gr.saveBundleMetadata(N,b))}(o.localStore,c),a._completeWith(p.progress),Promise.resolve(p.Pa)}catch(c){return mn("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Lv=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return M(this,null,function*(){this.serializer=Zc(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return MS(this.persistence,new ah,t.initialUser,this.serializer)}Ga(t){return new oh(sh.Zr,this.serializer)}Wa(t){return new dh}terminate(){return M(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var Ih=class n extends Lv{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return M(this,null,function*(){yield wf(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield b_(this.Ja.syncEngine),yield Ls(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return MS(this.persistence,new ah,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new Jy(r,e.asyncQueue,t)}Ha(e,t){let r=new gy(t,this.persistence);return new py(e.asyncQueue,r)}Ga(e){let t=g_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?nn.withCacheSize(this.cacheSizeBytes):nn.DEFAULT;return new fv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,LS(),kd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new dh}},Vv=class n extends Ih{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return M(this,null,function*(){yield wf(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof Tc&&(this.sharedClientState.syncEngine={no:v2.bind(null,t),ro:I2.bind(null,t),io:E2.bind(null,t),Qi:w2.bind(null,t),eo:y2.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>M(this,null,function*(){yield _2(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=LS();if(!Tc.D(t))throw new P(x.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=g_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Tc(t,e.asyncQueue,r,e.clientId,e.initialUser)}},S_=(()=>{class n{initialize(t,r){return M(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>mb(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=p2.bind(null,this.syncEngine),yield bv(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new xv}()}createDatastore(t){let r=Zc(t.databaseInfo.databaseId),i=function(s){return new wv(s)}(t.databaseInfo);return function(s,a,c,l){return new Dv(s,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new Tv(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>mb(this.syncEngine,r,0),function(){return hh.D()?new hh:new vv}())}createSyncEngine(t,r){return function(o,s,a,c,l,h,p){let m=new Ov(o,s,a,c,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return M(this,null,function*(){var t,r;yield function(o){return M(this,null,function*(){let s=U(o);k("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield Fs(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function vb(n,e=10240){let t=0;return{read(){return M(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return M(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Rs=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ze("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var jv=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new it,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return M(this,null,function*(){return this.metadata.promise})}Ua(){return M(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return M(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new Rv(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return M(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return M(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return M(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var Bv=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return M(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new P(x.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return M(this,null,function*(){let s=U(i),a={documents:o.map(p=>Lc(s.serializer,p))},c=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,_e.emptyPath(),a,o.length),l=new Map;c.forEach(p=>{let m=AV(s.serializer,p);l.set(m.key.toString(),m)});let h=[];return o.forEach(p=>{let m=l.get(p.toString());K(!!m),h.push(m)}),h})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Yr(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return M(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=$.fromPath(r);this.mutations.push(new Nc(i,this.precondition(i)))}),yield function(r,i){return M(this,null,function*(){let o=U(r),s={writes:i.map(a=>Vc(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,_e.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw z();t=Y.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new P(x.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Y.min())?He.exists(!1):He.updateTime(t):He.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Y.min()))throw new P(x.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return He.updateTime(t)}return He.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var Uv=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new $c(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>M(this,null,function*(){let e=new Bv(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!Wc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!cS(t)}return!1}};var $v=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=et.UNAUTHENTICATED,this.clientId=Fd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>M(this,null,function*(){k("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(k("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new it;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>M(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=js(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function ry(n,e){return M(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),k("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>M(this,null,function*(){r.isEqual(i)||(yield RS(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function _b(n,e){return M(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield A_(n);k("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>fb(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>fb(e.remoteStore,i)),n._onlineComponents=e})}function A_(n){return M(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){k("FirestoreClient","Using user provided OfflineComponentProvider");try{yield ry(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===x.FAILED_PRECONDITION||i.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;mn("Error using user provided cache. Falling back to memory cache: "+t),yield ry(n,new Lv)}}else k("FirestoreClient","Using default OfflineComponentProvider"),yield ry(n,new Lv);return n._offlineComponents})}function Fh(n){return M(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(k("FirestoreClient","Using user provided OnlineComponentProvider"),yield _b(n,n._uninitializedComponentsProvider._online)):(k("FirestoreClient","Using default OnlineComponentProvider"),yield _b(n,new S_))),n._onlineComponents})}function KS(n){return A_(n).then(e=>e.persistence)}function x_(n){return A_(n).then(e=>e.localStore)}function QS(n){return Fh(n).then(e=>e.remoteStore)}function M_(n){return Fh(n).then(e=>e.syncEngine)}function C2(n){return Fh(n).then(e=>e.datastore)}function Ns(n){return M(this,null,function*(){let e=yield Fh(n),t=e.eventManager;return t.onListen=i2.bind(null,e.syncEngine),t.onUnlisten=s2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=o2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=a2.bind(null,e.syncEngine),t})}function T2(n){return n.asyncQueue.enqueue(()=>M(this,null,function*(){let e=yield KS(n),t=yield QS(n);return e.setNetworkEnabled(!0),function(i){let o=U(i);return o.L_.delete(0),Jc(o)}(t)}))}function b2(n){return n.asyncQueue.enqueue(()=>M(this,null,function*(){let e=yield KS(n),t=yield QS(n);return e.setNetworkEnabled(!1),function(i){return M(this,null,function*(){let o=U(i);o.L_.add(0),yield Fs(o),o.q_.set("Offline")})}(t)}))}function S2(n,e){let t=new it;return n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(i,o,s){return M(this,null,function*(){try{let a=yield function(l,h){let p=U(l);return p.persistence.runTransaction("read document","readonly",m=>p.localDocuments.getDocument(m,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new P(x.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=js(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield x_(n),e,t)})),t.promise}function YS(n,e,t={}){let r=new it;return n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(o,s,a,c,l){let h=new Rs({next:m=>{h.Za(),s.enqueueAndForget(()=>w_(o,p));let v=m.docs.has(a);!v&&m.fromCache?l.reject(new P(x.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&c&&c.source==="server"?l.reject(new P(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Hc(Os(a.path),h,{includeMetadataChanges:!0,_a:!0});return __(o,p)}(yield Ns(n),n.asyncQueue,e,t,r)})),r.promise}function A2(n,e){let t=new it;return n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(i,o,s){return M(this,null,function*(){try{let a=yield ch(i,o,!0),c=new wh(o,a.Ts),l=c.ma(a.documents),h=c.applyChanges(l,!1);s.resolve(h.snapshot)}catch(a){let c=js(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield x_(n),e,t)})),t.promise}function ZS(n,e,t={}){let r=new it;return n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(o,s,a,c,l){let h=new Rs({next:m=>{h.Za(),s.enqueueAndForget(()=>w_(o,p)),m.fromCache&&c.source==="server"?l.reject(new P(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Hc(a,h,{includeMetadataChanges:!0,_a:!0});return __(o,p)}(yield Ns(n),n.asyncQueue,e,t,r)})),r.promise}function x2(n,e){let t=new Rs(e);return n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(i,o){U(i).Y_.add(o),o.next()}(yield Ns(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(i,o){U(i).Y_.delete(o)}(yield Ns(n),t)}))}}function M2(n,e,t,r){let i=function(s,a){let c;return c=typeof s=="string"?lS().encode(s):s,function(h,p){return new jv(h,p)}(function(h,p){if(h instanceof Uint8Array)return vb(h,p);if(h instanceof ArrayBuffer)return vb(new Uint8Array(h),p);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(t,Zc(e));n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){D2(yield M_(n),i,r)}))}function R2(n,e){return n.asyncQueue.enqueue(()=>M(this,null,function*(){return function(r,i){let o=U(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield x_(n),e)}))}function JS(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var wb=new Map;function R_(n,e,t){if(!t)throw new P(x.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function N_(n,e,t,r){if(e===!0&&r===!0)throw new P(x.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Ib(n){if(!$.isDocumentKey(n))throw new P(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Eb(n){if($.isDocumentKey(n))throw new P(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Lh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":z()}function we(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new P(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Lh(n);throw new P(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function XS(n,e){if(e<=0)throw new P(x.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var Eh=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new P(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new P(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}N_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},qi=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Eh({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new P(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new P(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Eh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new iy;switch(r.type){case"firstParty":return new cy(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new P(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return M(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=wb.get(t);r&&(k("ComponentProvider","Removing Datastore"),wb.delete(t),r.terminate())}(this),Promise.resolve()}};function eA(n,e,t,r={}){var i;let o=(n=we(n,qi))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&mn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=et.MOCK_USER;else{a=oI(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new P(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new et(l)}n._authCredentials=new oy(new Od(a,c))}}var ht=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Me=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new On(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},On=class n extends ht{constructor(e,t,r){super(e,t,Os(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Me(this.firestore,null,new $(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function P_(n,e,...t){if(n=Oe(n),R_("collection","path",e),n instanceof qi){let r=_e.fromString(e,...t);return Eb(r),new On(n,null,r)}{if(!(n instanceof Me||n instanceof On))throw new P(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(_e.fromString(e,...t));return Eb(r),new On(n.firestore,null,r)}}function tA(n,e){if(n=we(n,qi),R_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new P(x.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ht(n,null,function(r){return new yn(_e.emptyPath(),r)}(e))}function Xc(n,e,...t){if(n=Oe(n),arguments.length===1&&(e=Fd.newId()),R_("doc","path",e),n instanceof qi){let r=_e.fromString(e,...t);return Ib(r),new Me(n,null,new $(r))}{if(!(n instanceof Me||n instanceof On))throw new P(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(_e.fromString(e,...t));return Ib(r),new Me(n.firestore,n instanceof On?n.converter:null,new $(r))}}function k_(n,e){return n=Oe(n),e=Oe(e),(n instanceof Me||n instanceof On)&&(e instanceof Me||e instanceof On)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function O_(n,e){return n=Oe(n),e=Oe(e),n instanceof ht&&e instanceof ht&&n.firestore===e.firestore&&Qc(n._query,e._query)&&n.converter===e.converter}var Dh=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new $c(this,"async_queue_retry"),this.Vu=()=>{let r=kd();r&&k("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=kd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=kd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new it;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return M(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Xr(e))throw e;k("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw ze("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=Sv.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&z()}verifyOperationInProgress(){}wu(){return M(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function Hv(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var qv=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new it,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var nA=-1,Ve=class extends qi{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Dh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return M(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Dh(e),this._firestoreClient=void 0,yield e}})}};function ft(n){if(n._terminated)throw new P(x.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||rA(n),n._firestoreClient}function rA(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,l,h){return new my(a,c,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,JS(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new $v(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}function iA(n,e){mn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return sA(n,S_.provider,{build:r=>new Ih(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function oA(n){return M(this,null,function*(){mn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();sA(n,S_.provider,{build:t=>new Vv(t,e.cacheSizeBytes)})})}function sA(n,e,t){if((n=we(n,Ve))._firestoreClient||n._terminated)throw new P(x.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new P(x.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},rA(n)}function aA(n){if(n._initialized&&!n._terminated)throw new P(x.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new it;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>M(this,null,function*(){try{yield function(r){return M(this,null,function*(){if(!Hr.D())return Promise.resolve();let i=r+"main";yield Hr.delete(i)})}(g_(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function cA(n){return function(t){let r=new it;return t.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return h2(yield M_(t),r)})),r.promise}(ft(n=we(n,Ve)))}function uA(n){return T2(ft(n=we(n,Ve)))}function lA(n){return b2(ft(n=we(n,Ve)))}function dA(n,e){let t=ft(n=we(n,Ve)),r=new qv;return M2(t,n._databaseId,e,r),r}function hA(n,e){return R2(ft(n=we(n,Ve)),e).then(t=>t?new ht(n,null,t.query):null)}var jn=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Ke.fromBase64String(e))}catch(t){throw new P(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Ke.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var _n=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new P(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ge(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var lr=class{constructor(e){this._methodName=e}};var zi=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new P(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new P(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}};var qc=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var N2=/^__.*__$/,zv=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new vn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Qr(e,this.data,t,this.fieldTransforms)}},Ch=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new vn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function fA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z()}}var Th=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return bh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(fA(this.Cu)&&N2.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},Gv=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Zc(e)}Qu(e,t,r,i=!1){return new Th({Cu:e,methodName:t,qu:r,path:Ge.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Qi(n){let e=n._freezeSettings(),t=Zc(n._databaseId);return new Gv(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Vh(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);V_("Data must be an object, but it was:",s,r);let a=mA(r,s),c,l;if(o.merge)c=new Gt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=Zv(e,p,t);if(!s.contains(m))throw new P(x.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);vA(h,m)||h.push(m)}c=new Gt(h),l=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,l=s.fieldTransforms;return new zv(new wt(a),c,l)}var zc=class n extends lr{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function pA(n,e,t){return new Th({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Wv=class n extends lr{_toFieldTransform(e){return new Ui(e.path,new Wr)}isEqual(e){return e instanceof n}},Kv=class n extends lr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=pA(this,e,!0),r=this.Ku.map(o=>Yi(o,t)),i=new cr(r);return new Ui(e.path,i)}isEqual(e){return e instanceof n&&Df(this.Ku,e.Ku)}},Qv=class n extends lr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=pA(this,e,!0),r=this.Ku.map(o=>Yi(o,t)),i=new ur(r);return new Ui(e.path,i)}isEqual(e){return e instanceof n&&Df(this.Ku,e.Ku)}},Yv=class n extends lr{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new Kr(e.serializer,tS(e.serializer,this.$u));return new Ui(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function F_(n,e,t,r){let i=n.Qu(1,e,t);V_("Data must be an object, but it was:",i,r);let o=[],s=wt.empty();Ki(r,(c,l)=>{let h=j_(e,c,t);l=Oe(l);let p=i.Nu(h);if(l instanceof zc)o.push(h);else{let m=Yi(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new Gt(o);return new Ch(s,a,i.fieldTransforms)}function L_(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[Zv(e,r,t)],c=[i];if(o.length%2!=0)throw new P(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(Zv(e,o[m])),c.push(o[m+1]);let l=[],h=wt.empty();for(let m=a.length-1;m>=0;--m)if(!vA(l,a[m])){let v=a[m],b=c[m];b=Oe(b);let R=s.Nu(v);if(b instanceof zc)l.push(v);else{let N=Yi(b,R);N!=null&&(l.push(v),h.set(v,N))}}let p=new Gt(l);return new Ch(h,p,s.fieldTransforms)}function gA(n,e,t,r=!1){return Yi(t,n.Qu(r?4:3,e))}function Yi(n,e){if(yA(n=Oe(n)))return V_("Unsupported field value:",e,n),mA(n,e);if(n instanceof lr)return function(r,i){if(!fA(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=Yi(a,i.Lu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Oe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return tS(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Le.fromDate(r);return{timestampValue:Ds(i.serializer,o)}}if(r instanceof Le){let o=new Le(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ds(i.serializer,o)}}if(r instanceof zi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof jn)return{bytesValue:dS(i.serializer,r._byteString)};if(r instanceof Me){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:h_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof qc)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return d_(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Lh(r)}`)}(n,e)}function mA(n,e){let t={};return Lb(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ki(n,(r,i)=>{let o=Yi(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function yA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Le||n instanceof zi||n instanceof jn||n instanceof Me||n instanceof lr||n instanceof qc)}function V_(n,e,t){if(!yA(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Lh(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function Zv(n,e,t){if((e=Oe(e))instanceof _n)return e._internalPath;if(typeof e=="string")return j_(n,e);throw bh("Field path arguments must be of type string or ",n,!1,void 0,t)}var P2=new RegExp("[~\\*/\\[\\]]");function j_(n,e,t){if(e.search(P2)>=0)throw bh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new _n(...e.split("."))._internalPath}catch{throw bh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function bh(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new P(x.INVALID_ARGUMENT,a+n+c)}function vA(n,e){return n.some(t=>t.isEqual(e))}var Gi=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Me(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Jv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(jh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Jv=class extends Gi{data(){return super.data()}};function jh(n,e){return typeof e=="string"?j_(n,e):e instanceof _n?e._internalPath:e._delegate._internalPath}function _A(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new P(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Gc=class{},Wi=class extends Gc{};function fr(n,e,...t){let r=[];e instanceof Gc&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof Xv).length,a=o.filter(c=>c instanceof Sh).length;if(s>1||s>0&&a>0)throw new P(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Sh=class n extends Wi{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return xA(e._query,t),new ht(e.firestore,e.converter,xy(e._query,t))}_parse(e){let t=Qi(e.firestore);return function(o,s,a,c,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new P(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Cb(p,h);let v=[];for(let b of p)v.push(Db(c,o,b));m={arrayValue:{values:v}}}else m=Db(c,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Cb(p,h),m=gA(a,s,p,h==="in"||h==="not-in");return fe.create(l,h,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function wA(n,e,t){let r=e,i=jh("where",n);return Sh._create(i,r,t)}var Xv=class n extends Gc{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Te.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)xA(s,c),s=xy(s,c)}(e._query,t),new ht(e.firestore,e.converter,xy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var e_=class n extends Wi{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new P(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new P(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ji(o,s)}(e._query,this._field,this._direction);return new ht(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new yn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function IA(n,e="asc"){let t=e,r=jh("orderBy",n);return e_._create(r,t)}var Ah=class n extends Wi{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new ht(e.firestore,e.converter,Gd(e._query,this._limit,this._limitType))}};function EA(n){return XS("limit",n),Ah._create("limit",n,"F")}function DA(n){return XS("limitToLast",n),Ah._create("limitToLast",n,"L")}var xh=class n extends Wi{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=AA(e,this.type,this._docOrFields,this._inclusive);return new ht(e.firestore,e.converter,function(i,o){return new yn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function CA(...n){return xh._create("startAt",n,!0)}function TA(...n){return xh._create("startAfter",n,!1)}var Mh=class n extends Wi{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=AA(e,this.type,this._docOrFields,this._inclusive);return new ht(e.firestore,e.converter,function(i,o){return new yn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function bA(...n){return Mh._create("endBefore",n,!1)}function SA(...n){return Mh._create("endAt",n,!0)}function AA(n,e,t,r){if(t[0]=Oe(t[0]),t[0]instanceof Gi)return function(o,s,a,c,l){if(!c)throw new P(x.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let p of gs(o))if(p.field.isKeyField())h.push(Vi(s,c.key));else{let m=c.data.field(p.field);if(Nh(m))throw new P(x.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let v=p.field.canonicalString();throw new P(x.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}h.push(m)}return new Ln(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Qi(n.firestore);return function(s,a,c,l,h,p){let m=s.explicitOrderBy;if(h.length>m.length)throw new P(x.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let v=[];for(let b=0;b<h.length;b++){let R=h[b];if(m[b].field.isKeyField()){if(typeof R!="string")throw new P(x.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof R}`);if(!u_(s)&&R.indexOf("/")!==-1)throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${R}' contains a slash.`);let N=s.path.child(_e.fromString(R));if(!$.isDocumentKey(N))throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);let B=new $(N);v.push(Vi(a,B))}else{let N=gA(c,l,R);v.push(N)}}return new Ln(v,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function Db(n,e,t){if(typeof(t=Oe(t))=="string"){if(t==="")throw new P(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!u_(e)&&t.indexOf("/")!==-1)throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(_e.fromString(t));if(!$.isDocumentKey(r))throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Vi(n,new $(r))}if(t instanceof Me)return Vi(n,t._key);throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Lh(t)}.`)}function Cb(n,e){if(!Array.isArray(n)||n.length===0)throw new P(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xA(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new P(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new P(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Ps=class{convertValue(e,t="none"){switch(Li(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw z()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Ki(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>ke(s.doubleValue));return new qc(o)}convertGeoPoint(e){return new zi(ke(e.latitude),ke(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=a_(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(xc(e));default:return null}}convertTimestamp(e){let t=ar(e);return new Le(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=_e.fromString(e);K(ES(r));let i=new zr(r.get(1),r.get(3)),o=new $(r.popFirst(5));return i.isEqual(t)||ze(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Bh(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var t_=class extends Ps{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Me(this.firestore,null,t)}};var sr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},on=class extends Gi{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ur(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(jh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Ur=class extends on{data(e={}){return super.data(e)}},wn=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new sr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ur(this._firestore,this._userDataWriter,r.key,r,new sr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new P(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new Ur(i._firestore,i._userDataWriter,a.doc.key,a.doc,new sr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Ur(i._firestore,i._userDataWriter,a.doc.key,a.doc,new sr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:k2(a.type),doc:c,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function k2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z()}}function B_(n,e){return n instanceof on&&e instanceof on?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof wn&&e instanceof wn&&n._firestore===e._firestore&&O_(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function MA(n){n=we(n,Me);let e=we(n.firestore,Ve);return YS(ft(e),n._key).then(t=>q_(e,n,t))}var dr=class extends Ps{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Me(this.firestore,null,t)}};function RA(n){n=we(n,Me);let e=we(n.firestore,Ve),t=ft(e),r=new dr(e);return S2(t,n._key).then(i=>new on(e,r,n._key,i,new sr(i!==null&&i.hasLocalMutations,!0),n.converter))}function NA(n){n=we(n,Me);let e=we(n.firestore,Ve);return YS(ft(e),n._key,{source:"server"}).then(t=>q_(e,n,t))}function PA(n){n=we(n,ht);let e=we(n.firestore,Ve),t=ft(e),r=new dr(e);return _A(n._query),ZS(t,n._query).then(i=>new wn(e,r,n,i))}function kA(n){n=we(n,ht);let e=we(n.firestore,Ve),t=ft(e),r=new dr(e);return A2(t,n._query).then(i=>new wn(e,r,n,i))}function OA(n){n=we(n,ht);let e=we(n.firestore,Ve),t=ft(e),r=new dr(e);return ZS(t,n._query,{source:"server"}).then(i=>new wn(e,r,n,i))}function U_(n,e,t){n=we(n,Me);let r=we(n.firestore,Ve),i=Bh(n.converter,e,t);return Bs(r,[Vh(Qi(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,He.none())])}function $_(n,e,t,...r){n=we(n,Me);let i=we(n.firestore,Ve),o=Qi(i),s;return s=typeof(e=Oe(e))=="string"||e instanceof _n?L_(o,"updateDoc",n._key,e,t,r):F_(o,"updateDoc",n._key,e),Bs(i,[s.toMutation(n._key,He.exists(!0))])}function FA(n){return Bs(we(n.firestore,Ve),[new Yr(n._key,He.none())])}function LA(n,e){let t=we(n.firestore,Ve),r=Xc(n),i=Bh(n.converter,e);return Bs(t,[Vh(Qi(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,He.exists(!1))]).then(()=>r)}function H_(n,...e){var t,r,i;n=Oe(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Hv(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Hv(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let c,l,h;if(n instanceof Me)l=we(n.firestore,Ve),h=Os(n._key.path),c={next:p=>{e[s]&&e[s](q_(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=we(n,ht);l=we(p.firestore,Ve),h=p._query;let m=new dr(l);c={next:v=>{e[s]&&e[s](new wn(l,m,p,v))},error:e[s+1],complete:e[s+2]},_A(n._query)}return function(m,v,b,R){let N=new Rs(R),B=new Hc(v,N,b);return m.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return __(yield Ns(m),B)})),()=>{N.Za(),m.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return w_(yield Ns(m),B)}))}}(ft(l),h,a,c)}function VA(n,e){return x2(ft(n=we(n,Ve)),Hv(e)?e:{next:e})}function Bs(n,e){return function(r,i){let o=new it;return r.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return c2(yield M_(r),i,o)})),o.promise}(ft(n),e)}function q_(n,e,t){let r=t.docs.get(e._key),i=new dr(n);return new on(n,i,e._key,r,new sr(t.hasPendingWrites,t.fromCache),e.converter)}var O2={maxAttempts:5};var Rh=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Qi(e)}set(e,t,r){this._verifyNotCommitted();let i=jr(e,this._firestore),o=Bh(i.converter,t,r),s=Vh(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,He.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=jr(e,this._firestore),s;return s=typeof(t=Oe(t))=="string"||t instanceof _n?L_(this._dataReader,"WriteBatch.update",o._key,t,r,i):F_(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,He.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=jr(e,this._firestore);return this._mutations=this._mutations.concat(new Yr(t._key,He.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new P(x.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function jr(n,e){if((n=Oe(n)).firestore!==e)throw new P(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var n_=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Qi(t)}get(t){let r=jr(t,this._firestore),i=new t_(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return z();let s=o[0];if(s.isFoundDocument())return new Gi(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Gi(this._firestore,i,r._key,null,r.converter);throw z()})}set(t,r,i){let o=jr(t,this._firestore),s=Bh(o.converter,r,i),a=Vh(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=jr(t,this._firestore),a;return a=typeof(r=Oe(r))=="string"||r instanceof _n?L_(this._dataReader,"Transaction.update",s._key,r,i,o):F_(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=jr(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=jr(e,this._firestore),r=new dr(this._firestore);return super.get(e).then(i=>new on(this._firestore,r,t._key,i._document,new sr(!1,!1),t.converter))}};function jA(n,e,t){n=we(n,Ve);let r=Object.assign(Object.assign({},O2),t);return function(o){if(o.maxAttempts<1)throw new P(x.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new it;return o.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){let l=yield C2(o);new Uv(o.asyncQueue,l,a,s,c).au()})),c.promise}(ft(n),i=>e(new n_(n,i)),r)}function BA(){return new zc("deleteField")}function UA(){return new Wv("serverTimestamp")}function $A(...n){return new Kv("arrayUnion",n)}function HA(...n){return new Qv("arrayRemove",n)}function qA(n){return new Yv("increment",n)}(function(e,t=!0){(function(i){ks=i})(cI),la(new oi("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Ve(new sy(r.getProvider("auth-internal")),new ly(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new P(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zr(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),vr(ET,"4.7.3",e),vr(ET,"4.7.3","esm2017")})();var F2="@firebase/firestore-compat",L2="0.3.38";function Y_(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new P("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function zA(){if(typeof Uint8Array>"u")throw new P("unimplemented","Uint8Arrays are not available in this environment.")}function GA(){if(!Vb())throw new P("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Uh=class n{constructor(e){this._delegate=e}static fromBase64String(e){return GA(),new n(jn.fromBase64String(e))}static fromUint8Array(e){return zA(),new n(jn.fromUint8Array(e))}toBase64(){return GA(),this._delegate.toBase64()}toUint8Array(){return zA(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function z_(n){return V2(n,["next","error","complete"])}function V2(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var G_=class{enableIndexedDbPersistence(e,t){return iA(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return oA(e._delegate)}clearIndexedDbPersistence(e){return aA(e._delegate)}},$h=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof zr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&mn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){eA(this._delegate,e,t,r)}enableNetwork(){return uA(this._delegate)}disableNetwork(){return lA(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,N_("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return cA(this._delegate)}onSnapshotsInSync(e){return VA(this._delegate,e)}get app(){if(!this._appCompat)throw new P("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Hs(this,P_(this._delegate,e))}catch(t){throw Nt(t,"collection()","Firestore.collection()")}}doc(e){try{return new Bn(this,Xc(this._delegate,e))}catch(t){throw Nt(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new eo(this,tA(this._delegate,e))}catch(t){throw Nt(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return jA(this._delegate,t=>e(new Hh(this,t)))}batch(){return ft(this._delegate),new qh(new Rh(this._delegate,e=>Bs(this._delegate,e)))}loadBundle(e){return dA(this._delegate,e)}namedQuery(e){return hA(this._delegate,e).then(t=>t?new eo(this,t):null)}},Us=class extends Ps{constructor(e){super(),this.firestore=e}convertBytes(e){return new Uh(new jn(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return Bn.forKey(t,this.firestore,null)}};function j2(n){Tb(n)}var Hh=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Us(e)}get(e){let t=Zi(e);return this._delegate.get(t).then(r=>new Ji(this._firestore,new on(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=Zi(e);return r?(Y_("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Zi(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Zi(e);return this._delegate.delete(t),this}},qh=class{constructor(e){this._delegate=e}set(e,t,r){let i=Zi(e);return r?(Y_("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Zi(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Zi(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},$s=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new Ur(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Xi(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new Us(e),t),i.set(t,o)),o}};$s.INSTANCES=new WeakMap;var Bn=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Us(e)}static forPath(e,t,r){if(e.length%2!==0)throw new P("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Me(t._delegate,r,new $(e)))}static forKey(e,t,r){return new n(t,new Me(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Hs(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Hs(this.firestore,P_(this._delegate,e))}catch(t){throw Nt(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Oe(e),e instanceof Me?k_(this._delegate,e):!1}set(e,t){t=Y_("DocumentReference.set",t);try{return t?U_(this._delegate,e,t):U_(this._delegate,e)}catch(r){throw Nt(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?$_(this._delegate,e):$_(this._delegate,e,t,...r)}catch(i){throw Nt(i,"updateDoc()","DocumentReference.update()")}}delete(){return FA(this._delegate)}onSnapshot(...e){let t=WA(e),r=KA(e,i=>new Ji(this.firestore,new on(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return H_(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=RA(this._delegate):e?.source==="server"?t=NA(this._delegate):t=MA(this._delegate),t.then(r=>new Ji(this.firestore,new on(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter($s.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Nt(n,e,t){return n.message=n.message.replace(e,t),n}function WA(n){for(let e of n)if(typeof e=="object"&&!z_(e))return e;return{}}function KA(n,e){var t,r;let i;return z_(n[0])?i=n[0]:z_(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Ji=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Bn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return B_(this._delegate,e._delegate)}},Xi=class extends Ji{data(e){let t=this._delegate.data(e);return this._delegate._converter||bb(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},eo=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Us(e)}where(e,t,r){try{return new n(this.firestore,fr(this._delegate,wA(e,t,r)))}catch(i){throw Nt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,fr(this._delegate,IA(e,t)))}catch(r){throw Nt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,fr(this._delegate,EA(e)))}catch(t){throw Nt(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,fr(this._delegate,DA(e)))}catch(t){throw Nt(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,fr(this._delegate,CA(...e)))}catch(t){throw Nt(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,fr(this._delegate,TA(...e)))}catch(t){throw Nt(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,fr(this._delegate,bA(...e)))}catch(t){throw Nt(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,fr(this._delegate,SA(...e)))}catch(t){throw Nt(t,"endAt()","Query.endAt()")}}isEqual(e){return O_(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=kA(this._delegate):e?.source==="server"?t=OA(this._delegate):t=PA(this._delegate),t.then(r=>new eu(this.firestore,new wn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=WA(e),r=KA(e,i=>new eu(this.firestore,new wn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return H_(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter($s.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},W_=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Xi(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},eu=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new eo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Xi(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new W_(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Xi(this._firestore,r))})}isEqual(e){return B_(this._delegate,e._delegate)}},Hs=class n extends eo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Bn(this.firestore,e):null}doc(e){try{return e===void 0?new Bn(this.firestore,Xc(this._delegate)):new Bn(this.firestore,Xc(this._delegate,e))}catch(t){throw Nt(t,"doc()","CollectionReference.doc()")}}add(e){return LA(this._delegate,e).then(t=>new Bn(this.firestore,t))}isEqual(e){return k_(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter($s.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Zi(n){return we(n,Me)}var K_=class n{constructor(...e){this._delegate=new _n(...e)}static documentId(){return new n(Ge.keyField().canonicalString())}isEqual(e){return e=Oe(e),e instanceof _n?this._delegate._internalPath.isEqual(e._internalPath):!1}};var Q_=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=UA();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=BA();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=$A(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=HA(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=qA(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var B2={Firestore:$h,GeoPoint:zi,Timestamp:Le,Blob:Uh,Transaction:Hh,WriteBatch:qh,DocumentReference:Bn,DocumentSnapshot:Ji,Query:eo,QueryDocumentSnapshot:Xi,QuerySnapshot:eu,CollectionReference:Hs,FieldPath:K_,FieldValue:Q_,setLogLevel:j2,CACHE_SIZE_UNLIMITED:nA};function U2(n,e){n.INTERNAL.registerComponent(new oi("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},B2)))}function $2(n){U2(n,(e,t)=>new $h(e,t,new G_)),n.registerVersion(F2,L2)}$2(Ut);function H2(n,e=pa){return new pe(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function QA(n,e){return H2(n,e)}function q2(n,e){return QA(n,e).pipe(di(void 0),ya(),G(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function X_(n,e){return QA(n,e).pipe(G(t=>({payload:t,type:"query"})))}var zh=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=JA(r,t);return new Wh(i,o,this.afs)}snapshotChanges(){return q2(this.ref,this.afs.schedulers.outsideAngular).pipe(Lt)}valueChanges(e={}){return this.snapshotChanges().pipe(G(({payload:t})=>e.idField?xe(V({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return Ee(this.ref.get(e)).pipe(Lt)}};function Gh(n,e){return X_(n,e).pipe(di(void 0),ya(),G(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let l=o.find(p=>p.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(p=>p.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function YA(n,e,t){return Gh(n,t).pipe(li((r,i)=>z2(r,i.map(o=>o.payload),e),[]),Wf(),G(r=>r.map(i=>({type:i.type,payload:i}))))}function z2(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=G2(n,r))}),n}function Z_(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function G2(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return Z_(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return Z_(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Z_(n,e.oldIndex,1);break}return n}function ZA(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var Wh=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Gh(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(G(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(di(void 0),ya(),lt(([r,i])=>i.length>0||!r),G(([,r])=>r),Lt)}auditTrail(e){return this.stateChanges(e).pipe(li((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=ZA(e);return YA(this.query,t,this.afs.schedulers.outsideAngular).pipe(Lt)}valueChanges(e={}){return X_(this.query,this.afs.schedulers.outsideAngular).pipe(G(t=>t.payload.docs.map(r=>e.idField?xe(V({},r.data()),{[e.idField]:r.id}):r.data())),Lt)}get(e){return Ee(this.query.get(e)).pipe(Lt)}add(e){return this.ref.add(e)}doc(e){return new zh(this.ref.doc(e),this.afs)}},J_=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?Gh(this.query,this.afs.schedulers.outsideAngular).pipe(Lt):Gh(this.query,this.afs.schedulers.outsideAngular).pipe(G(t=>t.filter(r=>e.indexOf(r.type)>-1)),lt(t=>t.length>0),Lt)}auditTrail(e){return this.stateChanges(e).pipe(li((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=ZA(e);return YA(this.query,t,this.afs.schedulers.outsideAngular).pipe(Lt)}valueChanges(e={}){return X_(this.query,this.afs.schedulers.outsideAngular).pipe(G(r=>r.payload.docs.map(i=>e.idField?V({[e.idField]:i.id},i.data()):i.data())),Lt)}get(e){return Ee(this.query.get(e)).pipe(Lt)}},W2=new W("angularfire2.enableFirestorePersistence"),K2=new W("angularfire2.firestore.persistenceSettings"),Q2=new W("angularfire2.firestore.settings"),Y2=new W("angularfire2.firestore.use-emulator");function JA(n,e=t=>t){return{query:e(n),ref:n}}var jt=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,c,l,h,p,m,v,b,R,N,B,q){this.schedulers=c;let F=fc(t,a,r),Z=h;p&&Gm(F,a,m,b,R,N,v,B),[this.firestore,this.persistenceEnabled$]=Dd(`${F.name}.firestore`,"AngularFirestore",F.name,()=>{let te=a.runOutsideAngular(()=>F.firestore());if(o&&te.settings(o),Z&&te.useEmulator(...Z),i&&!Ci(s)){let J=()=>{try{return Ee(te.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(I){return typeof console<"u"&&console.warn(I),X(!1)}};return[te,a.runOutsideAngular(J)]}else return[te,X(!1)]},[o,Z,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=JA(i,r),a=this.schedulers.ngZone.run(()=>o);return new Wh(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new J_(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new zh(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(O(ts),O(ns,8),O(W2,8),O(Q2,8),O(Ot),O(ye),O(wd),O(K2,8),O(Y2,8),O(_T,8),O(Bm,8),O(Um,8),O($m,8),O(Hm,8),O(qm,8),O(zm,8),O(Ai,8))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var XA=(()=>{class n{constructor(t){this.db=t,this.accesoHeader="header service running...",this.dbPath="/header",this.headerRef=t.collection(this.dbPath)}getHeader(){return this.headerRef}static{this.\u0275fac=function(r){return new(r||n)(O(jt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ex=(()=>{class n{constructor(t){this.headerService=t,this.header=new vd,console.log(this.headerService),this.headerService.getHeader().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.header=r[0],console.log(this.header)})}static{this.\u0275fac=function(r){return new(r||n)($e(XA))}}static{this.\u0275cmp=st({type:n,selectors:[["app-header"]],decls:26,vars:7,consts:[[1,"header-container"],[1,"header-left"],["alt","Foto de perfil",1,"profile-image",3,"src"],[1,"personal-info"],[1,"name"],[1,"goal"],[1,"header-right"],[1,"contact-list"],[1,"icon"]],template:function(r,i){r&1&&(ne(0,"div",0)(1,"div",1),fn(2,"img",2),ne(3,"div",3)(4,"h1",4),se(5),Q(),ne(6,"p",5),se(7),Q()()(),ne(8,"div",6)(9,"ul",7)(10,"li")(11,"span",8),se(12,"\u{1F4E7}"),Q(),se(13),Q(),ne(14,"li")(15,"span",8),se(16,"\u{1F4DE}"),Q(),se(17),Q(),ne(18,"li")(19,"span",8),se(20,"\u{1F4CD}"),Q(),se(21),Q(),ne(22,"li")(23,"span",8),se(24,"\u{1F310}"),Q(),se(25),Q()()()()),r&2&&(oe(2),Ye("src",i.header.photoUrl,GD),oe(3),Ze(i.header.name),oe(2),Ze(i.header.goalLife),oe(6),vt(" ",i.header.email,""),oe(4),vt(" ",i.header.phoneNumber,""),oe(4),vt(" ",i.header.location,""),oe(4),vt(" ",i.header.socialNetwork,""))},styles:[".header-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;padding:2rem;background-color:#f8f9fa;border-bottom:4px solid #c8102e;border-radius:8px;margin-bottom:2rem}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem}.profile-image[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:100%;border:3px solid #c8102e;object-fit:cover}.personal-info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{margin:0;font-size:2rem;font-weight:700}.goal[_ngcontent-%COMP%]{margin:.5rem 0 0;font-size:1rem;color:#555;max-width:400px}.header-right[_ngcontent-%COMP%]{font-size:.95rem}.contact-list[_ngcontent-%COMP%]{list-style:none;padding:0}.contact-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.5rem}.icon[_ngcontent-%COMP%]{margin-right:.5rem;color:#c8102e;font-weight:700}"]})}}return n})();var tx=(()=>{class n{constructor(t){this.db=t,this.accesoWorkExperience="work experience running...",this.dbPath="/work-experience",this.workExperienceRef=t.collection(this.dbPath)}getWorkExperience(){return this.workExperienceRef}static{this.\u0275fac=function(r){return new(r||n)(O(jt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ej(n,e){if(n&1&&(ne(0,"li"),se(1),Q()),n&2){let t=e.$implicit;oe(),Ze(t)}}function tj(n,e){if(n&1&&(ne(0,"div",9)(1,"ul"),dt(2,ej,2,1,"li",10),Q()()),n&2){let t=Fa().$implicit;oe(2),Ye("ngForOf",t.accomplishments)}}function nj(n,e){if(n&1&&(ne(0,"div",3)(1,"div",4)(2,"div",5)(3,"b"),se(4),Q()()(),ne(5,"div",6),se(6),Q(),ne(7,"div",7),se(8),Q(),dt(9,tj,3,1,"div",8),Q()),n&2){let t=e.$implicit;oe(4),Ze(t.position),oe(2),Ze(t.company),oe(2),La("",t.startDate," - ",t.endDate||"Actualidad",""),oe(),Ye("ngIf",t.accomplishments)}}var nx=(()=>{class n{constructor(t){this.workExperienceService=t,this.workExperience=[],console.log(this.workExperienceService),this.workExperienceService.getWorkExperience().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.workExperience=r,console.log(this.workExperience)})}static{this.\u0275fac=function(r){return new(r||n)($e(tx))}}static{this.\u0275cmp=st({type:n,selectors:[["app-work-experience"]],decls:4,vars:1,consts:[[1,"work-experience-section"],[1,"section-title"],["class","work-card",4,"ngFor","ngForOf"],[1,"work-card"],[1,"work-header"],[1,"work-role"],[1,"work-company"],[1,"work-dates"],["class","work-description",4,"ngIf"],[1,"work-description"],[4,"ngFor","ngForOf"]],template:function(r,i){r&1&&(ne(0,"div",0)(1,"div",1),se(2,"Experiencia Laboral"),Q(),dt(3,nj,10,5,"div",2),Q()),r&2&&(oe(3),Ye("ngForOf",i.workExperience))},dependencies:[en,Uo],styles:[".work-experience-section[_ngcontent-%COMP%]{margin-bottom:2rem}.work-card[_ngcontent-%COMP%]{background-color:#fff;border-left:4px solid #c8102e;padding:1rem;margin-bottom:1.5rem;border-radius:8px;box-shadow:0 2px 5px #0000000d}.work-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:1.05rem;font-weight:700}.work-company[_ngcontent-%COMP%]{font-style:italic;color:#444}.work-dates[_ngcontent-%COMP%]{color:#777;font-size:.9rem;margin-bottom:.5rem}.work-description[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:1.2rem;list-style:disc;color:#333}"]})}}return n})();var rx=(()=>{class n{constructor(t){this.db=t,this.accesEducation="Education service running... ",this.dbPath="/education",this.educationRef=t.collection(this.dbPath)}getEducation(){return this.educationRef}static{this.\u0275fac=function(r){return new(r||n)(O(jt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function oj(n,e){if(n&1&&(ne(0,"div",3)(1,"div",4)(2,"b"),se(3),Q()(),ne(4,"div",5),se(5),Q()()),n&2){let t=e.$implicit;oe(3),Ze(t.degree),oe(2),Ze(t.institution)}}var ix=(()=>{class n{constructor(t){this.educationService=t,this.education=[],console.log(this.educationService),this.educationService.getEducation().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.education=r,console.log(this.education)})}static{this.\u0275fac=function(r){return new(r||n)($e(rx))}}static{this.\u0275cmp=st({type:n,selectors:[["app-education"]],decls:4,vars:1,consts:[[1,"education-section"],[1,"section-title"],["class","education-card",4,"ngFor","ngForOf"],[1,"education-card"],[1,"education-header"],[1,"education-school"]],template:function(r,i){r&1&&(ne(0,"div",0)(1,"div",1),se(2,"Educaci\xF3n"),Q(),dt(3,oj,6,2,"div",2),Q()),r&2&&(oe(3),Ye("ngForOf",i.education))},dependencies:[en],styles:[".education-section[_ngcontent-%COMP%]{margin-bottom:2rem}.education-card[_ngcontent-%COMP%]{background-color:#fff;border-left:4px solid #c8102e;padding:1rem;margin-bottom:1rem;border-radius:8px;box-shadow:0 2px 5px #0000000d}.education-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:1rem;margin-bottom:.3rem}.education-school[_ngcontent-%COMP%]{font-style:italic;color:#666}"]})}}return n})();var ox=(()=>{class n{constructor(t){this.db=t,this.accesSkills="Skills service running... ",this.dbPath="/skills",this.skillsRef=t.collection(this.dbPath)}getSkills(){return this.skillsRef}static{this.\u0275fac=function(r){return new(r||n)(O(jt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function cj(n,e){if(n&1&&(ne(0,"div",3)(1,"div",4)(2,"div",5)(3,"b"),se(4),Q()(),ne(5,"div",6),se(6),Q()(),ne(7,"div",7)(8,"div",8),fn(9,"div",9),Q(),ne(10,"div",10),se(11),Q()()()),n&2){let t=e.$implicit;oe(4),Ze(t.name),oe(2),Ze(t.category),oe(3),$l("width",t.level,"%"),oe(2),La(" Nivel: ",t.level," | A\xF1os de experiencia: ",t.yearsofExperience," ")}}var sx=(()=>{class n{constructor(t){this.skillsService=t,this.skills=[],console.log(this.skillsService),this.skillsService.getSkills().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.skills=r,console.log(this.skills)})}static{this.\u0275fac=function(r){return new(r||n)($e(ox))}}static{this.\u0275cmp=st({type:n,selectors:[["app-skills"]],decls:4,vars:1,consts:[[1,"skills-section"],[1,"section-title"],["class","skill-card",4,"ngFor","ngForOf"],[1,"skill-card"],[1,"skill-header"],[1,"skill-name"],[1,"skill-category"],[1,"skill-progress"],[1,"skill-bar"],[1,"skill-fill"],[1,"skill-meta"]],template:function(r,i){r&1&&(ne(0,"div",0)(1,"div",1),se(2,"Habilidades y Competencias"),Q(),dt(3,cj,12,6,"div",2),Q()),r&2&&(oe(3),Ye("ngForOf",i.skills))},dependencies:[en],styles:[".skills-section[_ngcontent-%COMP%]{margin-bottom:2rem}.skill-card[_ngcontent-%COMP%]{background-color:#fff;border-left:4px solid #c8102e;padding:1rem;margin-bottom:1rem;border-radius:8px;box-shadow:0 2px 5px #0000000d}.skill-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:.5rem}.skill-name[_ngcontent-%COMP%]{font-size:1.1rem}.skill-category[_ngcontent-%COMP%]{font-style:italic;color:#777}.skill-bar[_ngcontent-%COMP%]{height:8px;background-color:#eee;border-radius:4px;overflow:hidden;margin:.5rem 0}.skill-fill[_ngcontent-%COMP%]{height:100%;background-color:#c8102e;width:0;transition:width .5s ease}.skill-meta[_ngcontent-%COMP%]{font-size:.85rem;color:#555}"]})}}return n})();var ax=(()=>{class n{constructor(t){this.db=t,this.dbPath="/certificates",this.accesCertificates="Certificates service running... ",this.certificatesRef=t.collection(this.dbPath)}getCertificates(){return this.certificatesRef}static{this.\u0275fac=function(r){return new(r||n)(O(jt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function dj(n,e){if(n&1&&(ne(0,"div",3)(1,"div",4)(2,"div",5)(3,"b"),se(4),Q()(),ne(5,"div",6),se(6),Q()(),ne(7,"div",7)(8,"div",8)(9,"span")(10,"b"),se(11,"Fecha de emisi\xF3n:"),Q(),se(12),Q(),fn(13,"br"),ne(14,"span")(15,"b"),se(16,"Fecha de expiraci\xF3n:"),Q(),se(17),Q()()()()),n&2){let t=e.$implicit;oe(4),Ze(t.name),oe(2),vt(" Emitido por: ",t.organization," "),oe(6),vt(" ",t.issueDate,""),oe(5),vt(" ",t.expirationDate||"No expiraci\xF3n","")}}var cx=(()=>{class n{constructor(t){this.certificatesService=t,this.certificates=[],console.log(this.certificatesService),this.certificatesService.getCertificates().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.certificates=r,console.log(this.certificates)})}static{this.\u0275fac=function(r){return new(r||n)($e(ax))}}static{this.\u0275cmp=st({type:n,selectors:[["app-certificates"]],decls:4,vars:1,consts:[[1,"certificates-section"],[1,"section-title"],["class","certificate-card",4,"ngFor","ngForOf"],[1,"certificate-card"],[1,"certificate-header"],[1,"certificate-name"],[1,"certificate-organization"],[1,"certificate-details"],[1,"certificate-dates"]],template:function(r,i){r&1&&(ne(0,"div",0)(1,"div",1),se(2,"Certificaciones"),Q(),dt(3,dj,18,4,"div",2),Q()),r&2&&(oe(3),Ye("ngForOf",i.certificates))},dependencies:[en]})}}return n})();var ux=(()=>{class n{constructor(t){this.db=t,this.accesLanguages="Languages service running... ",this.dbPath="/languages",this.languagesRef=t.collection(this.dbPath)}getLanguages(){return this.languagesRef}static{this.\u0275fac=function(r){return new(r||n)(O(jt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function pj(n,e){n&1&&(ne(0,"div",8)(1,"span",9),se(2,"\u2714 Certificado"),Q()())}function gj(n,e){if(n&1&&(ne(0,"div",3)(1,"div",4)(2,"div",5)(3,"b"),se(4),Q()(),ne(5,"div",6),se(6),Q()(),dt(7,pj,3,0,"div",7),Q()),n&2){let t=e.$implicit;oe(4),Ze(t.name),oe(2),vt("Nivel: ",t.proficiency,""),oe(),Ye("ngIf",t.certified)}}var lx=(()=>{class n{constructor(t){this.languagesService=t,this.languages=[],console.log(this.languagesService),this.languagesService.getLanguages().snapshotChanges().pipe(G(r=>r.map(i=>V({key:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.languages=r,console.log(r)})}static{this.\u0275fac=function(r){return new(r||n)($e(ux))}}static{this.\u0275cmp=st({type:n,selectors:[["app-languages"]],decls:4,vars:1,consts:[[1,"languages-section"],[1,"section-title"],["class","language-card",4,"ngFor","ngForOf"],[1,"language-card"],[1,"language-header"],[1,"language-name"],[1,"language-proficiency"],["class","language-certified",4,"ngIf"],[1,"language-certified"],[1,"certified-label"]],template:function(r,i){r&1&&(ne(0,"div",0)(1,"div",1),se(2,"Idiomas"),Q(),dt(3,gj,8,3,"div",2),Q()),r&2&&(oe(3),Ye("ngForOf",i.languages))},dependencies:[en,Uo],styles:[".languages-section[_ngcontent-%COMP%]{margin-bottom:2rem}.language-card[_ngcontent-%COMP%]{background-color:#fff;border-left:4px solid #c8102e;padding:1rem;margin-bottom:1rem;border-radius:8px;box-shadow:0 2px 5px #0000000d}.language-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:1rem}.language-certified[_ngcontent-%COMP%]{margin-top:.5rem;font-size:.85rem;color:#2e7d32}.certified-label[_ngcontent-%COMP%]{font-weight:700}"]})}}return n})();var dx=(()=>{class n{constructor(t){this.db=t,this.accesInterests="Interest service running... ",this.dbPath="/interests",this.interestsRef=t.collection(this.dbPath)}getInterests(){return this.interestsRef}static{this.\u0275fac=function(r){return new(r||n)(O(jt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function vj(n,e){if(n&1&&(ne(0,"span"),se(1),Q()),n&2){let t=Fa().$implicit;oe(),vt("Nivel: ",t.level,"")}}function _j(n,e){if(n&1&&(ne(0,"span"),se(1),Q()),n&2){let t=Fa().$implicit;oe(),vt(" \u2022 Desde ",t.startYear,"")}}function wj(n,e){if(n&1&&(ne(0,"div",4)(1,"div",5)(2,"b"),se(3),Q()(),ne(4,"div",6),dt(5,vj,2,1,"span",7)(6,_j,2,1,"span",7),Q()()),n&2){let t=e.$implicit;oe(3),Ze(t.name),oe(2),Ye("ngIf",t.level),oe(),Ye("ngIf",t.startYear)}}var hx=(()=>{class n{constructor(t){this.interestsService=t,this.interests=[],console.log(this.interestsService),this.interestsService.getInterests().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.interests=r,console.log(this.interests)})}static{this.\u0275fac=function(r){return new(r||n)($e(dx))}}static{this.\u0275cmp=st({type:n,selectors:[["app-interests"]],decls:5,vars:1,consts:[[1,"interests-section"],[1,"section-title"],[1,"interests-list"],["class","interest-card",4,"ngFor","ngForOf"],[1,"interest-card"],[1,"interest-name"],[1,"interest-meta"],[4,"ngIf"]],template:function(r,i){r&1&&(ne(0,"div",0)(1,"div",1),se(2,"Intereses"),Q(),ne(3,"div",2),dt(4,wj,7,3,"div",3),Q()()),r&2&&(oe(4),Ye("ngForOf",i.interests))},dependencies:[en,Uo],styles:[".interests-section[_ngcontent-%COMP%]{margin-bottom:2rem}.interests-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.interest-card[_ngcontent-%COMP%]{background-color:#fff;border-left:4px solid #c8102e;padding:.75rem 1rem;border-radius:8px;box-shadow:0 2px 5px #0000000d}.interest-name[_ngcontent-%COMP%]{font-size:1.05rem;color:#222}.interest-meta[_ngcontent-%COMP%]{color:#555;font-size:.9rem;margin-top:.25rem}"]})}}return n})();var fx=(()=>{class n{constructor(){this.title="my-cv2"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=st({type:n,selectors:[["app-root"]],decls:8,vars:0,consts:[[1,"cv-container"],[1,"section-title"]],template:function(r,i){r&1&&(ne(0,"div",0),fn(1,"app-header",1)(2,"app-work-experience")(3,"app-skills")(4,"app-education")(5,"app-certificates")(6,"app-languages")(7,"app-interests"),Q())},dependencies:[ex,nx,ix,sx,cx,lx,hx],styles:["body[_ngcontent-%COMP%]{background-color:#f0f2f5;margin:0;padding:20px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;color:#333}.cv-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px;width:100%;max-width:1000px;margin:30px auto;padding:24px;background-color:#fff;border-radius:16px;box-shadow:0 6px 20px #00000014;border:1px solid #e0e0e0}app-header[_ngcontent-%COMP%]{grid-column:1 / 3;margin-bottom:20px;padding-bottom:12px;border-bottom:2px solid #ccc}app-experience[_ngcontent-%COMP%], app-skills[_ngcontent-%COMP%], app-education[_ngcontent-%COMP%], app-certificates[_ngcontent-%COMP%], app-languages[_ngcontent-%COMP%], app-interests[_ngcontent-%COMP%]{margin-bottom:16px}.section-title[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#2c3e50;margin-bottom:12px;padding-bottom:6px;border-bottom:2px solid #dcdcdc}@media (max-width: 768px){.cv-container[_ngcontent-%COMP%]{grid-template-columns:1fr;padding:16px}app-header[_ngcontent-%COMP%], app-experience[_ngcontent-%COMP%], app-education[_ngcontent-%COMP%], app-languages[_ngcontent-%COMP%], app-skills[_ngcontent-%COMP%], app-certificates[_ngcontent-%COMP%], app-interests[_ngcontent-%COMP%]{grid-column:1 / 2;border-right:none}.section-title[_ngcontent-%COMP%]{font-size:18px;margin-bottom:10px}}"]})}}return n})();var px={production:!1,firebase:{apiKey:"AIzaSyC7t7_JYL0b2TGqL4hj4-U0zgv4-uKIKM8",authDomain:"dsvangel-cv.firebaseapp.com",projectId:"dsvangel-cv",storageBucket:"dsvangel-cv.firebasestorage.app",messagingSenderId:"89051442429",appId:"1:89051442429:web:525153eda95d63a9282294",measurementId:"G-S0TTC90R93"}};var gx=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=xt({type:n,bootstrap:[fx]})}static{this.\u0275inj=At({imports:[uC,nT,vT.initializeApp(px.firebase)]})}}return n})();cC().bootstrapModule(gx,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
